(()=>{var e={35358:(e,t,n)=>{var o={"./af":17582,"./af.js":17582,"./ar":93042,"./ar-dz":54265,"./ar-dz.js":54265,"./ar-kw":92553,"./ar-kw.js":92553,"./ar-ly":85352,"./ar-ly.js":85352,"./ar-ma":67097,"./ar-ma.js":67097,"./ar-ps":76150,"./ar-ps.js":76150,"./ar-sa":84427,"./ar-sa.js":84427,"./ar-tn":7221,"./ar-tn.js":7221,"./ar.js":93042,"./az":60458,"./az.js":60458,"./be":17596,"./be.js":17596,"./bg":93830,"./bg.js":93830,"./bm":27044,"./bm.js":27044,"./bn":58573,"./bn-bd":13296,"./bn-bd.js":13296,"./bn.js":58573,"./bo":25614,"./bo.js":25614,"./br":62041,"./br.js":62041,"./bs":91786,"./bs.js":91786,"./ca":75833,"./ca.js":75833,"./cs":52711,"./cs.js":52711,"./cv":71036,"./cv.js":71036,"./cy":84977,"./cy.js":84977,"./da":8770,"./da.js":8770,"./de":67342,"./de-at":81566,"./de-at.js":81566,"./de-ch":87544,"./de-ch.js":87544,"./de.js":67342,"./dv":82875,"./dv.js":82875,"./el":78536,"./el.js":78536,"./en-au":38617,"./en-au.js":38617,"./en-ca":79227,"./en-ca.js":79227,"./en-gb":59754,"./en-gb.js":59754,"./en-ie":37217,"./en-ie.js":37217,"./en-il":85418,"./en-il.js":85418,"./en-in":80800,"./en-in.js":80800,"./en-nz":67299,"./en-nz.js":67299,"./en-sg":76305,"./en-sg.js":76305,"./eo":8673,"./eo.js":8673,"./es":71301,"./es-do":3187,"./es-do.js":3187,"./es-mx":48223,"./es-mx.js":48223,"./es-us":37634,"./es-us.js":37634,"./es.js":71301,"./et":4976,"./et.js":4976,"./eu":11847,"./eu.js":11847,"./fa":74372,"./fa.js":74372,"./fi":41628,"./fi.js":41628,"./fil":56802,"./fil.js":56802,"./fo":42874,"./fo.js":42874,"./fr":9853,"./fr-ca":87170,"./fr-ca.js":87170,"./fr-ch":22825,"./fr-ch.js":22825,"./fr.js":9853,"./fy":68876,"./fy.js":68876,"./ga":93533,"./ga.js":93533,"./gd":82770,"./gd.js":82770,"./gl":98602,"./gl.js":98602,"./gom-deva":63059,"./gom-deva.js":63059,"./gom-latn":48212,"./gom-latn.js":48212,"./gu":23409,"./gu.js":23409,"./he":17210,"./he.js":17210,"./hi":4750,"./hi.js":4750,"./hr":51315,"./hr.js":51315,"./hu":47626,"./hu.js":47626,"./hy-am":91317,"./hy-am.js":91317,"./id":26892,"./id.js":26892,"./is":97577,"./is.js":97577,"./it":57628,"./it-ch":3046,"./it-ch.js":3046,"./it.js":57628,"./ja":92504,"./ja.js":92504,"./jv":25917,"./jv.js":25917,"./ka":64513,"./ka.js":64513,"./kk":94935,"./kk.js":94935,"./km":96661,"./km.js":96661,"./kn":89964,"./kn.js":89964,"./ko":98067,"./ko.js":98067,"./ku":61165,"./ku-kmr":85158,"./ku-kmr.js":85158,"./ku.js":61165,"./ky":11177,"./ky.js":11177,"./lb":2967,"./lb.js":2967,"./lo":81972,"./lo.js":81972,"./lt":58469,"./lt.js":58469,"./lv":33155,"./lv.js":33155,"./me":87935,"./me.js":87935,"./mi":74483,"./mi.js":74483,"./mk":32501,"./mk.js":32501,"./ml":73120,"./ml.js":73120,"./mn":20266,"./mn.js":20266,"./mr":19406,"./mr.js":19406,"./ms":80109,"./ms-my":90864,"./ms-my.js":90864,"./ms.js":80109,"./mt":22904,"./mt.js":22904,"./my":44067,"./my.js":44067,"./nb":21301,"./nb.js":21301,"./ne":81152,"./ne.js":81152,"./nl":76735,"./nl-be":97761,"./nl-be.js":97761,"./nl.js":76735,"./nn":37569,"./nn.js":37569,"./oc-lnc":20833,"./oc-lnc.js":20833,"./pa-in":3044,"./pa-in.js":3044,"./pl":34249,"./pl.js":34249,"./pt":87585,"./pt-br":26826,"./pt-br.js":26826,"./pt.js":87585,"./ro":62526,"./ro.js":62526,"./ru":62204,"./ru.js":62204,"./sd":43270,"./sd.js":43270,"./se":61541,"./se.js":61541,"./si":71921,"./si.js":71921,"./sk":49935,"./sk.js":49935,"./sl":46254,"./sl.js":46254,"./sq":59897,"./sq.js":59897,"./sr":42496,"./sr-cyrl":11135,"./sr-cyrl.js":11135,"./sr.js":42496,"./ss":32215,"./ss.js":32215,"./sv":84716,"./sv.js":84716,"./sw":50803,"./sw.js":50803,"./ta":31538,"./ta.js":31538,"./te":2302,"./te.js":2302,"./tet":25280,"./tet.js":25280,"./tg":14100,"./tg.js":14100,"./th":95385,"./th.js":95385,"./tk":736,"./tk.js":736,"./tl-ph":79726,"./tl-ph.js":79726,"./tlh":41873,"./tlh.js":41873,"./tr":36463,"./tr.js":36463,"./tzl":27491,"./tzl.js":27491,"./tzm":29500,"./tzm-latn":80196,"./tzm-latn.js":80196,"./tzm.js":29500,"./ug-cn":91287,"./ug-cn.js":91287,"./uk":35341,"./uk.js":35341,"./ur":36246,"./ur.js":36246,"./uz":55550,"./uz-latn":77254,"./uz-latn.js":77254,"./uz.js":55550,"./vi":78796,"./vi.js":78796,"./x-pseudo":22736,"./x-pseudo.js":22736,"./yo":28621,"./yo.js":28621,"./zh-cn":67601,"./zh-cn.js":67601,"./zh-hk":39053,"./zh-hk.js":39053,"./zh-mo":71248,"./zh-mo.js":71248,"./zh-tw":74725,"./zh-tw.js":74725};function a(e){var t=r(e);return n(t)}function r(e){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}a.keys=function(){return Object.keys(o)},a.resolve=r,e.exports=a,a.id=35358},38567:(e,t,n)=>{"use strict";var o=n(47401),a=(n(94090),n(36665)),r=n(73929),s=n(6283),i=n(75675),l=n(4701),d=n(15009),c=n(90932),u=n(2772),f=n(26725),h=n(15648),g=n(1248),m=n(16773),x=n(78264),p=n(74037),y=n(44459),j=n(77109),w=n(41681);class b{constructor(e,t,n="Successful Request",o=!0){this.statusCode=e,this.data=t,this.message=n,this.success=o}}class C extends Error{constructor(e,t,n){super(),this.statusCode=e,this.message=n,this.error=t,this.success=!1}}var S=n(68315);let T=function(e){return e.WEB="web",e.PHONE="phone",e}({});async function v(e,t,n=T.PHONE){try{switch(n){case T.WEB:localStorage.setItem(e,t);break;case T.PHONE:default:await S.setItemAsync(e,t,{keychainAccessible:S.WHEN_UNLOCKED})}}catch(o){throw console.error("Error saving token:",o),new Error("Failed to save token")}}async function D(e,t=T.PHONE){try{switch(console.log(t),t){case T.WEB:return localStorage.getItem(e);case T.PHONE:default:return await S.getItemAsync(e)}}catch(n){throw console.error("Error retrieving token:",n),new Error("Failed to retrieve token")}}async function k(e,t=T.PHONE){try{switch(t){case T.WEB:localStorage.removeItem(e);break;case T.PHONE:default:await S.deleteItemAsync(e)}}catch(n){throw console.error("Error deleting token:",n),new Error("Failed to delete token")}}const B=j.default.create({baseURL:"https://workhive.space/api/v1/channel/",headers:{"Content-Type":"application/json"}}),I=async(e,t)=>{try{const n=await D("accessToken",t);return(await B.get("getAllChannelForCurrentServer",{params:{serverId:e},headers:{Authorization:`Bearer ${n}`}})).data}catch(n){if(n instanceof w.AxiosError){const e=n.response?.data;return new C(e.statusCode,{},e.message)}return new C(400,{},"Something went wrong")}},E=j.default.create({baseURL:"https://workhive.space/api/v1/server/",headers:{"Content-Type":"application/json"}}),z=async e=>{try{const t=await D("accessToken",e);return(await E.get("getLoggedInUserServer",{params:{accessToken:t},headers:{Authorization:`Bearer ${t}`}})).data}catch(t){if(t instanceof w.AxiosError){const e=t.response?.data;return new C(e.statusCode,{},e.message)}return new C(400,{},"Something went wrong")}},A=async()=>{const e=await D("accessToken",T.WEB);console.log("---------",e,"----");try{return(await E.get("fetchAllUsers",{headers:{Authorization:`Bearer ${e}`}})).data}catch(t){if(console.error("API error:",t),t instanceof w.AxiosError){const e=t.response?.data;return new C(e.statusCode,{},e.message)}return new C(400,{},"Something went wrong")}};var P=n(94987),R=n(60397);const W=i.default.create({chatSection:{borderTopWidth:1,borderTopColor:"#ccc",paddingTop:10,paddingHorizontal:12,marginBottom:20},chatHeader:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:10},chatTitle:{fontSize:12,fontWeight:"600",color:"white",textTransform:"uppercase",letterSpacing:1},addChannelButton:{padding:4},chatItem:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingVertical:8,paddingHorizontal:8,borderRadius:8,marginBottom:6,backgroundColor:"#ffffff"},chatLeft:{flexDirection:"row",alignItems:"center",gap:6,flexShrink:1},chatHash:{color:"#4A90E2",fontWeight:"700",fontSize:16,marginRight:4},chatName:{fontSize:15,color:"#333",maxWidth:120},chatLock:{marginLeft:4,color:"#777"},newMessageText:{fontSize:11,color:"#4A90E2",backgroundColor:"#e0ecff",paddingHorizontal:6,paddingVertical:2,borderRadius:999,overflow:"hidden"},modalOverlay:{flex:1,backgroundColor:"rgba(0,0,0,0.5)",justifyContent:"center",padding:20},modalContainer:{backgroundColor:"#fff",borderRadius:12,padding:20,elevation:10},modalTitle:{fontSize:18,fontWeight:"700",marginBottom:15,color:"#333"},input:{borderWidth:1,borderColor:"#ccc",paddingVertical:10,paddingHorizontal:14,borderRadius:8,fontSize:15,marginBottom:15,color:"#333"},switchRow:{flexDirection:"row",alignItems:"center",justifyContent:"space-between",marginBottom:20},switchLabel:{fontSize:15,color:"#333"},modalButtons:{flexDirection:"row",justifyContent:"flex-end",gap:10},button:{paddingVertical:10,paddingHorizontal:18,borderRadius:8},cancelButton:{backgroundColor:"#eee"},createButton:{backgroundColor:"#4A90E2"},buttonText:{fontSize:15,fontWeight:"600",color:"#333"},activeChatItem:{backgroundColor:"#88B6EC",borderWidth:1,borderColor:"#4A90E2"},roleSelectContainer:{marginBottom:20},roleOption:{paddingVertical:8,paddingHorizontal:12,borderRadius:6,borderWidth:1,borderColor:"#ccc",marginTop:6,backgroundColor:"#f5f5f5"},roleOptionActive:{backgroundColor:"#4A90E2",borderColor:"#4A90E2"},roleOptionText:{color:"#333",fontWeight:"500",textTransform:"capitalize"},roleHint:{fontSize:11,color:"#777",marginTop:2},roleBadge:{width:18,height:18,borderRadius:9,marginLeft:8,alignItems:"center",justifyContent:"center"},roleLetterText:{fontSize:11,fontWeight:"bold",color:"#fff"}}),F=()=>{const[e,t]=(0,a.useState)([]),[n,o]=(0,a.useState)(!1),[i,l]=(0,a.useState)(""),[d,c]=(0,a.useState)(!1),[f,j]=(0,a.useState)("employee"),b=(0,g.useNavigation)(),S=(0,g.useRoute)(),[k,E]=(0,a.useState)(null),A="ChatScreen"===S.name&&S.params&&"channelName"in S.params?S.params.channelName:null,F=async()=>{const e=await D("accessToken",T.WEB);console.log("Acess token:",e);try{const e=await z(T.WEB);console.log("getLoggedInUserServer response:",e),e instanceof C?P.default.show({type:"error",text1:"Server ID Error",text2:e.message}):"statusCode"in e&&"data"in e&&e.data.serverId?(console.log(" Server ID found:",e.data.serverId),E(e.data.serverId),v("serverId",e.data.serverId,T.WEB),await L(e.data.serverId)):console.warn("\u26a0\ufe0f Server ID not found in response data")}catch(t){console.error(" Unexpected error in fetchServerId:",t)}};(0,a.useEffect)((()=>{F()}),[]);const L=async e=>{try{const n=await I(e,T.WEB);if(console.log("\ud83d\udce5 Channels fetched from server:",n),n instanceof C)P.default.show({type:"error",text1:"Failed to Load Channels",text2:n.message||"Something went wrong."});else if("data"in n&&Array.isArray(n.data)){const e=n.data.map((e=>({id:e.id,name:e.name,newMessages:0,isPrivate:!1,highestRoleToAccessChannel:e.highestRoleToAccessChannel})));t(e)}else P.default.show({type:"error",text1:"Invalid Response",text2:"Unexpected format from channel API."})}catch(n){console.error("\u274c Unexpected error while fetching channels:",n),P.default.show({type:"error",text1:"Fetch Error",text2:"Could not load channels."})}},N=e=>{switch(e){case"admin":return"#D9534F";case"manager":return"#FFA500";case"employee":return"#4CAF50";default:return"#ccc"}};return(0,R.jsxs)(r.default,{style:W.chatSection,children:[(0,R.jsxs)(r.default,{style:W.chatHeader,children:[(0,R.jsx)(s.default,{style:W.chatTitle,children:"Channels"}),(0,R.jsx)(h.default,{onPress:()=>o(!0),style:W.addChannelButton,children:(0,R.jsx)(y.default,{name:"plus",size:16,color:"white"})})]}),(0,R.jsx)(u.default,{children:e.map(((t,n)=>(0,R.jsxs)(h.default,{style:[W.chatItem,A===t.name&&W.activeChatItem],onPress:()=>{b.navigate("ChatScreen",{channelName:t.name,channelId:t.id,refreshChannels:F,allChannels:e})},children:[(0,R.jsxs)(r.default,{style:W.chatLeft,children:[(0,R.jsx)(s.default,{style:W.chatHash,children:"#"}),(0,R.jsx)(s.default,{style:W.chatName,numberOfLines:1,children:t.name.length>14?`${t.name.slice(0,12)}..`:t.name}),t.isPrivate&&(0,R.jsx)(y.default,{name:"lock",size:14,style:W.chatLock})]}),t.highestRoleToAccessChannel&&(0,R.jsx)(r.default,{style:[W.roleBadge,{backgroundColor:N(t.highestRoleToAccessChannel)}],children:(0,R.jsx)(s.default,{style:W.roleLetterText,children:t.highestRoleToAccessChannel.charAt(0).toUpperCase()})}),t.newMessages>0&&(0,R.jsxs)(s.default,{style:W.newMessageText,children:[t.newMessages," new"]})]},n)))}),(0,R.jsx)(x.default,{animationType:"slide",transparent:!0,visible:n,onRequestClose:()=>o(!1),children:(0,R.jsx)(r.default,{style:W.modalOverlay,children:(0,R.jsxs)(r.default,{style:W.modalContainer,children:[(0,R.jsx)(s.default,{style:W.modalTitle,children:"Create Channel"}),(0,R.jsx)(m.default,{style:W.input,placeholder:"Enter channel name",value:i,onChangeText:l,placeholderTextColor:"#888"}),(0,R.jsxs)(r.default,{style:W.roleSelectContainer,children:[(0,R.jsx)(s.default,{style:W.switchLabel,children:"Minimum Role Required:"}),["employee","manager","admin"].map((e=>(0,R.jsx)(h.default,{style:[W.roleOption,f===e&&W.roleOptionActive],onPress:()=>j(e),children:(0,R.jsx)(s.default,{style:[W.roleOptionText,f===e&&{color:"#fff"}],children:e})},e)))]}),(0,R.jsxs)(r.default,{style:W.switchRow,children:[(0,R.jsx)(s.default,{style:W.switchLabel,children:"Private Channel"}),(0,R.jsx)(p.default,{value:d,onValueChange:c,trackColor:{false:"#ccc",true:"#4A90E2"},thumbColor:"#fff"})]}),(0,R.jsxs)(r.default,{style:W.modalButtons,children:[(0,R.jsx)(h.default,{style:[W.button,W.cancelButton],onPress:()=>o(!1),children:(0,R.jsx)(s.default,{style:W.buttonText,children:"Cancel"})}),(0,R.jsx)(h.default,{style:[W.button,W.createButton],onPress:async()=>{if(i.trim())try{const n=await D("serverId",T.WEB);if(console.log("\ud83d\udce6 Retrieved serverId:",n),!n)return void P.default.show({type:"error",text1:"Server ID Missing",text2:"Could not find your server context."});const a=await(async e=>{try{const t=await D("accessToken",T.WEB);return(await B.post("create",e,{headers:{Authorization:`Bearer ${t}`}})).data}catch(t){if(t instanceof w.AxiosError){const e=t.response?.data;return new C(e.statusCode,{},e.message)}return new C(400,{},"Something went wrong")}})({channelName:i,serverId:n});if(console.log("createRes:",a),a instanceof C||!("data"in a)||!a.data?.id)return console.warn("\u26a0\ufe0f Channel creation response invalid:",a),void P.default.show({type:"error",text1:"Channel Creation Failed",text2:a.message||"Something went wrong."});const r=a.data;console.log("\u2705 Channel created:",r);const s=await(async e=>{try{const{channelId:t,highestRoleToAccessServer:n}=e,o=await D("accessToken",T.WEB);return(await B.post("addAccessToChannel",{channelId:t,highestRoleToAccessServer:n},{headers:{Authorization:`Bearer ${o}`}})).data}catch(t){if(t instanceof w.AxiosError){const e=t.response?.data;return new C(e.statusCode,{},e.message)}return new C(400,{},"Something went wrong")}})({channelId:r.id,highestRoleToAccessServer:f});if(console.log("\ud83d\udd10 accessRes:",s),s instanceof C||!("statusCode"in s)||s.statusCode>=400)return console.warn("\u26a0\ufe0f Access control failed:",s),void P.default.show({type:"error",text1:"Access Setup Failed",text2:s.message||"Could not assign role access."});t([...e,{id:r.id,name:i,newMessages:0,isPrivate:d,highestRoleToAccessChannel:f}]),l(""),c(!1),o(!1),P.default.show({type:"success",text1:"Channel Created",text2:`${i} added successfully.`}),console.log("\ud83c\udf89 Channel added to UI successfully.")}catch(n){console.error("\u274c Unexpected error in handleCreateChannel:",n),P.default.show({type:"error",text1:"Unexpected Error",text2:"Something went wrong. Please try again."})}else P.default.show({type:"error",text1:"Channel Name Required",text2:"Please enter a valid channel name."})},children:(0,R.jsx)(s.default,{style:[W.buttonText,{color:"#fff"}],children:"Create"})})]})]})})})]})},L=i.default.create({sidebarContainer:{flex:1,backgroundColor:"transparent",position:"absolute",top:0,left:0,height:"100%",zIndex:100},sidebar:{height:"100%",backgroundColor:"#4A90E2",borderBottomEndRadius:20,borderTopEndRadius:20,paddingTop:30,paddingLeft:25,boxShadow:"4px 0px 15px rgba(0, 0, 0, 0.3)",overflow:"hidden",position:"absolute"},menuItems:{marginTop:60},menuItem:{backgroundColor:"#ffffff",width:"90%",marginBottom:20,paddingVertical:14,paddingLeft:18,borderRadius:8},activeMenuItem:{backgroundColor:"#88B6EC",color:"#fff"},menuText:{color:"#333333",fontSize:18,fontWeight:"500"}}),N=({isOpen:e,toggleSidebar:t,selectedTab:n,handleTabChange:o})=>{const i=new d.default.Value(250),l=new d.default.Value(0),[c,m]=(0,a.useState)(!1),x=(0,g.useNavigation)(),p=f.default.get("window").width;(0,a.useEffect)((()=>{console.log(x)}),[x]),(0,a.useEffect)((()=>{m(p<=768)}),[p]),(0,a.useEffect)((()=>{c||d.default.timing(i,{toValue:e?250:0,duration:300,useNativeDriver:!1}).start(),d.default.timing(l,{toValue:e?0:-250,duration:300,useNativeDriver:!1}).start()}),[e,c]);const y=e=>{console.log(`${e} item clicked`),o(e),"Schedules"===e?x.navigate("SchedulesScreen"):"Dashboard"===e?x.navigate("AdminDashboard"):"ClockInOut"===e?x.navigate("ClockInOutScreen"):"EmployeeManagement"===e?x.navigate("EmployeeManagementScreen"):"GrossPaymentScreen"===e?x.navigate("GrossPaymentScreen"):"LeaveRequestScreen"===e?x.navigate("LeaveRequestScreen"):"Settings"===e&&x.navigate("SettingsScreen")};return(0,R.jsx)(r.default,{style:L.sidebarContainer,children:(0,R.jsx)(d.default.View,{style:[L.sidebar,{width:i,left:l}],children:(0,R.jsxs)(u.default,{style:L.menuItems,children:[(0,R.jsx)(h.default,{style:[L.menuItem,"Dashboard"===n&&L.activeMenuItem],onPress:()=>y("Dashboard"),children:(0,R.jsx)(s.default,{style:L.menuText,children:"Dashboard"})}),(0,R.jsx)(F,{}),(0,R.jsx)(h.default,{style:[L.menuItem,"Schedules"===n&&L.activeMenuItem],onPress:()=>{y("Schedules")},children:(0,R.jsx)(s.default,{style:L.menuText,children:"Schedules"})}),(0,R.jsx)(h.default,{style:[L.menuItem,"ClockInOut"===n&&L.activeMenuItem],onPress:()=>y("ClockInOut"),children:(0,R.jsx)(s.default,{style:L.menuText,children:"Clock In/Out"})}),(0,R.jsx)(h.default,{style:[L.menuItem,"GrossPaymentScreen"===n&&L.activeMenuItem],onPress:()=>y("GrossPaymentScreen"),children:(0,R.jsx)(s.default,{style:L.menuText,children:"Gross Payment"})}),(0,R.jsx)(h.default,{style:[L.menuItem,"LeaveRequestScreen"===n&&L.activeMenuItem],onPress:()=>y("LeaveRequestScreen"),children:(0,R.jsx)(s.default,{style:L.menuText,children:"Leave Request"})}),(0,R.jsx)(h.default,{style:[L.menuItem,"EmployeeManagement"===n&&L.activeMenuItem],onPress:()=>y("EmployeeManagement"),children:(0,R.jsx)(s.default,{style:L.menuText,children:"Employee Management"})}),(0,R.jsx)(h.default,{style:[L.menuItem,"Settings"===n&&L.activeMenuItem],onPress:()=>y("Settings"),children:(0,R.jsx)(s.default,{style:L.menuText,children:"Settings"})})]})})})},O=i.default.create({headerContainer:{backgroundColor:"transparent",paddingHorizontal:20,paddingVertical:10,flexDirection:"row",alignItems:"center",justifyContent:"flex-start",position:"absolute",top:0,left:0,right:0,height:60,zIndex:101,elevation:3},appName:{color:"black",fontSize:24,fontWeight:"bold",marginLeft:10},toggleButton:{backgroundColor:"rgba(0, 0, 0, 0.3)",padding:12,borderRadius:50}}),H=({isSidebarOpen:e,toggleSidebar:t})=>(0,R.jsxs)(r.default,{style:O.headerContainer,children:[(0,R.jsx)(h.default,{onPress:t,style:O.toggleButton,children:(0,R.jsx)(y.default,{name:"sidebar",size:15,color:"#fff"})}),(0,R.jsx)(s.default,{style:O.appName,children:"RosterMate"})]}),M="#4A90E2",V="#FDFDFF",U="#393D3F",$="#D9534F";var q=n(31385);const Y=j.default.create({baseURL:"https://workhive.space/api/v1/notify/",headers:{"Content-Type":"application/json"}}),G=["admin","manager","Individual"],_=()=>{const[e,t]=(0,a.useState)(!1),[n,o]=(0,a.useState)(null),[i,l]=(0,a.useState)([]),[d,c]=(0,a.useState)([]),[f,g]=(0,a.useState)(""),[p,y]=(0,a.useState)("");(0,a.useEffect)((()=>{(async()=>{const e=await A();if(!(e instanceof C)&&e.data){const t=e.data.map((e=>e.Employee));c(t)}})()}),[]);const j="Individual"===n?d:d.filter((e=>e.role.toLowerCase()===n));return(0,R.jsxs)(r.default,{style:Z.card,children:[(0,R.jsx)(s.default,{style:Z.title,children:"Send Announcement"}),(0,R.jsxs)(h.default,{onPress:()=>t(!0),style:Z.button,children:[(0,R.jsx)(q.default,{name:"megaphone",size:20,color:"#fff"}),(0,R.jsx)(s.default,{style:Z.buttonText,children:"New Announcement"})]}),(0,R.jsx)(x.default,{visible:e,animationType:"slide",transparent:!0,children:(0,R.jsx)(r.default,{style:Z.modalOverlay,children:(0,R.jsx)(r.default,{style:Z.modalContent,children:(0,R.jsxs)(u.default,{children:[(0,R.jsx)(s.default,{style:Z.modalTitle,children:"Create Announcement"}),(0,R.jsxs)(r.default,{style:Z.section,children:[(0,R.jsx)(s.default,{style:Z.label,children:"Choose Role"}),G.map((e=>null===n||n===e?(0,R.jsx)(h.default,{style:[Z.optionButton,n===e&&Z.selectedOption],onPress:()=>o(n===e?null:e),children:(0,R.jsx)(s.default,{style:Z.optionText,children:e.charAt(0).toUpperCase()+e.slice(1)})},e):null))]}),n&&(0,R.jsxs)(r.default,{style:Z.section,children:[(0,R.jsx)(s.default,{style:Z.label,children:"Select Recipients"}),j.map((e=>(0,R.jsx)(h.default,{style:[Z.optionButton,i.includes(e.id)&&Z.selectedOption],onPress:()=>{return t=e.id,void l((e=>e.includes(t)?e.filter((e=>e!==t)):[...e,t]));var t},children:(0,R.jsxs)(s.default,{style:Z.optionText,children:[e.firstName," ",e.lastName," (",e.email,")"]})},e.id)))]}),(0,R.jsx)(m.default,{placeholder:"Announcement Title",style:Z.textInput,value:f,onChangeText:g}),(0,R.jsx)(m.default,{placeholder:"Write your message here...",style:Z.textArea,multiline:!0,numberOfLines:4,value:p,onChangeText:y}),(0,R.jsxs)(r.default,{style:Z.buttonRow,children:[(0,R.jsx)(h.default,{onPress:()=>t(!1),style:Z.cancelButton,children:(0,R.jsx)(s.default,{style:Z.cancelText,children:"Cancel"})}),(0,R.jsx)(h.default,{onPress:async()=>{if(n&&0!==i.length&&f.trim()&&p.trim())try{const e=i;await(async(e,t,n)=>{const o=await D("accessToken",T.WEB);try{return(await Y.post("sendNotificationToSelectedUsers",{userIds:e,title:t,body:n},{headers:{Authorization:`Bearer ${o}`}})).data}catch(a){console.error("Error sending announcement:",a);const e=a.response?.data;return new C(e?.statusCode||500,{},e?.message||"Unknown error")}})(e,f,p);P.default.show({type:"success",text1:"Announcement sent successfully!",position:"top",visibilityTime:3e3}),t(!1),o(null),l([]),g(""),y("")}catch(e){console.error("Error sending announcement:",e),P.default.show({type:"error",text1:"Failed to send announcement. Please try again.",position:"top",visibilityTime:3e3})}else P.default.show({type:"error",text1:"Please complete all fields before sending.",position:"top",visibilityTime:3e3})},style:Z.sendButton,children:(0,R.jsx)(s.default,{style:Z.sendText,children:"Send"})})]})]})})})})]})},Z=i.default.create({card:{backgroundColor:"#fff",padding:18,borderRadius:12,marginBottom:20,elevation:2},title:{fontSize:18,fontWeight:"bold",color:U,marginBottom:10},button:{backgroundColor:M,padding:12,borderRadius:8,flexDirection:"row",alignItems:"center",justifyContent:"center",gap:8},buttonText:{color:"#fff",fontWeight:"bold"},modalOverlay:{flex:1,backgroundColor:"#000000aa",justifyContent:"center",padding:20},modalContent:{backgroundColor:"#fff",padding:20,borderRadius:16,maxHeight:"90%"},modalTitle:{fontSize:20,fontWeight:"bold",color:U,marginBottom:10},section:{marginVertical:10},label:{fontSize:16,fontWeight:"600",marginBottom:6,color:U},optionButton:{padding:10,backgroundColor:"#f0f0f0",marginBottom:6,borderRadius:8},selectedOption:{backgroundColor:"#2ECC71"},optionText:{fontSize:16,color:U},textInput:{borderWidth:1,borderColor:"#ccc",borderRadius:8,padding:12,marginTop:12,marginBottom:12},textArea:{borderWidth:1,borderColor:"#ccc",borderRadius:8,padding:12,height:100,marginBottom:20,textAlignVertical:"top"},buttonRow:{flexDirection:"row",justifyContent:"flex-end",gap:12},cancelButton:{padding:10},cancelText:{color:$,fontWeight:"bold"},sendButton:{backgroundColor:M,padding:10,borderRadius:8},sendText:{color:"#fff",fontWeight:"bold"}}),K=i.default.create({container:{flex:1,flexDirection:"row",backgroundColor:V},contentWrapper:{flex:1,flexDirection:"row"},mainContent:{flex:1,marginTop:60,paddingHorizontal:20,paddingBottom:20,marginLeft:30},scrollContainer:{paddingBottom:100,flexGrow:1},welcomeBanner:{marginBottom:20},welcomeTitle:{fontSize:26,fontWeight:"bold",color:U},welcomeSubtitle:{fontSize:16,color:"#6C6C6C"},card:{backgroundColor:"#ffffff",borderRadius:12,padding:18,marginBottom:20,shadowColor:"#000",shadowOffset:{width:0,height:1},shadowOpacity:.05,shadowRadius:3,elevation:2},alertCard:{borderLeftWidth:5,borderLeftColor:$,backgroundColor:"#FFEBEB"},cardTitle:{fontSize:20,fontWeight:"bold",color:U,marginBottom:10},alertText:{fontSize:16,color:$},notificationItem:{marginBottom:15},notificationText:{fontSize:16,color:U},todoItem:{marginBottom:15},todoText:{fontSize:16,color:U},timestamp:{fontSize:12,color:"#6C6C6C"}}),J=()=>{const[e,t]=(0,a.useState)("Dashboard"),[n,o]=(0,a.useState)(!0),i=new d.default.Value(250),h=new d.default.Value(250),[g,m]=(0,a.useState)(!1),x=f.default.get("window").width;(0,a.useEffect)((()=>{x<=768?(m(!0),o(!1)):(m(!1),o(!0))}),[x]),(0,a.useEffect)((()=>{d.default.timing(i,{toValue:n?250:0,duration:300,useNativeDriver:!1}).start(),d.default.timing(h,{toValue:n?250:0,duration:300,useNativeDriver:!1}).start()}),[n]);const p=[{text:"Pranish was supposed to start working at 10. He has not clocked in yet.",time:"60 mins ago",type:"alert"},{text:"Pranish has requested for a leave this Saturday",time:"10 min ago",type:"notification"},{text:"Sabin mentioned you in #Channel1",time:"10 min ago",type:"notification"}];return(0,R.jsxs)(l.default,{style:K.container,children:[(0,R.jsx)(H,{isSidebarOpen:n,toggleSidebar:()=>o(!n)}),(0,R.jsxs)(r.default,{style:K.contentWrapper,children:[(0,R.jsx)(N,{isOpen:n,toggleSidebar:()=>o(!n),selectedTab:e,handleTabChange:e=>{t(e)}}),(0,R.jsx)(d.default.View,{style:[K.mainContent,{paddingLeft:g?0:h,flex:1}],children:(0,R.jsxs)(u.default,{contentContainerStyle:K.scrollContainer,children:[(0,R.jsxs)(r.default,{style:K.welcomeBanner,children:[(0,R.jsx)(s.default,{style:K.welcomeTitle,children:"Welcome, Admin \ud83d\udc4b"}),(0,R.jsx)(s.default,{style:K.welcomeSubtitle,children:"Here's an overview of what\u2019s happening today."})]}),(0,R.jsxs)(r.default,{style:[K.card,K.alertCard],children:[(0,R.jsx)(s.default,{style:K.cardTitle,children:"Alert"}),(0,R.jsx)(s.default,{style:K.alertText,children:p[0].text}),(0,R.jsx)(s.default,{style:K.timestamp,children:p[0].time})]}),(0,R.jsxs)(r.default,{style:K.card,children:[(0,R.jsx)(s.default,{style:K.cardTitle,children:"Notifications"}),p.slice(1).map(((e,t)=>(0,R.jsxs)(r.default,{style:K.notificationItem,children:[(0,R.jsx)(s.default,{style:K.notificationText,children:e.text}),(0,R.jsx)(s.default,{style:K.timestamp,children:e.time})]},t)))]}),(0,R.jsxs)(r.default,{style:K.card,children:[(0,R.jsx)(s.default,{style:K.cardTitle,children:"To-do\u2019s"}),(0,R.jsx)(c.default,{data:[{task:"Place an order for tomorrow",due:"Due today"}],renderItem:({item:e})=>(0,R.jsxs)(r.default,{style:K.todoItem,children:[(0,R.jsx)(s.default,{style:K.todoText,children:e.task}),(0,R.jsx)(s.default,{style:K.timestamp,children:e.due})]}),keyExtractor:(e,t)=>t.toString()})]}),(0,R.jsx)(_,{})]})})]})]})};var Q=n(22349);n(91087);const X=(0,a.createContext)(void 0),ee=()=>{const e=(0,a.useContext)(X);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},te=({children:e})=>{const[t,n]=(0,a.useState)("employee"),[o,r]=(0,a.useState)(""),[s,i]=(0,a.useState)(""),[l,d]=(0,a.useState)(!1);(0,a.useEffect)((()=>{(async()=>{try{{const e=localStorage.getItem("token"),t=localStorage.getItem("role"),o=localStorage.getItem("firstName"),a=localStorage.getItem("lastName");e&&t&&o&&a&&(d(!0),n(t),r(o),i(a))}}catch(e){console.error("Failed to load auth data",e)}})()}),[]);return(0,R.jsx)(X.Provider,{value:{userRole:t,firstName:o,lastName:s,setUserRole:n,setFirstName:r,setLastName:i,isAuthenticated:l,setIsAuthenticated:d,saveAuthData:async(e,t,n,o)=>{localStorage.setItem("token",o),localStorage.setItem("role",e),localStorage.setItem("firstName",t),localStorage.setItem("lastName",n)}},children:e})};var ne=n(40484);const oe=i.default.create({container:{flex:1,backgroundColor:"#FDFDFF"},contentContainer:{flexGrow:1,justifyContent:"center",alignItems:"center"},rowContainer:{flexDirection:"column",justifyContent:"center",height:"80%",width:"100%"},logoContainer:{flex:1,backgroundColor:"#FDFDFF",borderRadius:100,alignItems:"center",justifyContent:"center"},logo:{width:400,height:400},buttonsContainer:{flex:1,justifyContent:"center",alignItems:"center",paddingLeft:200,paddingRight:200,width:"100%"},secondaryButton:{borderRadius:5,padding:15,width:"100%",alignItems:"center",marginBottom:20},secondaryButtonText:{color:"#4A90E2",fontSize:18},mobileContainer:{alignItems:"center",justifyContent:"center",width:"90%"},welcomeText:{fontSize:40,fontWeight:"bold",color:"#393D3F",marginBottom:50,textAlign:"center",marginTop:"10%"},button:{width:"100%",padding:15,borderRadius:5,marginBottom:10,alignItems:"center"},buttonText:{color:"#fff",fontWeight:"bold",fontSize:18},buttonText1:{color:"#fff",fontSize:13,fontWeight:"bold"}}),ae=({navigation:e})=>(0,R.jsx)(u.default,{style:oe.container,contentContainerStyle:oe.contentContainer,children:(0,R.jsxs)(r.default,{style:oe.rowContainer,children:[(0,R.jsx)(r.default,{style:oe.logoContainer,children:(0,R.jsx)(ne.default,{source:n(47334),style:oe.logo})}),(0,R.jsxs)(r.default,{style:oe.buttonsContainer,children:[(0,R.jsx)(s.default,{style:oe.welcomeText,children:"WorkHive"}),(0,R.jsx)(h.default,{onPress:()=>e.navigate("Login"),style:[oe.button,{backgroundColor:"#4A90E2"}],children:(0,R.jsx)(s.default,{style:oe.buttonText,children:"Login"})}),(0,R.jsx)(h.default,{onPress:()=>e.navigate("PartialRegesterScreen"),style:[oe.secondaryButton],children:(0,R.jsx)(s.default,{style:oe.secondaryButtonText,children:"Register"})})]})]})});var re=n(44767),se=n(20530),ie=n(37709),le=n.n(ie);const de=j.default.create({baseURL:"https://workplace-zdzja.ondigitalocean.app/api/v1/auth/",headers:{"Content-Type":"application/json"}}),ce=async e=>{try{console.log("Request payload:",e);const t=await de.post("sendVerificationCode",e);return console.log(t),t.data}catch(t){if(t instanceof w.AxiosError){const e=t.response?.data;return new C(e.statusCode,{},e.message)}return new C(400,{},"Something went wrong")}},ue=async e=>{try{console.log("Request payload:",e);const t=await de.post("validateVerificationCode",e);return console.log(t.data.message),t.data}catch(t){if(t instanceof w.AxiosError){const e=t.response?.data;return new C(e.statusCode,{},e.message)}return new C(400,{},"Something went wrong")}},fe=async e=>{try{const t=await D("accessToken");return(await de.post("editCurrentUserDetail",e,{headers:{Authorization:`Bearer ${t}`}})).data}catch(t){if(t instanceof w.AxiosError){const e=t.response?.data;return new C(e.statusCode,{},e.message)}return new C(400,{},"Something went wrong")}},he={firstName:"",lastName:"",email:"",password:"",phoneNumber:"",inviteLink:""},ge=(0,a.createContext)({formData:he,updateFormData:()=>{}}),me=()=>(0,a.useContext)(ge),xe=({children:e})=>{const[t,n]=(0,a.useState)(he);return(0,R.jsx)(ge.Provider,{value:{formData:t,updateFormData:(e,t)=>{n((n=>Object.assign({},n,{[e]:t})))}},children:e})},{width:pe,height:ye}=f.default.get("window"),je=e=>/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e.toLocaleLowerCase()),we=i.default.create({container:{flex:1,justifyContent:"center",padding:20,backgroundColor:"#FDFDFF",marginTop:-140},rowContainer:{flexDirection:"column",justifyContent:"center",alignItems:"center",width:"100%",fontSize:30,maxWidth:1200},leftSide:{marginRight:0,alignItems:"flex-start",width:"30%",marginBottom:60},backButton:{padding:10,marginTop:30},formContainer:{width:"60%",alignItems:"center",justifyContent:"center"},input:{width:"100%",padding:15,borderWidth:2,borderColor:"#ccc",marginBottom:15,borderRadius:5},button:{backgroundColor:"#4A90E2",padding:15,borderRadius:5,width:"100%",alignItems:"center",marginTop:20,marginBottom:5},buttonText:{color:"#fff",fontSize:18},secondaryButton:{borderRadius:5,padding:15,width:"100%",alignItems:"center",marginBottom:20},secondaryButtonText:{color:"#4A90E2",fontSize:20},errorText:{color:"red",marginBottom:10,textAlign:"center"},footer:{flexDirection:"row",justifyContent:"center",marginTop:20},link:{color:"#007bff",textDecorationLine:"underline"}}),be=({navigation:e})=>{const[t,n]=(0,a.useState)(""),{updateFormData:o}=me();return(0,R.jsx)(re.default,{style:we.container,behavior:"height",children:(0,R.jsx)(l.default,{children:(0,R.jsx)(r.default,{style:[we.rowContainer,{flexDirection:"row"}],children:(0,R.jsxs)(r.default,{style:we.formContainer,children:[(0,R.jsx)(m.default,{autoFocus:!0,style:we.input,placeholder:"Email",value:t,onChangeText:n}),(0,R.jsx)(h.default,{onPress:()=>{t?je(t)?(o("email",t),e.navigate("SignupPhone")):P.default.show({text1:"Invalid Email Format",type:"error",position:"bottom"}):P.default.show({text1:"Email is Missing.",type:"error",position:"bottom"})},style:we.button,children:(0,R.jsx)(s.default,{style:we.buttonText,children:"Continue"})}),(0,R.jsxs)(r.default,{style:we.footer,children:[(0,R.jsx)(s.default,{children:"Already have an account? "}),(0,R.jsx)(h.default,{onPress:()=>e.navigate("Login"),children:(0,R.jsx)(s.default,{style:we.link,children:"Login"})})]})]})})})})},Ce=i.default.create({container:{flex:1,padding:20,justifyContent:"center",backgroundColor:"#FDFDFF"},contentContainer:{flexGrow:1,justifyContent:"center",alignItems:"center",paddingBottom:20,fontSize:16,flexDirection:"column"},welcomeContainer:{width:"40%",marginBottom:20,textAlign:"left"},welcomeText:{fontSize:30,fontWeight:"bold",color:"#393D3F",marginBottom:0},welcomeText2:{fontSize:30,color:"#393D3F",marginBottom:0},formContainer:{width:"100%",alignItems:"center",marginTop:"5%"},input:{width:"100%",padding:15,borderWidth:1,borderColor:"#ccc",marginBottom:15,borderRadius:5},passwordContainer:{width:"100%",position:"relative"},eyeIcon:{position:"absolute",right:20,top:15},button:{backgroundColor:"#4A90E2",padding:15,borderRadius:5,width:"100%",alignItems:"center",marginTop:20,marginBottom:30},buttonText:{color:"#fff",fontWeight:"bold"},socialLoginContainer:{width:"100%",alignItems:"center",marginBottom:20,flexDirection:"row",justifyContent:"center",gap:10},socialButton:{width:"15%",padding:10,borderRadius:5,backgroundColor:"#4A90E2",alignItems:"center",marginBottom:10,flexDirection:"row",justifyContent:"center"},appleButton:{backgroundColor:"#000000"},googleButton:{backgroundColor:"#DB4437"},orLoginText:{fontSize:16,fontWeight:"bold",color:"#393D3F",marginVertical:10},errorText:{color:"red",marginBottom:10},link:{color:"#007bff",textDecorationLine:"underline"},signupContainer:{flexDirection:"row"}}),Se=({navigation:e})=>{const{setUserRole:t,setIsAuthenticated:n}=ee(),[o,i]=(0,a.useState)("11111@gmail.com"),[l,d]=(0,a.useState)("Abcde1@345"),[c,u]=(0,a.useState)(""),[f,g]=(0,a.useState)(!1),[x,p]=(0,a.useState)(!1);return(0,R.jsxs)(re.default,{style:Ce.container,contentContainerStyle:Ce.contentContainer,children:[!x&&(0,R.jsxs)(r.default,{children:[(0,R.jsxs)(r.default,{style:Ce.welcomeContainer,children:[(0,R.jsx)(s.default,{style:Ce.welcomeText,children:"Welcome!"}),(0,R.jsx)(s.default,{style:Ce.welcomeText2,children:"Sign in to your account"})]}),(0,R.jsxs)(r.default,{style:Ce.formContainer,children:[(0,R.jsx)(m.default,{style:Ce.input,placeholder:"Enter your email",value:o,onChangeText:i}),(0,R.jsxs)(r.default,{style:Ce.passwordContainer,children:[(0,R.jsx)(m.default,{style:Ce.input,placeholder:"Enter your password",secureTextEntry:!f,value:l,onChangeText:d}),(0,R.jsx)(h.default,{onPress:()=>g(!f),style:Ce.eyeIcon,children:(0,R.jsx)(q.default,{name:f?"eye-off":"eye",size:24,color:"gray"})})]}),c&&(0,R.jsx)(s.default,{style:Ce.errorText,children:c}),(0,R.jsx)(h.default,{onPress:async()=>{try{if(!o||!l)return void u("Email and Password must be filled");if(!je(o))return void u("Please enter a valid email.");if(l.length<8)return void u("Password length should be at least 8 characters.");p(!0);const a=await(async(e,t)=>{try{return(await de.post("login",{email:e,password:t})).data}catch(c){if(j.default.isAxiosError(c)){const t=c.response?.status??500,n=c.response?.data?.message||"An unexpected error occurred";return new C(t,{},n)}return new C(400,{},"Something went wrong")}})(o,l);if(a instanceof C)return p(!1),409===a.statusCode&&e.navigate("PartialRegesterScreen"),P.default.show({type:"error",position:"bottom",text1:"Login Failed",text2:a.message||"Invalid credentials"}),void u(a.message||"Invalid credentials");if(!("statusCode"in a)||!("data"in a))return p(!1),P.default.show({type:"error",position:"bottom",text1:"Login Failed",text2:"Unexpected response from server"}),void u("Unexpected server response");const r=a.data?.accessToken??"",s=a.data?.refreshToken??"";if(!r)return p(!1),u("No access token received"),void P.default.show({type:"error",position:"bottom",text1:"Login Failed",text2:"Access token missing"});v("accessToken",r,T.WEB),v("refreshToken",s,T.WEB);const i=le().decode(r,null).role;if("employee"===i)return p(!1),u("Employees cannot log in from the web."),void P.default.show({type:"error",position:"bottom",text1:"Access Denied",text2:"Employees cannot log in from the web."});0,localStorage.setItem("token",r),localStorage.setItem("role",i),t(i),n(!0),"admin"===i?e.navigate("AdminDashboard"):"manager"===i?e.replace("ManagerDashboard"):"employee"===i&&e.reset({index:0,routes:[{name:"EmployeeDashboard"}]}),p(!1)}catch(a){p(!1),console.error("Error during login:",a),P.default.show({type:"error",position:"bottom",text1:"Unexpected Error",text2:a?.message||"Please try again later."}),u("Unexpected error. Please try again.")}},style:Ce.button,children:(0,R.jsx)(s.default,{style:Ce.buttonText,children:"Login"})}),(0,R.jsxs)(r.default,{style:Ce.signupContainer,children:[(0,R.jsx)(s.default,{children:"Have a invite code? "}),(0,R.jsx)(h.default,{onPress:()=>e.navigate("InviteCode"),children:(0,R.jsx)(s.default,{style:Ce.link,children:"Sign Up"})})]})]})]}),x&&(0,R.jsx)(se.default,{style:{flex:1,justifyContent:"center",alignContent:"center"}})]})};var Te=n(51690);const ve=i.default.create({container:{flex:1,backgroundColor:"#FDFDFF",padding:20},backButton:{padding:10,marginTop:30},contentContainer:{flex:1,justifyContent:"center",alignItems:"center",marginTop:50,flexGrow:1},title:{fontSize:30,fontWeight:"bold",color:"#393D3F",marginBottom:20,textAlign:"center"},input:{width:"80%",padding:15,borderWidth:1,borderColor:"#ccc",marginBottom:5,borderRadius:5,fontSize:16},submitButton:{backgroundColor:"#4A90E2",padding:15,borderRadius:5,width:"80%",alignItems:"center",marginTop:20,marginBottom:30},submitButtonText:{color:"white",fontSize:16,fontWeight:"bold"}}),De=({navigation:e})=>{const[t,n]=(0,a.useState)(""),{updateFormData:o}=me();return(0,R.jsxs)(re.default,{style:ve.container,behavior:"height",children:[(0,R.jsx)(h.default,{style:ve.backButton,onPress:()=>{e.goBack()},children:(0,R.jsx)(q.default,{name:"arrow-back",size:29,color:"black"})}),(0,R.jsxs)(r.default,{style:ve.contentContainer,children:[(0,R.jsx)(s.default,{style:ve.title,children:"Enter Invite Code"}),(0,R.jsx)(m.default,{autoFocus:!0,style:ve.input,placeholder:"Enter 8-character invite code",value:t,onChangeText:n,maxLength:8,keyboardType:"default"}),(0,R.jsx)(h.default,{style:ve.submitButton,onPress:async()=>{try{if(o("inviteLink",t),8!==t.length)Te.default.alert("Error","Invite code must be 8 characters long.");else{const n=await(async e=>{try{return await E.post("search",{},{params:{inviteCode:e}})}catch(t){if(t instanceof w.AxiosError){const e=t.response?.data;return new C(e.statusCode,{},e.message)}return new C(400,{},"Something went wrong")}})(t);n instanceof C?P.default.show({type:"error",text1:n.message,position:"bottom",swipeable:!1,bottomOffset:40}):(console.log(n.data.data.id),e.navigate("SearchedServer",{searchServer:n.data.data}))}}catch(n){P.default.show({type:"error",text1:"Something Went Wrong",position:"bottom"})}},children:(0,R.jsx)(s.default,{style:ve.submitButtonText,children:"Search"})})]})]})};var ke=n(58180);const Be=({navigation:e})=>(0,R.jsxs)(l.default,{style:Ie.container,children:[(0,R.jsxs)(r.default,{style:Ie.centeredView,children:[(0,R.jsx)(r.default,{style:Ie.imgContainer,children:(0,R.jsx)(ne.default,{source:n(47334),style:Ie.image})}),(0,R.jsx)(s.default,{style:Ie.serverTitle,children:"Fairy Tail"}),(0,R.jsx)(s.default,{style:Ie.inviteLink,children:"#11111111"})]}),(0,R.jsxs)(r.default,{style:Ie.buttonContainer,children:[(0,R.jsx)(h.default,{style:Ie.filledButton,onPress:()=>{e.navigate("Signup1")},children:(0,R.jsx)(s.default,{style:Ie.buttonText,children:"Create an Account"})}),(0,R.jsx)(ke.default,{title:"Cancel",onPress:()=>{e.goBack()}})]})]}),Ie=i.default.create({serverTitle:{fontSize:40,fontWeight:"bold",marginTop:10},container:{flex:1},centeredView:{flex:1,alignItems:"center"},inviteLink:{fontSize:20,color:"#808080"},imgContainer:{flex:.5,justifyContent:"center",alignItems:"center"},image:{width:200,height:200,borderRadius:100},buttonContainer:{width:"100%",paddingHorizontal:20,marginTop:30},filledButton:{backgroundColor:"#111",paddingVertical:15,borderRadius:5,marginBottom:15,alignItems:"center"},buttonText:{color:"#fff",fontSize:16}}),{width:Ee,height:ze}=f.default.get("window"),Ae=i.default.create({container:{flex:1,justifyContent:"center",padding:20,backgroundColor:"#FDFDFF",marginTop:-140},rowContainer:{flexDirection:"column",justifyContent:"center",alignItems:"center",width:"100%",fontSize:30,maxWidth:1200},leftSide:{marginRight:0,alignItems:"flex-start",width:"30%",marginBottom:60},backButton:{padding:10,marginTop:30},formContainer:{width:"60%",alignItems:"center",justifyContent:"center"},serverName:{fontSize:40,fontWeight:"bold",marginBottom:0,color:"#393D3F",textAlign:"left"},subTitle:{fontSize:20,marginBottom:10,color:"#393D3F"},input:{width:"100%",padding:15,borderWidth:2,borderColor:"#ccc",marginBottom:15,borderRadius:5},button:{backgroundColor:"#4A90E2",padding:15,borderRadius:5,width:"100%",alignItems:"center",marginTop:20,marginBottom:5},buttonText:{color:"#fff",fontSize:16},secondaryButton:{borderRadius:5,padding:15,width:"100%",alignItems:"center",marginBottom:20},secondaryButtonText:{color:"#4A90E2",fontSize:16},errorText:{color:"red",marginBottom:10,textAlign:"center"},footer:{flexDirection:"row",justifyContent:"center",marginTop:20},link:{color:"#007bff",textDecorationLine:"underline"}}),Pe=({navigation:e})=>{const[t,n]=(0,a.useState)(""),[o,i]=(0,a.useState)(""),{updateFormData:d}=me();return(0,R.jsx)(re.default,{style:Ae.container,behavior:"height",children:(0,R.jsx)(l.default,{children:(0,R.jsxs)(r.default,{style:[Ae.rowContainer,{flexDirection:"row"}],children:[(0,R.jsxs)(r.default,{style:Ae.leftSide,children:[(0,R.jsx)(s.default,{style:Ae.serverName,children:"Fairy Tail"}),(0,R.jsx)(s.default,{style:Ae.subTitle,children:"Sign up to create your account and start your journey!"})]}),(0,R.jsxs)(r.default,{style:Ae.formContainer,children:[(0,R.jsx)(m.default,{style:Ae.input,placeholder:"First Name",value:t,onChangeText:n}),(0,R.jsx)(m.default,{style:Ae.input,placeholder:"Last Name",value:o,onChangeText:i}),(0,R.jsx)(h.default,{onPress:()=>{t&&o?(d("firstName",t),d("lastName",o),e.navigate("Signup2")):P.default.show({text1:"Please fill all fields to continue.",type:"error",position:"bottom"})},style:Ae.button,children:(0,R.jsx)(s.default,{style:Ae.buttonText,children:"Continue"})}),(0,R.jsx)(h.default,{onPress:()=>{e.goBack()},style:Ae.secondaryButton,children:(0,R.jsx)(s.default,{style:Ae.secondaryButtonText,children:"Cancel"})})]})]})})})},{width:Re,height:We}=f.default.get("window"),Fe=i.default.create({container:{flex:1,justifyContent:"center",padding:20,backgroundColor:"#FDFDFF",marginTop:-140},rowContainer:{flexDirection:"column",justifyContent:"center",alignItems:"center",width:"100%",fontSize:30,maxWidth:1200},leftSide:{marginRight:0,alignItems:"flex-start",width:"30%",marginBottom:60},formContainer:{width:"60%",alignItems:"center",justifyContent:"center"},inputContainer:{alignItems:"center",marginBottom:15,flexDirection:"row"},countryCode:{flex:1,fontSize:16,marginBottom:15,padding:15,borderWidth:2,borderColor:"#ccc",marginRight:10,borderRadius:5},input:{flex:7,fontSize:16,width:"100%",padding:15,borderWidth:2,borderColor:"#ccc",marginBottom:15,borderRadius:5},verifyInput:{fontSize:16,width:"100%",padding:15,borderWidth:2,borderColor:"#ccc",marginBottom:15,borderRadius:5},headingText:{fontSize:18,fontWeight:"bold",color:"#ff",textAlign:"left",marginBottom:10},verificationText:{fontSize:16,color:"#888888",textAlign:"left",marginTop:5,marginBottom:10,padding:10},button:{backgroundColor:"#4A90E2",padding:15,borderRadius:5,width:"100%",alignItems:"center",marginTop:20,marginBottom:5},buttonText:{color:"#fff",fontSize:18},secondaryButton:{borderRadius:5,padding:15,width:"100%",alignItems:"center",marginBottom:20},secondaryButtonText:{color:"#4A90E2",fontSize:20},errorText:{color:"red",marginBottom:10,textAlign:"center"},footer:{flexDirection:"row",justifyContent:"center",marginTop:20},link:{color:"#007bff",textDecorationLine:"underline"}}),Le=({navigation:e})=>{const[t,n]=(0,a.useState)(""),[o,i]=(0,a.useState)(""),[d,c]=(0,a.useState)(!1),{updateFormData:u}=me();const f=async()=>{console.log("Pressed"),t?!function(e){if(e.startsWith("+61")||(e="+61"+e),12!=e.length)return!1;const t=Number.parseInt(e.slice(0));return console.log(t),!isNaN(t)}(t)?P.default.show({text1:"Phone Number is Invalid.",type:"error",position:"bottom"}):await g(t):P.default.show({text1:"Enter your phone number first",type:"error",position:"bottom"})},g=async e=>{try{e.startsWith("+61")||(e="+61"+e),console.log(e);const t=await ce({phoneNumber:e});t.success?(P.default.show({text1:"Verification Code Sent.",type:"success",position:"bottom"}),c(!0)):t instanceof C&&(console.log(t.message),P.default.show({text1:t.message,type:"error",position:"bottom"}))}catch(t){P.default.show({text1:"Something went wrong",type:"error",position:"bottom"})}},p=async n=>{try{n.startsWith("+61")||(n="+61"+n);const a=await ue({code:o,phoneNumber:n});a.success?(u("phoneNumber","+61"+t),c(!1),e.navigate("SignupPassword"),P.default.show({text1:a.message,type:"success",position:"bottom"})):a instanceof C&&Te.default.alert(a.message)}catch(a){P.default.show({text1:"Something went wrong",type:"error",position:"bottom"})}};return(0,R.jsxs)(r.default,{style:Fe.container,children:[(0,R.jsx)(re.default,{behavior:"height",children:(0,R.jsx)(l.default,{children:(0,R.jsx)(r.default,{style:[Fe.rowContainer,{flexDirection:"row"}],children:(0,R.jsxs)(r.default,{style:Fe.formContainer,children:[(0,R.jsxs)(r.default,{style:Fe.inputContainer,children:[(0,R.jsx)(m.default,{style:Fe.countryCode,value:"+61",disabled:!0,focusable:!1,editable:!1}),(0,R.jsx)(m.default,{maxLength:9,autoFocus:!0,style:Fe.input,placeholder:"Phone Number",value:t,onChangeText:n})]}),(0,R.jsx)(h.default,{onPress:()=>f(),style:Fe.button,children:(0,R.jsx)(s.default,{style:Fe.buttonText,children:"Continue"})}),(0,R.jsxs)(r.default,{style:Fe.footer,children:[(0,R.jsx)(s.default,{children:"Already have an account? "}),(0,R.jsx)(h.default,{onPress:()=>e.navigate("Login"),children:(0,R.jsx)(s.default,{style:Fe.link,children:"Login"})})]})]})})})}),(0,R.jsx)(x.default,{presentationStyle:"pageSheet",visible:d,animationType:"slide",onRequestClose:()=>{c(!d)},children:(0,R.jsx)(r.default,{style:Fe.container,children:(0,R.jsxs)(r.default,{style:Fe.formContainer,children:[(0,R.jsx)(s.default,{style:Fe.verificationText,children:"A 6 digit verification code has been sent to your phone."}),(0,R.jsx)(m.default,{maxLength:6,autoFocus:!0,style:Fe.verifyInput,placeholder:"6 Digit Code",value:o,onChangeText:i}),(0,R.jsx)(h.default,{onPress:()=>p(t),style:Fe.button,children:(0,R.jsx)(s.default,{style:Fe.buttonText,children:"Verify "})}),(0,R.jsxs)(r.default,{style:Fe.footer,children:[(0,R.jsx)(s.default,{children:"Didn't receive code? "}),(0,R.jsx)(h.default,{onPress:()=>{},children:(0,R.jsx)(s.default,{style:Fe.link,children:"Resend"})})]})]})})})]})},{width:Ne,height:Oe}=f.default.get("window"),He=i.default.create({container:{flex:1,justifyContent:"center",padding:20,backgroundColor:"#FDFDFF",marginTop:-140},rowContainer:{flexDirection:"column",justifyContent:"center",alignItems:"center",width:"100%",fontSize:30,maxWidth:1200},leftSide:{marginRight:0,alignItems:"flex-start",width:"30%",marginBottom:60},backButton:{padding:10,marginTop:30},formContainer:{width:"60%",alignItems:"center",justifyContent:"center"},input:{width:"100%",padding:15,borderWidth:2,borderColor:"#ccc",marginBottom:15,borderRadius:5},button:{backgroundColor:"#4A90E2",padding:15,borderRadius:5,width:"100%",alignItems:"center",marginTop:20,marginBottom:5},buttonText:{color:"#fff",fontSize:18},secondaryButton:{borderRadius:5,padding:15,width:"100%",alignItems:"center",marginBottom:20},secondaryButtonText:{color:"#4A90E2",fontSize:20},errorText:{color:"red",marginBottom:10,textAlign:"center"},footer:{flexDirection:"row",justifyContent:"center",marginTop:20},link:{color:"#007bff",textDecorationLine:"underline"}}),Me=({navigation:e})=>{const[t,n]=(0,a.useState)(""),[o,i]=(0,a.useState)(""),{updateFormData:d,formData:c}=me(),u=async()=>{try{if(t!==o)return void P.default.show({text1:"Both passwod must be same",type:"error",position:"bottom"});d("password",t);const n=await(async e=>{try{console.log("regster"),console.log("Request payload:",e);const t=await de.post("register",e);return console.log("Response received:",t),t.data}catch(t){if(t instanceof w.AxiosError){const e=t.response?.data;return new C(e.statusCode,{},e.message)}return new C(400,{},"Something went wrong")}})(c);n instanceof C||n instanceof w.AxiosError?(Te.default.alert(n.message),console.log(n)):(e.navigate("Login"),P.default.show({text1:n.message,type:"success",position:"bottom"}))}catch(n){console.error("Signup error:",n)}};return(0,R.jsx)(re.default,{style:He.container,behavior:"height",children:(0,R.jsx)(l.default,{children:(0,R.jsx)(r.default,{style:[He.rowContainer,{flexDirection:"row"}],children:(0,R.jsxs)(r.default,{style:He.formContainer,children:[(0,R.jsx)(m.default,{style:He.input,placeholder:"Password",value:t,onChangeText:n,secureTextEntry:!0}),(0,R.jsx)(m.default,{style:He.input,placeholder:"Confirm Password",value:o,onChangeText:i,secureTextEntry:!0}),(0,R.jsx)(h.default,{onPress:u,style:He.button,children:(0,R.jsx)(s.default,{style:He.buttonText,children:"Continue"})}),(0,R.jsxs)(r.default,{style:He.footer,children:[(0,R.jsx)(s.default,{children:"Already have an account? "}),(0,R.jsx)(h.default,{onPress:u,children:(0,R.jsx)(s.default,{style:He.link,children:"Login"})})]})]})})})})};var Ve=n(17366),Ue=n(19149);let $e=function(e){return e.ADMIN="admin",e.EMPLOYEE="employee",e.MANAGER="manager",e}({});const qe=["id","firstName","lastName","email","phone","role","status"],Ye=["Choose Role","Admin","Manager","Employee"],Ge=["Choose Employment Status","Active","Inactive"],_e={Admin:$e.ADMIN,Manager:$e.MANAGER,Employee:$e.EMPLOYEE},Ze={Active:{Active:"Active",Inactive:"Inactive"},Inactive:{Inactive:"Inactive",Active:"Active"}},Ke=i.default.create({roleBadgeWrapper:{alignItems:"center"},roleBadge:{paddingHorizontal:10,paddingVertical:4,borderRadius:20,color:"#fff",fontWeight:"600",textAlign:"center",overflow:"hidden",fontSize:13},adminBadge:{backgroundColor:"#8e44ad"},managerBadge:{backgroundColor:"#27ae60"},employeeBadge:{backgroundColor:"#2980b9"},container:{flex:1,flexDirection:"row"},mainContent:{flex:1,padding:20,marginTop:60},title:{fontSize:24,fontWeight:"bold",marginBottom:10},searchInput:{flex:1,borderWidth:1,borderColor:"#ccc",borderRadius:6,padding:10,marginRight:10},actionsRow:{flexDirection:"row",marginBottom:12,alignItems:"center"},addButton:{backgroundColor:"#4A90E2",paddingHorizontal:16,paddingVertical:10,borderRadius:6},table:{minWidth:1e3},tableHeader:{flexDirection:"row",backgroundColor:"#eee",paddingVertical:10,borderBottomWidth:1,borderColor:"#ccc"},row:{flexDirection:"row",paddingVertical:12,borderBottomWidth:1,borderColor:"#f0f0f0",alignItems:"center"},headerCell:{flex:1,fontWeight:"bold",paddingHorizontal:68,textAlign:"center"},cell:{flex:1,textAlign:"center"},actionButtons:{flex:1,flexDirection:"row",justifyContent:"space-evenly"},actionText:{color:"#4A90E2",textDecorationLine:"underline"},modalOverlay:{flex:1,backgroundColor:"#000000aa",justifyContent:"center",padding:20},modalContent:{backgroundColor:"#fff",padding:20,borderRadius:10},modalTitle:{fontSize:20,fontWeight:"bold",marginBottom:10},input:{borderWidth:1,borderColor:"#ccc",borderRadius:6,padding:10,marginBottom:10},modalActions:{flexDirection:"row",justifyContent:"flex-end",gap:10,marginTop:10},cancelBtn:{backgroundColor:"#888",paddingHorizontal:16,paddingVertical:10,borderRadius:6},saveBtn:{backgroundColor:"#4A90E2",paddingHorizontal:16,paddingVertical:10,borderRadius:6},reloadIcon:{marginLeft:10},avatarCell:{width:60,alignItems:"center",justifyContent:"center"},avatar:{width:36,height:36,borderRadius:18},initialsCircle:{width:36,height:36,borderRadius:18,backgroundColor:"#ccc",alignItems:"center",justifyContent:"center"},initialsText:{color:"#fff",fontWeight:"bold"},nameText:{fontWeight:"500"},nameCell:{flexDirection:"row",alignItems:"center",gap:10,paddingHorizontal:8}}),Je=()=>{const[e,t]=(0,a.useState)(!0),[n,o]=(0,a.useState)("EmployeeManagement"),[i,d]=(0,a.useState)(f.default.get("window").width),[c,g]=(0,a.useState)(""),[p,y]=(0,a.useState)([]),[j,b]=(0,a.useState)(!1),[S,k]=(0,a.useState)(null),[B,I]=(0,a.useState)({id:"",firstName:"",lastName:"",email:"",phone:"",role:"",status:""}),[W,F]=(0,a.useState)({}),[L,O]=(0,a.useState)(""),[M,V]=(0,a.useState)("asc"),U=i<=768,[$,q]=(0,a.useState)([]),[Y,G]=(0,a.useState)(null),_=async()=>{try{const e=await A();if(e instanceof C||e instanceof w.AxiosError)console.log(e.message),P.default.show({text1:"Error",text2:e.message,type:"error",position:"bottom"});else{const t=e.data.map((e=>({id:e.Employee.id,firstName:e.Employee.firstName,lastName:e.Employee.lastName,email:e.Employee.email,phone:e.Employee.phoneNumber,role:e.Employee.role.charAt(0).toUpperCase()+e.Employee.role.slice(1),status:"string"===typeof e.Employee.employmentStatus?e.Employee.employmentStatus:Object.keys(e.Employee.employmentStatus)[0],profileImage:e.Employee.profileImage??void 0,joinedDate:e.createdAt?new Date(e.createdAt).toLocaleDateString():"Unknown",updatedDate:e.updatedAt?new Date(e.updatedAt).toLocaleDateString():"Unknown"})));y(t),P.default.show({text1:"Successfully fetched all employees",type:"success",position:"bottom",autoHide:!0,swipeable:!0})}}catch(e){console.log("Unexpected error during fetchAllUsers()")}};(0,a.useEffect)((()=>{_()}),[]),(0,a.useEffect)((()=>{const e=f.default.addEventListener("change",(()=>d(f.default.get("window").width)));return()=>e?.remove()}),[]),(0,a.useEffect)((()=>{(async()=>{const e=await D("accessToken",T.WEB);console.log("Acess token:",e),console.log("--------------------------------------------------:",e);try{const e=await z(T.WEB);console.log("\ud83e\uddea getLoggedInUserServer response:",e),e instanceof C?P.default.show({type:"error",text1:"Server ID Error",text2:e.message}):"statusCode"in e&&"data"in e&&e.data.serverId?(console.log("\u2705 Server ID found:",e.data.serverId),G(e.data.serverId),v("serverId",e.data.serverId,T.WEB)):console.warn("\u26a0\ufe0f Server ID not found in response data")}catch(t){console.error("\u274c Unexpected error in fetchServerId:",t)}})()}),[]);const Z=[...p].sort(((e,t)=>{if(!qe.includes(L))return 0;const n=e[L]?.toString().toLowerCase()||"",o=t[L]?.toString().toLowerCase()||"";return n<o?"asc"===M?-1:1:n>o?"asc"===M?1:-1:0})).filter((e=>e.id.toLowerCase().includes(c.toLowerCase())||e.email.toLowerCase().includes(c.toLowerCase()))),K=p.filter((e=>"Active"===e.status)).length,J=p.filter((e=>"On Leave"===e.status)).length,Q=(p.filter((e=>"Terminated"===e.status)).length,async e=>{try{const t=await(async e=>{try{const t=await D("accessToken",T.WEB);return(await E.delete("kickEmployee",{params:{userId:e},headers:{Authorization:`Bearer ${t}`}})).data}catch(t){if(t instanceof w.AxiosError){const e=t.response?.data;return new C(e.statusCode,{},e.message)}return new C(400,{},"Something went wrong")}})(e);t instanceof C||t instanceof w.AxiosError?P.default.show({text1:"Error",text2:t.message,type:"error",position:"bottom"}):(P.default.show({text1:"Employee removed successfully",type:"success",position:"bottom"}),y((t=>t.filter((t=>t.id!==e)))))}catch(t){console.error("Unexpected error while kicking employee:",t)}}),X=(e,t)=>{I((n=>Object.assign({},n,{[e]:t})))},ee=e=>{switch(e.trim().toLowerCase()){case"admin":return Ke.adminBadge;case"manager":return Ke.managerBadge;case"employee":return Ke.employeeBadge;default:return{backgroundColor:"#999"}}};return(0,R.jsxs)(l.default,{style:Ke.container,children:[(0,R.jsx)(H,{isSidebarOpen:e,toggleSidebar:()=>t(!e)}),(0,R.jsx)(N,{isOpen:e,toggleSidebar:()=>t(!e),selectedTab:n,handleTabChange:o}),(0,R.jsxs)(r.default,{style:[Ke.mainContent,{marginLeft:U?0:e?250:0}],children:[(0,R.jsxs)(s.default,{style:Ke.title,children:["Employee Management",(0,R.jsx)(h.default,{onPress:_,style:Ke.reloadIcon,children:(0,R.jsx)(Ue.default,{name:"refresh",size:24,color:"#4A90E2"})})]}),(0,R.jsxs)(r.default,{style:{paddingHorizontal:20,marginTop:20},children:[(0,R.jsx)(s.default,{style:{fontSize:18,fontWeight:"bold",marginBottom:10},children:"Employee Status Summary"}),(0,R.jsxs)(r.default,{style:{flexDirection:"row",gap:20,marginBottom:20},children:[(0,R.jsxs)(s.default,{children:["\u2705 Active: ",K]}),(0,R.jsxs)(s.default,{children:["\ud83d\udfe1 Inactive: ",J]})]})]}),(0,R.jsxs)(r.default,{style:Ke.actionsRow,children:[(0,R.jsx)(m.default,{style:Ke.searchInput,placeholder:"Search by name, ID, or email",value:c,onChangeText:g}),(0,R.jsx)(h.default,{style:Ke.addButton,onPress:()=>{k(null),I({id:"",firstName:"",lastName:"",email:"",phone:"",role:"",status:""}),b(!0),F({})},children:(0,R.jsx)(s.default,{style:{color:"#fff"},children:"+ Add Employee"})})]}),(0,R.jsx)(u.default,{horizontal:!U,children:(0,R.jsxs)(r.default,{style:Ke.table,children:[(0,R.jsxs)(r.default,{style:Ke.tableHeader,children:[(0,R.jsx)(s.default,{style:Ke.headerCell,children:"ID"}),(0,R.jsx)(s.default,{style:Ke.headerCell,children:"NAME"}),(0,R.jsx)(s.default,{style:Ke.headerCell,children:"EMAIL"}),(0,R.jsx)(s.default,{style:Ke.headerCell,children:"PHONE"}),(0,R.jsx)(s.default,{style:Ke.headerCell,children:"ROLE"}),(0,R.jsx)(s.default,{style:Ke.headerCell,children:"STATUS"}),(0,R.jsx)(s.default,{style:Ke.headerCell,children:"JOINED DATE"}),(0,R.jsx)(s.default,{style:Ke.headerCell,children:"UPDATED DATE"}),(0,R.jsx)(s.default,{style:Ke.headerCell,children:"ACTIONS"})]}),Z.map(((e,t)=>(0,R.jsxs)(r.default,{style:Ke.row,children:[qe.map((t=>{return"firstName"===t?(0,R.jsxs)(r.default,{style:[Ke.cell,Ke.nameCell],children:[e.profileImage?(0,R.jsx)(ne.default,{source:{uri:e.profileImage},style:Ke.avatar}):(0,R.jsx)(r.default,{style:Ke.initialsCircle,children:(0,R.jsx)(s.default,{style:Ke.initialsText,children:(n=e.firstName+" "+e.lastName,n.split(" ").map((e=>e[0])).join("").toUpperCase())})}),(0,R.jsxs)(s.default,{style:Ke.nameText,children:[e.firstName," ",e.lastName]})]},"name"):"lastName"===t?null:"role"===t?(0,R.jsx)(r.default,{style:[Ke.cell,Ke.roleBadgeWrapper],children:(0,R.jsx)(s.default,{style:[Ke.roleBadge,ee(e.role)],children:e.role})},t):(0,R.jsx)(s.default,{style:Ke.cell,children:e[t]||"-"},t);var n})),(0,R.jsx)(s.default,{style:Ke.cell,children:e.joinedDate||"-"}),(0,R.jsx)(s.default,{style:Ke.cell,children:e.updatedDate||"-"}),(0,R.jsxs)(r.default,{style:Ke.actionButtons,children:[(0,R.jsx)(h.default,{onPress:()=>(e=>{k(e),I({id:e.id,firstName:e.firstName,lastName:e.lastName,email:e.email,phone:e.phone,role:e.role,status:e.status,joinedDate:e.joinedDate,updatedDate:e.updatedDate,profileImage:e.profileImage}),b(!0),F({})})(e),children:(0,R.jsx)(s.default,{style:Ke.actionText,children:"Edit"})}),(0,R.jsx)(h.default,{onPress:()=>Q(e.id),children:(0,R.jsx)(s.default,{style:[Ke.actionText,{color:"red"}],children:"Delete"})})]})]},t)))]})}),(0,R.jsx)(x.default,{visible:j,animationType:"slide",transparent:!0,children:(0,R.jsx)(r.default,{style:Ke.modalOverlay,children:(0,R.jsxs)(r.default,{style:Ke.modalContent,children:[(0,R.jsxs)(s.default,{style:Ke.modalTitle,children:[S?"Edit":"Add"," Employee"]}),qe.map((e=>"role"===e?(0,R.jsx)(Ve.Picker,{selectedValue:B.role,onValueChange:e=>X("role",e),style:Ke.input,children:Ye.map((e=>(0,R.jsx)(Ve.Picker.Item,{label:e,value:"Choose Role"===e?"":e},e)))},e):"status"===e?(0,R.jsx)(Ve.Picker,{selectedValue:B.status,onValueChange:e=>X("status",e),style:Ke.input,children:Ge.map((e=>(0,R.jsx)(Ve.Picker.Item,{label:e,value:"Choose Employment Status"===e?"":e},e)))},e):(0,R.jsxs)(r.default,{children:[(0,R.jsx)(m.default,{style:Ke.input,placeholder:e.charAt(0).toUpperCase()+e.slice(1),value:B[e],onChangeText:t=>X(e,t)}),W[e]&&(0,R.jsx)(s.default,{style:{color:"red",marginBottom:6},children:W[e]})]},e))),(0,R.jsxs)(r.default,{style:Ke.modalActions,children:[(0,R.jsx)(h.default,{onPress:()=>b(!1),style:Ke.cancelBtn,children:(0,R.jsx)(s.default,{style:{color:"#fff"},children:"Cancel"})}),(0,R.jsx)(h.default,{onPress:async()=>{if(!(()=>{const e={};var t,n;return qe.forEach((t=>{B[t]||(e[t]=`${t.charAt(0).toUpperCase()+t.slice(1)} is required`)})),""!==B.role&&"Choose Role"!==B.role||(e.role="Role is required"),""!==B.status&&"Choose Employment Status"!==B.status||(e.status="Employment status is required"),t=B.email,/^\S+@\S+\.\S+$/.test(t)||(e.email="Invalid email format"),n=B.phone,/^(\+614|614|04)\d{8}$/.test(n)||(e.phone="Phone must be 10 digits"),!S&&p.find((e=>e.id===B.id))&&(e.id="Employee ID must be unique"),F(e),0===Object.keys(e).length})())return;const e=B.role.trim();if(S)try{const e={id:B.id,firstName:B.firstName,lastName:B.lastName,phone:B.phone,email:B.email,role:_e[B.role],employmentStatus:Ze[B.status]},t=await(async e=>{try{const t=await D("accessToken",T.WEB);return(await E.put("updateEmployeeDetails",e,{headers:{Authorization:`Bearer ${t}`}})).data}catch(t){if(console.error("unexpected error in updateEmployeeDetails:",t),t instanceof w.AxiosError){const e=t.response?.data;return new C(e.statusCode,{},e.message)}return new C(400,{},"Something went wrong")}})(e);if(t instanceof C||t instanceof w.AxiosError)return void P.default.show({text1:"Error",text2:t.message,type:"error",position:"bottom"});await _(),P.default.show({text1:"Employee updated successfully!",type:"success",position:"bottom"})}catch(t){console.error("Unexpected error while updating employee:",t)}else{if(!Y)return void P.default.show({text1:"Error",text2:"Server ID not found. Please refresh the page.",type:"error",position:"bottom"});try{const n={serverId:Y,email:B.email,firstName:B.firstName,lastName:B.lastName,phone:B.phone,role:e},o=await(async e=>{try{const t=await D("accessToken",T.WEB);return(await E.post("partialRegestrationEmployee",e,{headers:{Authorization:`Bearer ${t}`},params:{serverId:e.serverId}})).data}catch(t){if(t instanceof w.AxiosError){const n=t.response?.data;return new C(n.statusCode,{},n.message)}return new C(400,{},"Something went wrong")}})(n);if(o instanceof C||o instanceof w.AxiosError)return void P.default.show({text1:"Error",text2:o.message,type:"error",position:"bottom"});await _(),P.default.show({text1:"Employee created successfully!",type:"success",position:"bottom"})}catch(t){console.error("Unexpected error while creating employee:",t)}}b(!1),k(null),I({id:"",firstName:"",lastName:"",email:"",phone:"",role:"",status:""}),F({})},style:Ke.saveBtn,children:(0,R.jsx)(s.default,{style:{color:"#fff"},children:"Save"})})]})]})})})]})]})};var Qe=n(79632);const Xe=[{employee:"Sabin",clockIn:"2025-03-28T09:00:00",clockOut:"2025-03-28T17:00:00",location:"Melbourne",expected:"Melbourne",lat:-37.8136,lng:144.9631},{employee:"Pranish",clockIn:"2025-03-27T09:15:00",clockOut:"2025-03-27T17:10:00",location:"Sydney",expected:"Melbourne",lat:-33.8688,lng:151.2093},{employee:"Aashish",clockIn:"2025-03-26T08:55:00",clockOut:"",location:"Melbourne",expected:"Melbourne",lat:-37.8136,lng:144.9631},{employee:"Pranish",clockIn:(new Date).toISOString(),clockOut:"",location:"Melbourne",expected:"Melbourne",lat:-37.8136,lng:144.9631}],et=i.default.create({container:{flex:1,flexDirection:"row"},mainContent:{flex:1,padding:20,marginTop:60},title:{fontSize:24,fontWeight:"bold",marginBottom:20},searchInput:{borderWidth:1,borderColor:"#ccc",borderRadius:6,padding:10,marginBottom:12},errorText:{color:"#D9534F",marginBottom:10,fontWeight:"bold"},table:{minWidth:800},mobileTable:{width:"100%"},tableHeader:{flexDirection:"row",backgroundColor:"#eee",paddingVertical:10,borderBottomWidth:1,borderColor:"#ccc"},row:{flexDirection:"row",paddingVertical:12,borderBottomWidth:1,borderColor:"#f0f0f0"},todayRow:{backgroundColor:"#e9f6ff"},headerCell:{flex:1,fontWeight:"bold",paddingHorizontal:8},cell:{flex:1,paddingHorizontal:8},errorStatus:{color:"#D9534F",fontWeight:"bold"},mapLink:{color:"#4A90E2",textDecorationLine:"underline"}}),tt=()=>{const[e,t]=(0,a.useState)(!0),[n,o]=(0,a.useState)("ClockInOut"),[i,d]=(0,a.useState)(f.default.get("window").width),[c,g]=(0,a.useState)(""),[x,p]=(0,a.useState)(""),[y,j]=(0,a.useState)(""),w=i<=768,b=(new Date).toISOString().slice(0,10);(0,a.useEffect)((()=>{const e=f.default.addEventListener("change",(()=>d(f.default.get("window").width)));return()=>e.remove()}),[]);const C=e=>e?new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"\u2014",S=e=>e?new Date(e).toISOString().slice(0,10):"\u2014",T=e=>/^\d{4}-\d{2}-\d{2}$/.test(e),v=Xe.filter((e=>{const t=e.employee.toLowerCase().includes(c.toLowerCase()),n=x&&T(x)?new Date(e.clockIn).toISOString().slice(0,10)===x:!x;return t&&n}));return(0,R.jsxs)(l.default,{style:et.container,children:[(0,R.jsx)(H,{isSidebarOpen:e,toggleSidebar:()=>t(!e)}),(0,R.jsx)(N,{isOpen:e,toggleSidebar:()=>t(!e),selectedTab:n,handleTabChange:o}),(0,R.jsxs)(r.default,{style:[et.mainContent,{marginLeft:w?0:e?250:0}],children:[(0,R.jsx)(s.default,{style:et.title,children:"Clock In/Out Records"}),(0,R.jsx)(m.default,{style:et.searchInput,placeholder:"Search employee...",value:c,onChangeText:g}),(0,R.jsx)(m.default,{style:et.searchInput,placeholder:"Filter by date (YYYY-MM-DD)",value:x,onChangeText:e=>{p(e),j(T(e)||""===e?"":"Invalid format. Use YYYY-MM-DD")}}),""!==y&&(0,R.jsx)(s.default,{style:et.errorText,children:y}),(0,R.jsx)(u.default,{horizontal:!w,children:(0,R.jsxs)(r.default,{style:[et.table,w&&et.mobileTable],children:[(0,R.jsxs)(r.default,{style:et.tableHeader,children:[(0,R.jsx)(s.default,{style:et.headerCell,children:"Date"}),(0,R.jsx)(s.default,{style:et.headerCell,children:"Employee"}),(0,R.jsx)(s.default,{style:et.headerCell,children:"Clock In"}),(0,R.jsx)(s.default,{style:et.headerCell,children:"Clock Out"}),(0,R.jsx)(s.default,{style:et.headerCell,children:"Location"}),(0,R.jsx)(s.default,{style:et.headerCell,children:"Expected"}),(0,R.jsx)(s.default,{style:et.headerCell,children:"Status"}),(0,R.jsx)(s.default,{style:et.headerCell,children:"Map"})]}),v.map(((e,t)=>{const n=e.location===e.expected,o=e.clockOut?n?"\u2705 Verified":"\u274c Wrong Place":"\ud83d\udd52 Working",a=S(e.clockIn)===b;return(0,R.jsxs)(r.default,{style:[et.row,a&&et.todayRow],children:[(0,R.jsx)(s.default,{style:et.cell,children:S(e.clockIn)}),(0,R.jsx)(s.default,{style:et.cell,children:e.employee}),(0,R.jsx)(s.default,{style:et.cell,children:C(e.clockIn)}),(0,R.jsx)(s.default,{style:et.cell,children:C(e.clockOut)}),(0,R.jsx)(s.default,{style:et.cell,children:e.location}),(0,R.jsx)(s.default,{style:et.cell,children:e.expected}),(0,R.jsx)(s.default,{style:[et.cell,o.includes("\u274c")&&et.errorStatus],children:o}),(0,R.jsx)(h.default,{onPress:()=>((e,t)=>{const n=`https://www.google.com/maps?q=${e},${t}`;Qe.default.openURL(n)})(e.lat,e.lng),children:(0,R.jsx)(s.default,{style:[et.cell,et.mapLink],children:"\ud83d\uddfa\ufe0f View"})})]},t)}))]})})]})]})};var nt=n(94932),ot=n(49153);const at=i.default.create({container:{flex:1,flexDirection:"row"},scrollWrapper:Object.assign({flex:1,height:"100%"},{overflowY:"scroll"}),scrollView:{flex:1},scrollContent:{flexGrow:1,paddingBottom:100},mainContent:{padding:20},title:{fontSize:24,fontWeight:"bold",marginBottom:20,marginTop:40},section:{marginBottom:30},sectionTitleRow:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:10},sectionTitle:{fontSize:18,fontWeight:"bold"},input:{borderWidth:1,borderColor:"#ccc",borderRadius:6,padding:10,marginBottom:10},preferenceRow:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:10},link:{color:"#4A90E2",textDecorationLine:"underline",marginBottom:8},logoutBtn:{backgroundColor:"#D9534F",paddingVertical:12,borderRadius:6,marginTop:20,alignItems:"center"},logoutText:{color:"#fff",fontWeight:"600",fontSize:16},saveBtn:{backgroundColor:"#4A90E2",borderRadius:6,paddingVertical:10,alignItems:"center",marginTop:10,marginBottom:10},saveText:{color:"#fff",fontWeight:"600"}}),rt=()=>{const[e,t]=(0,a.useState)(!0),[n,o]=(0,a.useState)("Settings"),[i,d]=(0,a.useState)(f.default.get("window").width),[c,g]=(0,a.useState)(!1),[x,y]=(0,a.useState)(!0),[j,w]=(0,a.useState)({Profile:!0,Preferences:!0,"Company Info":!0,"App Configuration":!0,"Leave & Attendance Rules":!0,Support:!0}),b=i<=768;(0,a.useEffect)((()=>{const e=f.default.addEventListener("change",(()=>d(f.default.get("window").width)));return()=>e.remove()}),[]);return(0,R.jsxs)(l.default,{style:at.container,children:[(0,R.jsx)(H,{isSidebarOpen:e,toggleSidebar:()=>t(!e)}),(0,R.jsx)(N,{isOpen:e,toggleSidebar:()=>t(!e),selectedTab:n,handleTabChange:o}),(0,R.jsx)(r.default,{style:[at.scrollWrapper,{marginLeft:b?0:e?250:0}],children:(0,R.jsx)(u.default,{style:at.scrollView,contentContainerStyle:at.scrollContent,showsVerticalScrollIndicator:!0,children:(0,R.jsxs)(r.default,{style:at.mainContent,children:[(0,R.jsx)(s.default,{style:at.title,children:"Settings"}),[{title:"Profile",content:(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(m.default,{style:at.input,placeholder:"Name"}),(0,R.jsx)(m.default,{style:at.input,placeholder:"Email"}),(0,R.jsx)(m.default,{style:at.input,placeholder:"Phone"}),(0,R.jsx)(m.default,{style:at.input,placeholder:"Change Password",secureTextEntry:!0}),(0,R.jsx)(h.default,{style:at.saveBtn,children:(0,R.jsx)(s.default,{style:at.saveText,children:"Save"})})]})},{title:"Preferences",content:(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)(r.default,{style:at.preferenceRow,children:[(0,R.jsx)(s.default,{children:"Dark Mode"}),(0,R.jsx)(p.default,{value:c,onValueChange:g})]}),(0,R.jsxs)(r.default,{style:at.preferenceRow,children:[(0,R.jsx)(s.default,{children:"Notifications"}),(0,R.jsx)(p.default,{value:x,onValueChange:y})]}),(0,R.jsx)(h.default,{style:at.saveBtn,children:(0,R.jsx)(s.default,{style:at.saveText,children:"Save"})})]})},{title:"Company Info",content:(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(m.default,{style:at.input,placeholder:"Company Name"}),(0,R.jsx)(m.default,{style:at.input,placeholder:"ABN"}),(0,R.jsx)(m.default,{style:at.input,placeholder:"Business Address"}),(0,R.jsx)(m.default,{style:at.input,placeholder:"Support Email"}),(0,R.jsx)(h.default,{style:at.saveBtn,children:(0,R.jsx)(s.default,{style:at.saveText,children:"Save"})})]})},{title:"App Configuration",content:(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(m.default,{style:at.input,placeholder:"App Version"}),(0,R.jsx)(m.default,{style:at.input,placeholder:"Default Timezone"}),(0,R.jsx)(h.default,{style:at.saveBtn,children:(0,R.jsx)(s.default,{style:at.saveText,children:"Save"})})]})},{title:"Leave & Attendance Rules",content:(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(m.default,{style:at.input,placeholder:"Max Leave Days per Year",keyboardType:"numeric"}),(0,R.jsx)(m.default,{style:at.input,placeholder:"Attendance Tolerance (minutes)",keyboardType:"numeric"}),(0,R.jsx)(h.default,{style:at.saveBtn,children:(0,R.jsx)(s.default,{style:at.saveText,children:"Save"})})]})},{title:"Support",content:(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(h.default,{children:(0,R.jsx)(s.default,{style:at.link,children:"Privacy Policy"})}),(0,R.jsx)(h.default,{children:(0,R.jsx)(s.default,{style:at.link,children:"Terms & Conditions"})}),(0,R.jsx)(h.default,{children:(0,R.jsx)(s.default,{style:at.link,children:"Contact Us"})})]})}].map((e=>(0,R.jsxs)(r.default,{style:at.section,children:[(0,R.jsxs)(h.default,{style:at.sectionTitleRow,onPress:()=>(e=>{w((t=>Object.assign({},t,{[e]:!t[e]})))})(e.title),children:[(0,R.jsx)(s.default,{style:at.sectionTitle,children:e.title}),j[e.title]?(0,R.jsx)(nt.default,{size:18}):(0,R.jsx)(ot.default,{size:18})]}),!j[e.title]&&e.content]},e.title))),(0,R.jsx)(h.default,{style:at.logoutBtn,children:(0,R.jsx)(s.default,{style:at.logoutText,children:"Logout"})})]})})})]})};var st=n(36261);const it="Fortnightly",lt=[{id:"PAY001",employeeId:"EMP001",employeeName:"Sabin",payPeriodStart:"2024-04-01",payPeriodEnd:"2024-04-07",payFrequency:it,hoursWorked:38,hourlyRate:30,bonuses:100,deductions:50,grossPay:1190,netPay:1140,status:"Pending"},{id:"PAY002",employeeId:"EMP002",employeeName:"Pranish",payPeriodStart:"2024-04-01",payPeriodEnd:"2024-04-07",payFrequency:it,hoursWorked:40,hourlyRate:28,bonuses:0,deductions:30,grossPay:1150,netPay:1120,status:"Approved"}],dt=i.default.create({container:{flex:1,flexDirection:"row"},mainContent:{flex:1,padding:20,marginTop:60},title:{fontSize:24,fontWeight:"bold",marginBottom:10},chartTitle:{fontSize:18,fontWeight:"600",marginTop:20},addButton:{backgroundColor:"#4A90E2",padding:10,borderRadius:6,alignSelf:"flex-start",marginBottom:10},input:{borderWidth:1,borderColor:"#ccc",padding:10,borderRadius:6,marginBottom:10},inputLabel:{fontWeight:"bold",marginBottom:5},table:{minWidth:1100},tableHeader:{flexDirection:"row",backgroundColor:"#eee",paddingVertical:10,borderBottomWidth:1,borderColor:"#ccc"},row:{flexDirection:"row",paddingVertical:12,borderBottomWidth:1,borderColor:"#eee"},headerCell:{flex:1,fontWeight:"bold",textAlign:"center"},cell:{flex:1,textAlign:"center"}}),ct=()=>{const[e,t]=(0,a.useState)(!0),[n,o]=(0,a.useState)("GrossPaymentScreen"),[i,d]=(0,a.useState)(lt),[c,g]=(0,a.useState)(!1),[p,y]=(0,a.useState)(null),[j,w]=(0,a.useState)(it),[b,C]=(0,a.useState)(""),S=(e,t)=>{y((n=>n?Object.assign({},n,{[e]:t}):null))},T=e=>{switch(e){case"Approved":return{backgroundColor:"#27ae60",color:"white",padding:4,borderRadius:4};case"Paid":return{backgroundColor:"#2980b9",color:"white",padding:4,borderRadius:4};default:return{backgroundColor:"#f39c12",color:"white",padding:4,borderRadius:4}}},v=i.filter((e=>e.employeeName.toLowerCase().includes(b.toLowerCase())||e.id.toLowerCase().includes(b.toLowerCase())));return(0,R.jsxs)(l.default,{style:dt.container,children:[(0,R.jsx)(H,{isSidebarOpen:e,toggleSidebar:()=>t(!e)}),(0,R.jsx)(N,{isOpen:e,toggleSidebar:()=>t(!e),selectedTab:n,handleTabChange:o}),(0,R.jsxs)(r.default,{style:[dt.mainContent,{marginLeft:e?250:0}],children:[(0,R.jsx)(s.default,{style:dt.title,children:"Gross Payments"}),(0,R.jsx)(m.default,{style:dt.input,placeholder:"Search by Employee Name or ID",value:b,onChangeText:C}),(0,R.jsxs)(r.default,{style:{flexDirection:"row",alignItems:"center",marginBottom:10},children:[(0,R.jsx)(s.default,{style:{marginRight:10},children:"Pay Frequency:"}),(0,R.jsx)(Ve.Picker,{selectedValue:j,onValueChange:e=>w(e),style:{flex:1},children:["Weekly","Fortnightly","Monthly"].map((e=>(0,R.jsx)(Ve.Picker.Item,{label:e,value:e},e)))})]}),(0,R.jsx)(u.default,{horizontal:!0,children:(0,R.jsxs)(r.default,{style:dt.table,children:[(0,R.jsx)(r.default,{style:dt.tableHeader,children:["ID","Name","Pay Period","Freq","Hours","Rate","Bonus","Tax","Gross","Net","Status","Actions"].map((e=>(0,R.jsx)(s.default,{style:dt.headerCell,children:e},e)))}),v.map((e=>(0,R.jsxs)(r.default,{style:dt.row,children:[(0,R.jsx)(s.default,{style:dt.cell,children:e.id}),(0,R.jsx)(s.default,{style:dt.cell,children:e.employeeName}),(0,R.jsx)(s.default,{style:dt.cell,children:`${e.payPeriodStart} - ${e.payPeriodEnd}`}),(0,R.jsx)(s.default,{style:dt.cell,children:e.payFrequency}),(0,R.jsx)(s.default,{style:dt.cell,children:e.hoursWorked}),(0,R.jsxs)(s.default,{style:dt.cell,children:["$",e.hourlyRate]}),(0,R.jsxs)(s.default,{style:dt.cell,children:["$",e.bonuses??0]}),(0,R.jsxs)(s.default,{style:dt.cell,children:["$",e.deductions??0]}),(0,R.jsxs)(s.default,{style:dt.cell,children:["$",e.grossPay]}),(0,R.jsxs)(s.default,{style:dt.cell,children:["$",e.netPay]}),(0,R.jsx)(s.default,{style:[dt.cell,T(e.status)],children:e.status}),(0,R.jsxs)(r.default,{style:dt.cell,children:[(0,R.jsx)(h.default,{onPress:()=>(y(e),void g(!0)),children:(0,R.jsx)(s.default,{children:"Edit"})}),(0,R.jsx)(h.default,{onPress:()=>{return t=e.id,void Te.default.alert("Confirm Delete","Delete this payment?",[{text:"Cancel",style:"cancel"},{text:"Delete",style:"destructive",onPress:()=>{d((e=>e.filter((e=>e.id!==t))))}}]);var t},children:(0,R.jsx)(s.default,{style:{color:"red"},children:"Delete"})})]})]},e.id)))]})}),(0,R.jsx)(s.default,{style:{marginTop:10,fontStyle:"italic",fontSize:12,color:"gray"},children:"*Note: Tax calculations are approximate and for demonstration purposes only."}),(0,R.jsx)(s.default,{style:dt.chartTitle,children:"Salary Insights"}),(0,R.jsx)(st.BarChart,{data:{labels:v.map((e=>e.employeeName)),datasets:[{data:v.map((e=>e.netPay))}]},width:f.default.get("window").width-40,height:220,yAxisLabel:"$",yAxisSuffix:"",chartConfig:{backgroundColor:"#f7f7f7",backgroundGradientFrom:"#f7f7f7",backgroundGradientTo:"#f7f7f7",decimalPlaces:2,color:()=>"#4A90E2",labelColor:()=>"#333"},style:{marginTop:20,borderRadius:10}}),(0,R.jsx)(x.default,{visible:c,animationType:"slide",transparent:!0,children:(0,R.jsx)(r.default,{style:{flex:1,backgroundColor:"#00000099",justifyContent:"center",padding:20},children:(0,R.jsxs)(r.default,{style:{backgroundColor:"white",padding:20,borderRadius:10},children:[(0,R.jsx)(s.default,{style:{fontWeight:"bold",fontSize:18,marginBottom:10},children:"Edit Hourly Rate"}),p&&(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)(s.default,{style:dt.inputLabel,children:["Employee: ",p.employeeName]}),(0,R.jsxs)(s.default,{style:dt.inputLabel,children:["Hours Worked: ",p.hoursWorked]}),(0,R.jsxs)(s.default,{style:dt.inputLabel,children:["Bonuses: $",p.bonuses??0]}),(0,R.jsxs)(s.default,{style:dt.inputLabel,children:["Tax Deduction: $",p.deductions??0]}),(0,R.jsx)(m.default,{style:dt.input,placeholder:"Hourly Rate",keyboardType:"numeric",value:p.hourlyRate.toString(),onChangeText:e=>S("hourlyRate",parseFloat(e)||0)}),(0,R.jsx)(Ve.Picker,{selectedValue:p.status,onValueChange:e=>S("status",e),children:["Pending","Approved","Paid"].map((e=>(0,R.jsx)(Ve.Picker.Item,{label:e,value:e},e)))}),(0,R.jsxs)(r.default,{style:{flexDirection:"row",justifyContent:"flex-end",marginTop:10},children:[(0,R.jsx)(h.default,{onPress:()=>g(!1),style:[dt.addButton,{backgroundColor:"#aaa",marginRight:10}],children:(0,R.jsx)(s.default,{style:{color:"#fff"},children:"Cancel"})}),(0,R.jsx)(h.default,{onPress:()=>{if(!p)return;const e=p.hoursWorked*p.hourlyRate+(p.bonuses||0),t=(n=e)<=300?0:n<=500?.1*n:n<=800?.15*n:n<=1200?.2*n:.25*n;var n;const o=e-t,a=Object.assign({},p,{payFrequency:j,grossPay:e,deductions:t,netPay:o});d((e=>{const t=e.findIndex((e=>e.id===a.id));if(-1!==t){const n=[...e];return n[t]=a,n}return[...e,a]})),g(!1),y(null)},style:dt.addButton,children:(0,R.jsx)(s.default,{style:{color:"#fff"},children:"Save"})})]})]})]})})})]})]})},ut=[{id:"LEAVE001",employeeId:"EMP001",employeeName:"Sabin",leaveType:"Annual Leave",startDate:"2024-04-10",endDate:"2024-04-15",reason:"Family trip",status:"Pending",balance:10,totalDays:5,history:[],adminComment:""},{id:"LEAVE002",employeeId:"EMP002",employeeName:"Pranish",leaveType:"Sick Leave",startDate:"2024-04-05",endDate:"2024-04-06",reason:"Fever",status:"Approved",balance:6,totalDays:2,history:[],adminComment:""}],ft=i.default.create({container:{flex:1,flexDirection:"row"},mainContent:{flex:1,padding:20,marginTop:60},title:{fontSize:24,fontWeight:"bold",marginBottom:10},input:{borderWidth:1,borderColor:"#ccc",padding:10,borderRadius:6,marginBottom:10},table:{minWidth:1200},tableHeader:{flexDirection:"row",backgroundColor:"#eee",paddingVertical:10,borderBottomWidth:1,borderColor:"#ccc"},row:{flexDirection:"row",paddingVertical:12,borderBottomWidth:1,borderColor:"#eee"},headerCell:{flex:1,fontWeight:"bold",textAlign:"center"},cell:{flex:1,textAlign:"center"},pending:{backgroundColor:"#f39c12",color:"white",padding:4,borderRadius:4},approved:{backgroundColor:"#2ecc71",color:"white",padding:4,borderRadius:4},rejected:{backgroundColor:"#e74c3c",color:"white",padding:4,borderRadius:4}}),ht=()=>{const[e,t]=(0,a.useState)(!0),[n,o]=(0,a.useState)("LeaveRequestScreen"),[i,d]=(0,a.useState)(ut),[c,f]=(0,a.useState)(""),[g,p]=(0,a.useState)(!1),[y,j]=(0,a.useState)(null),[w,b]=(0,a.useState)(""),[C,S]=(0,a.useState)(null),[T,v]=(0,a.useState)(!1),[D,k]=(0,a.useState)(null),B=(e,t)=>{j(e),S(t),p(!0)},I=i.filter((e=>e.employeeName.toLowerCase().includes(c.toLowerCase())||e.id.toLowerCase().includes(c.toLowerCase())));return(0,R.jsxs)(l.default,{style:ft.container,children:[(0,R.jsx)(H,{isSidebarOpen:e,toggleSidebar:()=>t(!e)}),(0,R.jsx)(N,{isOpen:e,toggleSidebar:()=>t(!e),selectedTab:n,handleTabChange:o}),(0,R.jsxs)(r.default,{style:[ft.mainContent,{marginLeft:e?250:0}],children:[(0,R.jsx)(s.default,{style:ft.title,children:"Leave Requests"}),(0,R.jsx)(m.default,{style:ft.input,placeholder:"Search by Employee Name or Request ID",value:c,onChangeText:f}),(0,R.jsx)(u.default,{horizontal:!0,children:(0,R.jsxs)(r.default,{style:ft.table,children:[(0,R.jsx)(r.default,{style:ft.tableHeader,children:["ID","Name","Leave Type","Dates","Days","Reason","Balance","Status","Admin Comment","Actions"].map((e=>(0,R.jsx)(s.default,{style:ft.headerCell,children:e},e)))}),I.map((e=>(0,R.jsxs)(r.default,{style:ft.row,children:[(0,R.jsx)(s.default,{style:ft.cell,children:e.id}),(0,R.jsx)(s.default,{style:ft.cell,children:e.employeeName}),(0,R.jsx)(s.default,{style:ft.cell,children:e.leaveType}),(0,R.jsx)(s.default,{style:ft.cell,children:`${e.startDate} - ${e.endDate}`}),(0,R.jsx)(s.default,{style:ft.cell,children:e.totalDays}),(0,R.jsx)(s.default,{style:ft.cell,children:e.reason}),(0,R.jsx)(s.default,{style:ft.cell,children:e.balance}),(0,R.jsx)(s.default,{style:[ft.cell,ft[e.status.toLowerCase()]],children:e.status}),(0,R.jsx)(s.default,{style:ft.cell,children:e.adminComment||"-"}),(0,R.jsx)(r.default,{style:ft.cell,children:"Pending"===e.status?(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(h.default,{onPress:()=>B(e.id,"Approved"),children:(0,R.jsx)(s.default,{style:{color:"green"},children:"Approve"})}),(0,R.jsx)(h.default,{onPress:()=>B(e.id,"Rejected"),children:(0,R.jsx)(s.default,{style:{color:"red"},children:"Reject"})})]}):(0,R.jsx)(h.default,{onPress:()=>{var t;(t=e.history)&&t.length>0?(k(t),v(!0)):Te.default.alert("No history found for this request.")},children:(0,R.jsx)(s.default,{style:{color:"#4A90E2"},children:"View History"})})})]},e.id)))]})})]}),(0,R.jsx)(x.default,{visible:g,transparent:!0,animationType:"slide",children:(0,R.jsx)(r.default,{style:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"#000000aa"},children:(0,R.jsxs)(r.default,{style:{backgroundColor:"#fff",padding:20,borderRadius:8,width:"90%"},children:[(0,R.jsx)(s.default,{style:{fontSize:18,fontWeight:"bold",marginBottom:10},children:"Add Admin Comment"}),(0,R.jsx)(m.default,{placeholder:"Enter comment...",value:w,onChangeText:b,style:{borderWidth:1,borderColor:"#ccc",borderRadius:6,padding:10,height:80,marginBottom:10},multiline:!0}),(0,R.jsxs)(r.default,{style:{flexDirection:"row",justifyContent:"flex-end"},children:[(0,R.jsx)(h.default,{onPress:()=>p(!1),style:{marginRight:10},children:(0,R.jsx)(s.default,{style:{color:"red"},children:"Cancel"})}),(0,R.jsx)(h.default,{onPress:()=>{y&&C&&(d((e=>e.map((e=>{if(e.id===y){const t=Object.assign({},e);return Object.assign({},e,{status:C,adminComment:w,history:[...e.history||[],t]})}return e})))),p(!1),b(""),j(null),S(null))},children:(0,R.jsx)(s.default,{style:{color:"green"},children:"Submit"})})]})]})})}),(0,R.jsx)(x.default,{visible:T,transparent:!0,animationType:"slide",children:(0,R.jsx)(r.default,{style:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"#000000aa"},children:(0,R.jsxs)(r.default,{style:{backgroundColor:"#fff",padding:20,borderRadius:8,width:"90%",maxHeight:"80%"},children:[(0,R.jsx)(s.default,{style:{fontSize:18,fontWeight:"bold",marginBottom:10},children:"Leave History"}),(0,R.jsx)(u.default,{children:D?.map(((e,t)=>(0,R.jsxs)(r.default,{style:{marginBottom:10},children:[(0,R.jsxs)(s.default,{children:[(0,R.jsx)(s.default,{style:{fontWeight:"bold"},children:"Type:"})," ",e.leaveType]}),(0,R.jsxs)(s.default,{children:[(0,R.jsx)(s.default,{style:{fontWeight:"bold"},children:"Dates:"})," ",e.startDate," - ",e.endDate]}),(0,R.jsxs)(s.default,{children:[(0,R.jsx)(s.default,{style:{fontWeight:"bold"},children:"Days:"})," ",e.totalDays]}),(0,R.jsxs)(s.default,{children:[(0,R.jsx)(s.default,{style:{fontWeight:"bold"},children:"Status:"})," ",e.status]}),(0,R.jsxs)(s.default,{children:[(0,R.jsx)(s.default,{style:{fontWeight:"bold"},children:"Comment:"})," ",e.adminComment||"-"]})]},t)))||(0,R.jsx)(s.default,{children:"No history available."})}),(0,R.jsx)(h.default,{onPress:()=>v(!1),style:{marginTop:10},children:(0,R.jsx)(s.default,{style:{color:"red",textAlign:"right"},children:"Close"})})]})})})]})},gt={Sabin:"#4A90E2",Pranish:"#2ECC71",Aashish:"#E67E22"},mt=i.default.create({scrollContainer:{paddingBottom:20},weekRow:{flexDirection:"row",backgroundColor:"#f0f0f0"},weekdayHeader:{flex:1,padding:8,textAlign:"center",fontWeight:"600",color:"#333"},grid:{flexDirection:"row",flexWrap:"wrap"},cell:{width:100/7+"%",borderWidth:.5,borderColor:"#ccc",padding:4,minHeight:80},outsideMonth:{backgroundColor:"#f9f9f9"},dayNumber:{fontSize:12,fontWeight:"600",color:"#333"},shiftBlock:{marginTop:4,paddingVertical:2,paddingHorizontal:4,borderRadius:4},shiftText:{fontSize:10,color:"#fff",fontWeight:"500"}}),xt=({currentDate:e,schedules:t,onCellPress:n,onShiftPress:o})=>{const a=(()=>{const t=(e=>{const t=new Date(e.getFullYear(),e.getMonth(),1),n=t.getDay();return t.setDate(t.getDate()-n),t})(e),n=[];for(let e=0;e<42;e++){const o=new Date(t);o.setDate(t.getDate()+e),n.push(o)}return n})();return(0,R.jsxs)(u.default,{contentContainerStyle:mt.scrollContainer,children:[(0,R.jsx)(r.default,{style:mt.weekRow,children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map((e=>(0,R.jsx)(s.default,{style:mt.weekdayHeader,children:e},e)))}),(0,R.jsx)(r.default,{style:mt.grid,children:a.map(((a,r)=>{const i=a.getMonth()===e.getMonth(),l=a.getDate().toString(),d=(c=a,t.filter((e=>{const t=new Date(e.start).toDateString();return new Date(c).toDateString()===t})));var c;return(0,R.jsxs)(h.default,{style:[mt.cell,!i&&mt.outsideMonth],onPress:()=>n("",a.toISOString().split("T")[0]),children:[(0,R.jsx)(s.default,{style:mt.dayNumber,children:l}),d.map((e=>(0,R.jsxs)(h.default,{onPress:()=>o(e),style:[mt.shiftBlock,{backgroundColor:gt[e.employee]||"#888"}],children:[(0,R.jsx)(s.default,{style:mt.shiftText,children:e.employee}),(0,R.jsx)(s.default,{style:mt.shiftText,children:e.start.split("T")[1].slice(0,5)})]},e.id)))]},r)}))})]})},pt={Sabin:"#4A90E2",Pranish:"#2ECC71",Aashish:"#E67E22"},yt=i.default.create({container:{flex:1},headerRow:{flexDirection:"row",backgroundColor:"#f9f9f9",borderBottomWidth:1,borderColor:"#ccc"},timeColumn:{width:60,alignItems:"center",justifyContent:"center",borderRightWidth:1,borderColor:"#ccc",padding:4},columnHeader:{flex:1,padding:4,alignItems:"center",borderRightWidth:1,borderColor:"#ccc"},columnHeaderText:{fontWeight:"bold",fontSize:12,color:"#333"},columnDate:{fontWeight:"600",color:"#4A90E2"},timeText:{fontSize:12,color:"#666"},row:{flexDirection:"row",borderBottomWidth:1,borderColor:"#eee",minHeight:60},cell:{flex:1,borderRightWidth:1,borderColor:"#eee",position:"relative"},shiftBlock:{backgroundColor:"#4A90E2",padding:4,borderRadius:4,zIndex:10},shiftText:{color:"#fff",fontSize:10,fontWeight:"600"}}),jt=({currentDate:e,schedules:t,onCellPress:n,onShiftPress:o})=>{const i=(0,a.useRef)(null),l=Array.from({length:24},((e,t)=>t)),d=(()=>{const t=new Date(e);return t.setDate(t.getDate()-t.getDay()),Array.from({length:7}).map(((e,n)=>{const o=new Date(t);return o.setDate(t.getDate()+n),o}))})();(0,a.useEffect)((()=>{const e=(new Date).getHours();i.current&&i.current.scrollToOffset({offset:60*e,animated:!0})}),[]);const u=e=>0===e?"12 AM":e<12?`${e} AM`:12===e?"12 PM":e-12+" PM",f=(e,n)=>{const o=new Date(e);o.setHours(n,0,0,0);const a=new Date(o);return a.setHours(n+1),t.filter((e=>{const t=new Date(e.start),n=new Date(e.end);return t<a&&n>o}))};return(0,R.jsxs)(r.default,{style:yt.container,children:[(0,R.jsxs)(r.default,{style:yt.headerRow,children:[(0,R.jsx)(r.default,{style:yt.timeColumn,children:(0,R.jsx)(s.default,{style:yt.timeText,children:"Time"})}),d.map(((e,t)=>(0,R.jsxs)(r.default,{style:yt.columnHeader,children:[(0,R.jsx)(s.default,{style:yt.columnHeaderText,children:e.toLocaleDateString("en-US",{weekday:"short"})}),(0,R.jsxs)(s.default,{style:yt.columnDate,children:[e.getMonth()+1,"/",e.getDate()]})]},t)))]}),(0,R.jsx)(c.default,{ref:i,data:l,style:{flexGrow:1,height:144},keyExtractor:e=>e.toString(),renderItem:({item:e})=>(0,R.jsxs)(r.default,{style:yt.row,children:[(0,R.jsx)(r.default,{style:yt.timeColumn,children:(0,R.jsx)(s.default,{style:yt.timeText,children:u(e)})}),d.map(((t,a)=>(0,R.jsx)(h.default,{style:yt.cell,onPress:()=>n("",t.toISOString().split("T")[0]),children:f(t,e).filter((t=>new Date(t.start).getHours()===e)).map((n=>{const a=new Date(n.start),r=new Date(n.end),i=Math.max(a.getTime(),new Date(t.setHours(e,0,0,0)).getTime()),l=(Math.min(r.getTime(),new Date(t.setHours(e+1,0,0,0)).getTime()),(r.getTime()-a.getTime())/6e4),d=Math.max(0,i-new Date(t.setHours(e,0,0,0)).getTime())/6e4*60;return(0,R.jsxs)(h.default,{onPress:()=>o(n),style:[yt.shiftBlock,{backgroundColor:pt[n.employee]||"#888",top:d,height:l/60*60,position:"absolute",left:2,right:2}],children:[(0,R.jsx)(s.default,{style:yt.shiftText,children:n.employee}),(0,R.jsxs)(s.default,{style:yt.shiftText,children:[n.start.split("T")[1].slice(0,5)," - ",n.end.split("T")[1].slice(0,5)]})]},n.id)}))},a)))]}),showsVerticalScrollIndicator:!1})]})},wt={Sabin:"#4A90E2",Pranish:"#2ECC71",Aashish:"#E67E22"},bt=i.default.create({container:{flex:1},header:{paddingVertical:12,alignItems:"center",backgroundColor:"#f9f9f9",borderBottomWidth:1,borderColor:"#ccc"},dateTitle:{fontSize:18,fontWeight:"600",color:"#333"},row:{flexDirection:"row",borderBottomWidth:1,borderColor:"#eee",minHeight:60,backgroundColor:"#fff"},timeColumn:{width:60,alignItems:"center",justifyContent:"center",borderRightWidth:1,borderColor:"#ccc"},timeText:{fontSize:12,color:"#666"},cell:{flex:1,position:"relative",borderRightWidth:1,borderColor:"#eee"},shiftBlock:{backgroundColor:"#4A90E2",padding:4,borderRadius:4,zIndex:10},shiftText:{color:"#fff",fontSize:10,fontWeight:"600"}}),Ct=({currentDate:e,schedules:t,onCellPress:n,onShiftPress:o})=>{const i=(0,a.useRef)(null),[l,d]=(0,a.useState)([]),u=Array.from({length:24},((e,t)=>t));(0,a.useEffect)((()=>{const e=(new Date).getHours();i.current&&i.current.scrollToOffset({offset:60*e,animated:!0})}),[]);const f=e=>0===e?"12 AM":e<12?`${e} AM`:12===e?"12 PM":e-12+" PM",g=e=>{const n=[];return t.forEach((t=>{((e,t)=>{const n=new Date(e.start).getTime(),o=new Date(e.end).getTime(),a=new Date(t.start).getTime(),r=new Date(t.end).getTime();return n<r&&o>a||a<o&&r>n})(e,t)&&n.push(t)})),n};(0,a.useEffect)((()=>{d([]),t.forEach((e=>{const t=g(e);t.length>0&&d((e=>[...e,...t]))}))}),[t]);return(0,R.jsxs)(r.default,{style:bt.container,children:[(0,R.jsx)(r.default,{style:bt.header,children:(0,R.jsx)(s.default,{style:bt.dateTitle,children:e.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})})}),(0,R.jsx)(c.default,{ref:i,data:u,contentContainerStyle:{flexGrow:1},style:{flexGrow:1,height:144},keyExtractor:e=>e.toString(),renderItem:({item:a})=>{const i=(n=>{const o=new Date(e);o.setHours(n,0,0,0);const a=new Date(o);return a.setHours(n+1,0,0,0),t.filter((e=>{const t=new Date(e.start);return t>=o&&t<a}))})(a);return(0,R.jsxs)(r.default,{style:bt.row,children:[(0,R.jsx)(r.default,{style:bt.timeColumn,children:(0,R.jsx)(s.default,{style:bt.timeText,children:f(a)})}),(0,R.jsx)(h.default,{style:bt.cell,onPress:()=>n("",e.toISOString().split("T")[0]),children:i.map((e=>{const t=new Date(e.start),n=(new Date(e.end).getTime()-t.getTime())/6e4,a=t.getMinutes(),r=l.some((t=>t.id===e.id));return(0,R.jsxs)(h.default,{onPress:()=>o(e),style:[bt.shiftBlock,{backgroundColor:r?"#d9534f":wt[e.employee]||"#888",top:a/60*60,height:n/60*60,position:"absolute",left:2,right:2}],children:[(0,R.jsx)(s.default,{style:bt.shiftText,children:e.employee}),(0,R.jsxs)(s.default,{style:bt.shiftText,children:[e.start.split("T")[1].slice(0,5)," - ",e.end.split("T")[1].slice(0,5)]})]},e.id)}))})]})}})]})},St=i.default.create({container:{flex:1,padding:10,backgroundColor:"#fff",minHeight:"100%"},navBar:{flexDirection:"row",justifyContent:"space-between",marginBottom:10,alignItems:"center"},leftNav:{flexDirection:"row",gap:10},rightNav:{flexDirection:"row",backgroundColor:"#f1f1f1",borderRadius:6,overflow:"hidden"},navButton:{fontSize:14,fontWeight:"600",color:"#333",marginHorizontal:8,paddingVertical:4},viewToggle:{paddingHorizontal:12,paddingVertical:6,color:"#333"},activeToggle:{backgroundColor:"#4A90E2",color:"#fff"},header:{alignItems:"center",marginBottom:8},headerText:{fontSize:16,fontWeight:"600"}}),Tt=({schedules:e,onCellPress:t,onShiftPress:n})=>{const[o,i]=(0,a.useState)("month"),[l,d]=(0,a.useState)(new Date),[c,f]=(0,a.useState)(null);return(0,R.jsxs)(r.default,{style:St.container,children:[(0,R.jsxs)(r.default,{style:St.navBar,children:[(0,R.jsxs)(r.default,{style:St.leftNav,children:[(0,R.jsx)(h.default,{onPress:()=>{const e=new Date(l);"month"===o?e.setMonth(l.getMonth()-1):e.setDate(l.getDate()-("week"===o?7:1)),d(e)},children:(0,R.jsx)(s.default,{style:St.navButton,children:"<"})}),(0,R.jsx)(h.default,{onPress:()=>d(new Date),children:(0,R.jsx)(s.default,{style:St.navButton,children:"Today"})}),(0,R.jsx)(h.default,{onPress:()=>{const e=new Date(l);"month"===o?e.setMonth(l.getMonth()+1):e.setDate(l.getDate()+("week"===o?7:1)),d(e)},children:(0,R.jsx)(s.default,{style:St.navButton,children:">"})})]}),(0,R.jsx)(r.default,{style:St.rightNav,children:["month","week","day"].map((e=>(0,R.jsx)(h.default,{onPress:()=>i(e),children:(0,R.jsx)(s.default,{style:[St.viewToggle,o===e&&St.activeToggle],children:e})},e)))})]}),(0,R.jsx)(r.default,{style:St.header,children:(0,R.jsx)(s.default,{style:St.headerText,children:(()=>{if("month"===o)return l.toLocaleDateString("en-US",{month:"long",year:"numeric"});if("week"===o){const e=new Date(l);e.setDate(e.getDate()-e.getDay());const t=new Date(e);return t.setDate(e.getDate()+6),`${e.toLocaleDateString("en-US",{month:"short",day:"numeric"})} - ${t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}`}return l.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})})()})}),(0,R.jsxs)(u.default,{style:{flex:1},contentContainerStyle:{flexGrow:1},showsVerticalScrollIndicator:!0,children:["month"===o&&(0,R.jsx)(xt,{currentDate:l,schedules:e,onCellPress:t,onShiftPress:n}),"week"===o&&(0,R.jsx)(jt,{currentDate:l,schedules:e,onCellPress:t,onShiftPress:n}),"day"===o&&(0,R.jsx)(Ct,{currentDate:l,schedules:e,onCellPress:t,onShiftPress:n})]})]})},vt=i.default.create({overlay:{flex:1,backgroundColor:"#00000088",justifyContent:"center",paddingHorizontal:50},modal:{backgroundColor:"#fff",borderRadius:12,padding:30,gap:14},title:{fontSize:22,fontWeight:"bold",textAlign:"center",marginBottom:10},row:{flexDirection:"row",gap:20},field:{flex:1},label:{fontWeight:"600",marginBottom:4,fontSize:14},input:{borderWidth:1,borderColor:"#ccc",borderRadius:6,padding:10,fontSize:14},pickerWrapper:{borderWidth:1,borderColor:"#ccc",borderRadius:6,overflow:"hidden"},error:{color:"#d9534f",fontSize:12,marginTop:4},actions:{flexDirection:"row",justifyContent:"flex-end",gap:12,marginTop:20},btn:{paddingVertical:10,paddingHorizontal:18,borderRadius:6},save:{backgroundColor:"#4A90E2"},cancel:{backgroundColor:"#888"},delete:{backgroundColor:"#d9534f"},btnText:{color:"#fff",fontWeight:"bold"}}),Dt=({visible:e,onClose:t,onSave:n,employees:o,locations:i,selectedEmployee:l,selectedDate:d,editingShift:c,onDelete:u})=>{const[f,g]=(0,a.useState)(""),[p,y]=(0,a.useState)(""),[j,w]=(0,a.useState)(""),[b,C]=(0,a.useState)(""),[S,T]=(0,a.useState)(""),[v,D]=(0,a.useState)({});(0,a.useEffect)((()=>{e&&(c?(g(c.employee),y(c.location),w(c.desc),C(c.start),T(c.end)):(g(l||""),C(d?`${d}T09:00`:""),T(d?`${d}T17:00`:""),y(""),w("")),D({}))}),[e,l,d,c]);return(0,R.jsx)(x.default,{visible:e,animationType:"fade",transparent:!0,children:(0,R.jsx)(r.default,{style:vt.overlay,children:(0,R.jsxs)(r.default,{style:vt.modal,children:[(0,R.jsx)(s.default,{style:vt.title,children:c?"Edit Shift":"Create Schedule"}),(0,R.jsxs)(r.default,{style:vt.row,children:[(0,R.jsxs)(r.default,{style:vt.field,children:[(0,R.jsx)(s.default,{style:vt.label,children:"Employee"}),(0,R.jsx)(r.default,{style:vt.pickerWrapper,children:(0,R.jsxs)(Ve.Picker,{selectedValue:f,onValueChange:g,children:[(0,R.jsx)(Ve.Picker.Item,{label:"Select Employee",value:""}),o.map((e=>(0,R.jsx)(Ve.Picker.Item,{label:e.name,value:e.id},e.id)))]})}),v.employee&&(0,R.jsx)(s.default,{style:vt.error,children:v.employee})]}),(0,R.jsxs)(r.default,{style:vt.field,children:[(0,R.jsx)(s.default,{style:vt.label,children:"Location"}),(0,R.jsx)(r.default,{style:vt.pickerWrapper,children:(0,R.jsx)(Ve.Picker,{selectedValue:p,onValueChange:y,children:i.map((e=>(0,R.jsx)(Ve.Picker.Item,{label:e,value:e},e)))})}),v.location&&(0,R.jsx)(s.default,{style:vt.error,children:v.location})]})]}),(0,R.jsxs)(r.default,{style:vt.row,children:[(0,R.jsxs)(r.default,{style:vt.field,children:[(0,R.jsx)(s.default,{style:vt.label,children:"Start Time"}),(0,R.jsx)(m.default,{value:b,onChangeText:C,style:vt.input,placeholder:"YYYY-MM-DDTHH:mm"})]}),(0,R.jsxs)(r.default,{style:vt.field,children:[(0,R.jsx)(s.default,{style:vt.label,children:"End Time"}),(0,R.jsx)(m.default,{value:S,onChangeText:T,style:vt.input,placeholder:"YYYY-MM-DDTHH:mm"})]})]}),v.time&&(0,R.jsx)(s.default,{style:vt.error,children:v.time}),(0,R.jsxs)(r.default,{children:[(0,R.jsx)(s.default,{style:vt.label,children:"Description"}),(0,R.jsx)(m.default,{style:[vt.input,{height:60}],multiline:!0,value:j,onChangeText:w,placeholder:"Shift description..."}),v.desc&&(0,R.jsx)(s.default,{style:vt.error,children:v.desc})]}),(0,R.jsxs)(r.default,{style:vt.actions,children:[c&&(0,R.jsx)(h.default,{onPress:()=>{u?.(),P.default.show({type:"info",text1:"Shift Deleted",text2:`${f}'s shift was removed.`}),t()},style:[vt.btn,vt.delete],children:(0,R.jsx)(s.default,{style:vt.btnText,children:"Delete"})}),(0,R.jsx)(h.default,{onPress:t,style:[vt.btn,vt.cancel],children:(0,R.jsx)(s.default,{style:vt.btnText,children:"Cancel"})}),(0,R.jsx)(h.default,{onPress:()=>{(()=>{const e={};return f||(e.employee="Select employee"),p||(e.location="Select location"),j||(e.desc="Add description"),(!b||!S||new Date(b)>=new Date(S))&&(e.time="Start must be before end"),D(e),Object.keys(e).length>0&&P.default.show({type:"error",text1:"Validation Error",text2:"Please fill out all fields correctly."}),0===Object.keys(e).length})()&&(n({employee:f,location:p,desc:j,start:b,end:S}),P.default.show({type:"success",text1:c?"Shift Updated":"Schedule Created",text2:`${f}'s shift has been ${c?"updated":"scheduled"} successfully.`}),t())},style:[vt.btn,vt.save],children:(0,R.jsx)(s.default,{style:vt.btnText,children:"Save"})})]})]})})})},kt=j.default.create({baseURL:"https://workhive.space",headers:{"Content-Type":"application/json"}});const Bt=[{id:1,employee:"Sabin",start:"2025-04-10T09:00:00",end:"2025-04-10T17:00:00",location:"Melbourne",desc:"Morning shift"},{id:2,employee:"Pranish",start:"2025-04-11T22:00:00",end:"2025-04-12T06:00:00",location:"Sydney",desc:"Night shift"}],It=["Melbourne","Sydney","Brisbane"],Et=i.default.create({container:{flex:1},mainContent:{flex:1,padding:20,marginTop:60},tabBar:{flexDirection:"row",gap:10,marginBottom:20},tabButton:{backgroundColor:"#f2f2f2",paddingVertical:8,paddingHorizontal:16,borderRadius:6},tabActive:{backgroundColor:"#fff",borderWidth:1,borderColor:"#4A90E2"},tabText:{fontSize:16,fontWeight:"500"},listItem:{backgroundColor:"#fff",padding:14,borderRadius:8,marginBottom:10,elevation:2},bold:{fontWeight:"bold",fontSize:16},autoAssignTitle:{fontSize:18,fontWeight:"bold",padding:20},card:{backgroundColor:"#fff",padding:14,borderRadius:8,marginBottom:10,elevation:2},cardTitle:{fontSize:18,fontWeight:"bold"},cardActions:{flexDirection:"row",justifyContent:"space-between",marginTop:10},editButton:{backgroundColor:"#4A90E2",padding:8,borderRadius:4},deleteButton:{backgroundColor:"#D9534F",padding:8,borderRadius:4},buttonText:{color:"#fff"}}),zt=()=>{const[e,t]=(0,a.useState)(!0),[n,o]=(0,a.useState)("calendar"),[i,d]=(0,a.useState)(!1),[u,g]=(0,a.useState)(""),[m,x]=(0,a.useState)([]),[p,y]=(0,a.useState)(""),[j,b]=(0,a.useState)(Bt),[S,v]=(0,a.useState)(""),[k,B]=(0,a.useState)(""),[I,E]=(0,a.useState)(null),z=f.default.get("window").width<=768;(0,a.useEffect)((()=>{(async()=>{const e=await A();if(!(e instanceof C)){const t=e.data.map((e=>({id:e.Employee.id,name:`${e.Employee.firstName} ${e.Employee.lastName}`})));x(t)}})()}),[]);const W=e=>{b((t=>t.filter((t=>t.id!==e))))},F=j.filter((e=>{const t=!S||e.employee===S,n=!k||e.location===k;return t&&n}));return(0,R.jsxs)(l.default,{style:Et.container,children:[(0,R.jsx)(H,{isSidebarOpen:e,toggleSidebar:()=>t(!e)}),(0,R.jsx)(N,{isOpen:e,toggleSidebar:()=>t(!e),selectedTab:"Schedules",handleTabChange:()=>o("calendar")}),(0,R.jsxs)(r.default,{style:[Et.mainContent,{marginLeft:z?0:e?250:0}],children:[(0,R.jsx)(r.default,{style:Et.tabBar,children:["calendar","list","auto"].map((e=>(0,R.jsx)(h.default,{style:[Et.tabButton,n===e&&Et.tabActive],onPress:()=>o(e),children:(0,R.jsx)(s.default,{style:Et.tabText,children:"calendar"===e?"Calendar View":"list"===e?"List View":"Auto-Assign"})},e)))}),"calendar"===n&&(0,R.jsx)(Tt,{schedules:F,onCellPress:(e,t)=>{g(e),y(t),d(!0)},onShiftPress:e=>{E(e),d(!0)}}),"list"===n&&(0,R.jsx)(c.default,{data:F,keyExtractor:e=>e.id.toString(),renderItem:({item:e})=>(0,R.jsxs)(r.default,{style:Et.card,children:[(0,R.jsx)(s.default,{style:Et.cardTitle,children:e.employee}),(0,R.jsxs)(s.default,{children:[new Date(e.start).toLocaleString()," -"," ",new Date(e.end).toLocaleString()]}),(0,R.jsx)(s.default,{children:e.location}),(0,R.jsx)(s.default,{children:e.desc}),(0,R.jsxs)(r.default,{style:Et.cardActions,children:[(0,R.jsx)(h.default,{style:Et.editButton,onPress:()=>(E(e),void d(!0)),children:(0,R.jsx)(s.default,{style:Et.buttonText,children:"Edit"})}),(0,R.jsx)(h.default,{style:Et.deleteButton,onPress:()=>W(e.id),children:(0,R.jsx)(s.default,{style:Et.buttonText,children:"Delete"})})]})]})}),"auto"===n&&(0,R.jsx)(r.default,{children:(0,R.jsx)(s.default,{style:Et.autoAssignTitle,children:"Auto-Assign coming soon..."})}),(0,R.jsx)(Dt,{visible:i,onClose:()=>{d(!1),E(null)},onSave:async e=>{const t={employeeId:e.employee,officeId:e.location,startTime:e.start,endTime:e.end,date:e.start.split("T")[0],description:e.desc};try{const n=await(async(e,t,n,o,a,r)=>{try{const s=await D("accessToken",T.WEB)??"";return(await kt.post("api/roster/createShift",{employeeId:e,officeId:t,startTime:n,endTime:o,date:a,description:r},{params:{accessToken:s}})).data}catch(s){if(s instanceof w.AxiosError){const e=s.response?.data;return new C(e.statusCode,{},e.message)}return new C(400,{},"Something went wrong")}})(t.employeeId,t.officeId,t.startTime,t.endTime,t.date,t.description);if(n instanceof C)P.default.show({type:"error",text1:"Failed to create shift",text2:n.message});else{P.default.show({type:"success",text1:"Shift created!",text2:"The shift has been added successfully."});const t=m.find((t=>t.id===e.employee))?.name||e.employee;b((n=>[...n,{id:n.length+1,employee:t,location:e.location,desc:e.desc,start:e.start,end:e.end}]))}}catch(n){console.error("Unexpected error while creating shift:",n),P.default.show({type:"error",text1:"Error",text2:"Something went wrong while creating the shift."})}d(!1)},onDelete:()=>{I&&(W(I.id),E(null),d(!1))},employees:m,locations:It,selectedEmployee:u,selectedDate:p,editingShift:I})]})]})},At=i.default.create({section:{marginTop:30,margin:"20"},sectionTitle:{fontSize:18,color:"#393D3F",marginBottom:15},changePasswordButton:{backgroundColor:"#007BFF",padding:15,borderRadius:10,alignItems:"center",marginTop:10},changePasswordButtonText:{color:"white",fontSize:18},input:{backgroundColor:"white",borderWidth:1,borderColor:"#E0E0E0",borderRadius:10,padding:14,fontSize:16,marginBottom:10}}),Pt=()=>{const[e,t]=(0,a.useState)(""),[n,o]=(0,a.useState)(""),[r,i]=(0,a.useState)("");return(0,R.jsxs)(l.default,{style:At.section,children:[(0,R.jsx)(s.default,{style:At.sectionTitle,children:"Change your password"}),(0,R.jsx)(m.default,{style:At.input,placeholder:"Current Password",secureTextEntry:!0,value:e,onChangeText:t}),(0,R.jsx)(m.default,{style:At.input,placeholder:"New Password",secureTextEntry:!0,value:n,onChangeText:o}),(0,R.jsx)(m.default,{style:At.input,placeholder:"Confirm New Password",secureTextEntry:!0,value:r,onChangeText:i}),(0,R.jsx)(h.default,{style:At.changePasswordButton,onPress:async()=>{if(e&&n&&r)if(n===r)if(n.length<8||e.length<8)P.default.show({text1:"Password length must be at le 8 characters. ",type:"error",position:"bottom"});else try{if(!await D("accessToken"))return void alert("Token is missing. Please log in again.");const a=await fe({editType:"password",newDetail:n,password:e});200===a.statusCode?(P.default.show({text1:"Password changed successfully! ",type:"success",position:"bottom"}),t(""),o(""),i("")):a instanceof C?P.default.show({text1:a.message,type:"error",position:"bottom"}):P.default.show({text1:"Something went wrong",type:"error",position:"bottom"})}catch(a){P.default.show({text1:"Something went wrong",type:"error",position:"bottom"})}else P.default.show({text1:"New password doesn't match",type:"error",position:"bottom"});else P.default.show({text1:"Please fill in all fields",type:"error",position:"bottom"})},children:(0,R.jsx)(s.default,{style:At.changePasswordButtonText,children:"Update Password"})})]})},Rt=i.default.create({section:{marginTop:30,margin:"20"},sectionTitle:{fontSize:18,color:"#393D3F",marginBottom:15},changePasswordButton:{backgroundColor:"#007BFF",padding:15,borderRadius:10,alignItems:"center",marginTop:10},changePasswordButtonText:{color:"white",fontSize:18},input:{backgroundColor:"white",borderWidth:1,borderColor:"#E0E0E0",borderRadius:10,padding:14,fontSize:16,marginBottom:10}}),Wt=()=>{const[e,t]=(0,a.useState)(""),[n,o]=(0,a.useState)(""),[r,i]=(0,a.useState)("");return(0,R.jsxs)(l.default,{style:Rt.section,children:[(0,R.jsx)(s.default,{style:Rt.sectionTitle,children:"Change your password"}),(0,R.jsx)(m.default,{style:Rt.input,placeholder:"Current Password",secureTextEntry:!0,value:e,onChangeText:t}),(0,R.jsx)(m.default,{style:Rt.input,placeholder:"New Password",secureTextEntry:!0,value:n,onChangeText:o}),(0,R.jsx)(m.default,{style:Rt.input,placeholder:"Confirm New Password",secureTextEntry:!0,value:r,onChangeText:i}),(0,R.jsx)(h.default,{style:Rt.changePasswordButton,onPress:async()=>{if(e&&n&&r)if(n===r)if(n.length<8||e.length<8)P.default.show({text1:"Password length must be at le 8 characters. ",type:"error",position:"bottom"});else try{if(!await D("accessToken"))return void alert("Token is missing. Please log in again.");const a=await fe({editType:"password",newDetail:n,password:e});200===a.statusCode?(P.default.show({text1:"Password changed successfully! ",type:"success",position:"bottom"}),t(""),o(""),i("")):a instanceof C?P.default.show({text1:a.message,type:"error",position:"bottom"}):P.default.show({text1:"Something went wrong",type:"error",position:"bottom"})}catch(a){P.default.show({text1:"Something went wrong",type:"error",position:"bottom"})}else P.default.show({text1:"New password doesn't match",type:"error",position:"bottom"});else P.default.show({text1:"Please fill in all fields",type:"error",position:"bottom"})},children:(0,R.jsx)(s.default,{style:Rt.changePasswordButtonText,children:"Update Password"})})]})},{width:Ft,height:Lt}=f.default.get("window"),Nt=i.default.create({container:{flex:1,justifyContent:"center",padding:20,backgroundColor:"#FDFDFF",marginTop:-140},rowContainer:{flexDirection:"column",justifyContent:"center",alignItems:"center",width:"100%",fontSize:30,maxWidth:1200},leftSide:{marginRight:0,alignItems:"flex-start",width:"30%",marginBottom:60},formContainer:{width:"60%",alignItems:"center",justifyContent:"center"},inputContainer:{alignItems:"center",marginBottom:15,flexDirection:"row"},countryCode:{flex:1,fontSize:16,marginBottom:15,padding:15,borderWidth:2,borderColor:"#ccc",marginRight:10,borderRadius:5},input:{flex:7,fontSize:16,width:"100%",padding:15,borderWidth:2,borderColor:"#ccc",marginBottom:15,borderRadius:5},verifyInput:{fontSize:16,width:"100%",padding:15,borderWidth:2,borderColor:"#ccc",marginBottom:15,borderRadius:5},headingText:{fontSize:18,fontWeight:"bold",color:"#ff",textAlign:"left",marginBottom:10},verificationText:{fontSize:16,color:"#888888",textAlign:"left",marginTop:5,marginBottom:10,padding:10},button:{backgroundColor:"#4A90E2",padding:15,borderRadius:5,width:"100%",alignItems:"center",marginTop:20,marginBottom:5},buttonText:{color:"#fff",fontSize:18},secondaryButton:{borderRadius:5,padding:15,width:"100%",alignItems:"center",marginBottom:20},secondaryButtonText:{color:"#4A90E2",fontSize:20},errorText:{color:"red",marginBottom:10,textAlign:"center"},footer:{flexDirection:"row",justifyContent:"center",marginTop:20},link:{color:"#007bff",textDecorationLine:"underline"}}),Ot=({navigation:e})=>{const[t,n]=(0,a.useState)(""),[o,i]=(0,a.useState)(""),[d,c]=(0,a.useState)(!1);const u=async()=>{console.log("Pressed"),t?!function(e){if(e.startsWith("+61")||(e="+61"+e),12!=e.length)return!1;const t=Number.parseInt(e.slice(0));return console.log(t),!isNaN(t)}(t)?P.default.show({text1:"Phone Number is Invalid.",type:"error",position:"bottom"}):await f(t):P.default.show({text1:"Enter your phone number first",type:"error",position:"bottom"})},f=async e=>{try{e.startsWith("+61")||(e="+61"+e),console.log(e);const t=await ce({phoneNumber:e});t.success?(P.default.show({text1:"Verification Code Sent.",type:"success",position:"bottom"}),c(!0)):t instanceof C&&(console.log(t.message),P.default.show({text1:t.message,type:"error",position:"bottom"}))}catch(t){P.default.show({text1:"Something went wrong",type:"error",position:"bottom"})}},g=async t=>{try{t.startsWith("+61")||(t="+61"+t);const n=await ue({code:o,phoneNumber:t});n.success?(c(!1),e.navigate("ParitalRegestrationPasswordScreen"),P.default.show({text1:n.message,type:"success",position:"bottom"})):n instanceof C&&Te.default.alert(n.message)}catch(n){P.default.show({text1:"Something went wrong",type:"error",position:"bottom"})}};return(0,R.jsxs)(r.default,{style:Nt.container,children:[(0,R.jsx)(re.default,{behavior:"height",children:(0,R.jsx)(l.default,{children:(0,R.jsx)(r.default,{style:[Nt.rowContainer,{flexDirection:"row"}],children:(0,R.jsxs)(r.default,{style:Nt.formContainer,children:[(0,R.jsxs)(r.default,{style:Nt.inputContainer,children:[(0,R.jsx)(m.default,{style:Nt.countryCode,value:"+61",disabled:!0,focusable:!1,editable:!1}),(0,R.jsx)(m.default,{maxLength:9,autoFocus:!0,style:Nt.input,placeholder:"Phone Number",value:t,onChangeText:n})]}),(0,R.jsx)(h.default,{onPress:()=>u(),style:Nt.button,children:(0,R.jsx)(s.default,{style:Nt.buttonText,children:"Continue"})}),(0,R.jsxs)(r.default,{style:Nt.footer,children:[(0,R.jsx)(s.default,{children:"Already have an account? "}),(0,R.jsx)(h.default,{onPress:()=>e.navigate("Login"),children:(0,R.jsx)(s.default,{style:Nt.link,children:"Login"})})]})]})})})}),(0,R.jsx)(x.default,{presentationStyle:"pageSheet",visible:d,animationType:"slide",onRequestClose:()=>{c(!d)},children:(0,R.jsx)(r.default,{style:Nt.container,children:(0,R.jsxs)(r.default,{style:Nt.formContainer,children:[(0,R.jsx)(s.default,{style:Nt.verificationText,children:"A 6 digit verification code has been sent to your phone."}),(0,R.jsx)(m.default,{maxLength:6,autoFocus:!0,style:Nt.verifyInput,placeholder:"6 Digit Code",value:o,onChangeText:i}),(0,R.jsx)(h.default,{onPress:()=>g(t),style:Nt.button,children:(0,R.jsx)(s.default,{style:Nt.buttonText,children:"Verify "})}),(0,R.jsxs)(r.default,{style:Nt.footer,children:[(0,R.jsx)(s.default,{children:"Didn't receive code? "}),(0,R.jsx)(h.default,{onPress:()=>{},children:(0,R.jsx)(s.default,{style:Nt.link,children:"Resend"})})]})]})})})]})},{width:Ht,height:Mt}=f.default.get("window"),Vt=i.default.create({container:{flex:1,justifyContent:"center",padding:20,backgroundColor:"#FDFDFF",marginTop:-140},rowContainer:{flexDirection:"column",justifyContent:"center",alignItems:"center",width:"100%",fontSize:30,maxWidth:1200},leftSide:{marginRight:0,alignItems:"flex-start",width:"30%",marginBottom:60},backButton:{padding:10,marginTop:30},formContainer:{width:"60%",alignItems:"center",justifyContent:"center"},input:{width:"100%",padding:15,borderWidth:2,borderColor:"#ccc",marginBottom:15,borderRadius:5},button:{backgroundColor:"#4A90E2",padding:15,borderRadius:5,width:"100%",alignItems:"center",marginTop:20,marginBottom:5},buttonText:{color:"#fff",fontSize:18},secondaryButton:{borderRadius:5,padding:15,width:"100%",alignItems:"center",marginBottom:20},secondaryButtonText:{color:"#4A90E2",fontSize:20},errorText:{color:"red",marginBottom:10,textAlign:"center"},footer:{flexDirection:"row",justifyContent:"center",marginTop:20},link:{color:"#007bff",textDecorationLine:"underline"}}),Ut=({navigation:e})=>{const[t,n]=(0,a.useState)(""),[o,i]=(0,a.useState)(""),d=async()=>{try{if(t!==o)return void P.default.show({text1:"Both passwod must be same",type:"error",position:"bottom"});const n="+61412524317",a=await(async(e,t)=>{console.log(t,e),console.log("Partial");try{return(await de.post("partialRegestrationPasswordSet",{phoneNumber:e,password:t})).data}catch(n){if(n instanceof w.AxiosError){const e=n.response?.data;return new C(e.statusCode,{},e.message)}return new C(400,{},"Something went wrong")}})(n,t);a instanceof b?(e.navigate("Login"),P.default.show({text1:a.message,type:"success",position:"bottom"})):(P.default.show({text1:a.message,type:"error",position:"bottom"}),409===a.statusCode&&e.navigate("Login"))}catch(n){console.error("Signup error:",n)}};return(0,R.jsx)(re.default,{style:Vt.container,behavior:"height",children:(0,R.jsx)(l.default,{children:(0,R.jsx)(r.default,{style:[Vt.rowContainer,{flexDirection:"row"}],children:(0,R.jsxs)(r.default,{style:Vt.formContainer,children:[(0,R.jsx)(m.default,{style:Vt.input,placeholder:"Password",value:t,onChangeText:n,secureTextEntry:!0}),(0,R.jsx)(m.default,{style:Vt.input,placeholder:"Confirm Password",value:o,onChangeText:i,secureTextEntry:!0}),(0,R.jsx)(h.default,{onPress:d,style:Vt.button,children:(0,R.jsx)(s.default,{style:Vt.buttonText,children:"Continue"})}),(0,R.jsxs)(r.default,{style:Vt.footer,children:[(0,R.jsx)(s.default,{children:"Already have an account? "}),(0,R.jsx)(h.default,{onPress:d,children:(0,R.jsx)(s.default,{style:Vt.link,children:"Login"})})]})]})})})})};const $t=(0,n(12038).io)("http://192.168.1.104:3000",{transports:["websocket"],forceNew:!0});var qt=n(41733),Yt=n(49050);const Gt=i.default.create({container:{flex:1,flexDirection:"row",backgroundColor:V},mainContent:{flex:1,marginTop:60,paddingHorizontal:20,paddingBottom:20,marginLeft:30},scrollContainer:{paddingBottom:80},chatTitle:{fontSize:24,fontWeight:"700",color:U},chatTitleRow:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:10},channelActions:{flexDirection:"row",gap:12},actionText:{fontSize:18,color:"#777"},renameModal:{backgroundColor:"#FDFDFF",padding:20,marginHorizontal:40,borderRadius:12},modalOverlay:{flex:1,justifyContent:"center",backgroundColor:"rgba(0,0,0,0.5)"},messageBubble:{maxWidth:"80%",marginVertical:6,padding:12,borderRadius:12},messageLeft:{alignSelf:"flex-start",backgroundColor:"#f1f1f1"},messageRight:{alignSelf:"flex-end",backgroundColor:"#4A90E2"},messageText:{color:"#fff",fontSize:15},inputBar:{flexDirection:"row",alignItems:"center",paddingVertical:10,borderTopWidth:1,borderColor:"#ccc",marginTop:10},input:{flex:1,backgroundColor:"#fff",padding:10,borderRadius:20,fontSize:15,marginRight:10},sendButton:{backgroundColor:"#4A90E2",paddingVertical:10,paddingHorizontal:16,borderRadius:20},sendButtonText:{color:"#fff",fontWeight:"600"},modalTitle:{fontSize:18,fontWeight:"bold",color:U,marginBottom:10},modalButtons:{flexDirection:"row",justifyContent:"flex-end",gap:10},button:{paddingVertical:10,paddingHorizontal:16,borderRadius:8},cancelButton:{backgroundColor:"#eee"},createButton:{backgroundColor:"#4A90E2"},buttonText:{fontSize:15,fontWeight:"600",color:"#333"},iconButton:{padding:8,justifyContent:"center",alignItems:"center"}}),_t=({route:e,navigation:t})=>{const{channelName:n,channelId:o,refreshChannels:i,allChannels:c}=e.params,[g,p]=(0,a.useState)(n),[j,b]=(0,a.useState)(n),[S,v]=(0,a.useState)(!0),k=(0,a.useRef)(new d.default.Value(250)).current,I=(0,a.useRef)(new d.default.Value(250)).current,[E,z]=(0,a.useState)(!1),A=f.default.get("window").width,{userRole:W}=ee(),F="admin"===W||"manager"===W,[L,O]=(0,a.useState)(!1),[M,V]=(0,a.useState)(n),[U,$]=(0,a.useState)([]),[q,Y]=(0,a.useState)(""),G=(0,a.useRef)(null);(0,a.useEffect)((()=>($t.on("receive_message",(e=>{$((t=>[...t,{text:e.text,fromSelf:"your-user-id"===e.senderId}])),setTimeout((()=>G.current?.scrollToEnd({animated:!0})),100)})),()=>{$t.off("receive_message")})),[]),(0,a.useEffect)((()=>{p(n),$([]),b(n),V(n)}),[o,n]);return(0,a.useEffect)((()=>{A<=768?(z(!0),v(!1)):(z(!1),v(!0))}),[A]),(0,a.useEffect)((()=>{d.default.timing(k,{toValue:S?250:0,duration:300,useNativeDriver:!1}).start(),d.default.timing(I,{toValue:S?250:0,duration:300,useNativeDriver:!1}).start()}),[S]),(0,R.jsxs)(l.default,{style:Gt.container,children:[(0,R.jsx)(H,{isSidebarOpen:S,toggleSidebar:()=>v(!S)}),(0,R.jsx)(N,{isOpen:S,toggleSidebar:()=>v(!S),selectedTab:j,handleTabChange:b}),(0,R.jsx)(d.default.View,{style:[Gt.mainContent,{paddingLeft:E?0:I}],children:(0,R.jsxs)(re.default,{behavior:void 0,style:{flex:1},children:[(0,R.jsxs)(r.default,{style:Gt.chatTitleRow,children:[(0,R.jsxs)(s.default,{style:Gt.chatTitle,children:["#",g]}),F&&(0,R.jsxs)(r.default,{style:Gt.channelActions,children:[(0,R.jsx)(h.default,{onPress:()=>O(!0),children:(0,R.jsx)(y.default,{name:"edit",size:18,color:"#4A90E2"})}),(0,R.jsx)(h.default,{onPress:async()=>{if(window.confirm(`Are you sure you want to delete #${g}?`))try{const e=await(async e=>{try{const t=await D("accessToken",T.WEB),n=e.channelId;return(await B.delete("delete",{params:{channelId:n},headers:{Authorization:`Bearer ${t}`}})).data}catch(t){if(t instanceof w.AxiosError){const e=t.response?.data;return new C(e.statusCode,{},e.message)}return new C(400,{},"Something went wrong")}})({channelId:o,channelName:g});if(e instanceof C||!("statusCode"in e)||e.statusCode>=400)throw new Error(e.message||"Failed to delete channel");await(i?.()),P.default.show({type:"success",text1:"Channel deleted"});const n=c?.filter((e=>e.id!==o));if(n&&n.length>0){const e=n[0];t.replace("ChatScreen",{channelName:e.name,channelId:e.id,refreshChannels:i,allChannels:n})}else t.goBack()}catch(e){console.error(" Delete error:",e),P.default.show({type:"error",text1:"Delete Failed",text2:e.message||"Something went wrong."})}},children:(0,R.jsx)(y.default,{name:"trash",size:18,color:"#D9534F"})})]})]}),(0,R.jsx)(u.default,{ref:G,contentContainerStyle:Gt.scrollContainer,children:U.map(((e,t)=>(0,R.jsx)(r.default,{style:[Gt.messageBubble,e.fromSelf?Gt.messageRight:Gt.messageLeft],children:e.image?(0,R.jsx)(ne.default,{source:{uri:e.image},style:{width:200,height:200,borderRadius:8,marginBottom:5},resizeMode:"cover"}):(0,R.jsx)(s.default,{style:Gt.messageText,children:e.text})},t)))}),(0,R.jsxs)(r.default,{style:Gt.inputBar,children:[(0,R.jsx)(m.default,{style:Gt.input,value:q,onChangeText:Y,placeholder:"Type a message...",placeholderTextColor:"#aaa"}),(0,R.jsx)(h.default,{onPress:async()=>{try{const e=await qt.launchImageLibraryAsync({mediaTypes:Yt.MediaTypeOptions.Images,allowsEditing:!1,quality:.7,base64:!0});if(!e.canceled&&e.assets.length>0){const t=e.assets[0],n=`data:${t.type};base64,${t.base64}`;$t.emit("send_message",{text:"",image:n,senderId:"your-user-id",channelName:g}),$((e=>[...e,{text:"[Image]",fromSelf:!0}]))}}catch(e){console.error("Image pick error:",e),P.default.show({type:"error",text1:"Image pick failed"})}},style:Gt.iconButton,children:(0,R.jsx)(y.default,{name:"image",size:20,color:"#4A90E2"})}),(0,R.jsx)(h.default,{onPress:()=>{if(!q.trim())return;$t.emit("send_message",{text:q,senderId:"your-user-id",channelName:g}),$((e=>[...e,{text:q,fromSelf:!0}])),Y(""),setTimeout((()=>G.current?.scrollToEnd({animated:!0})),100)},style:Gt.sendButton,children:(0,R.jsx)(s.default,{style:Gt.sendButtonText,children:"Send"})})]})]})}),(0,R.jsx)(x.default,{visible:L,transparent:!0,animationType:"slide",onRequestClose:()=>O(!1),children:(0,R.jsx)(r.default,{style:Gt.modalOverlay,children:(0,R.jsxs)(r.default,{style:Gt.renameModal,children:[(0,R.jsx)(s.default,{style:Gt.modalTitle,children:"Rename Channel"}),(0,R.jsx)(m.default,{style:Gt.input,value:M,onChangeText:V}),(0,R.jsxs)(r.default,{style:Gt.modalButtons,children:[(0,R.jsx)(h.default,{style:[Gt.button,Gt.cancelButton],onPress:()=>O(!1),children:(0,R.jsx)(s.default,{style:Gt.buttonText,children:"Cancel"})}),(0,R.jsx)(h.default,{style:[Gt.button,Gt.createButton],onPress:async()=>{try{const e=await(async e=>{try{const{channelId:t,newChannelName:n}=e;console.log("channelID:",t);const o=await D("accessToken",T.WEB);return(await B.put("changeAChannelName",{channelId:t,newChannelName:n},{headers:{Authorization:`Bearer ${o}`}})).data}catch(t){if(t instanceof w.AxiosError){const e=t.response?.data;return new C(e.statusCode,{},e.message)}return new C(400,{},"Something went wrong")}})({channelId:o,newChannelName:M});if(e instanceof C||!("statusCode"in e)||e.statusCode>=400)return void P.default.show({type:"error",text1:"Rename Failed",text2:e.message||"Something went wrong."});P.default.show({type:"success",text1:"Channel renamed"}),O(!1),p(M),b(M),t.setParams({channelName:M,channelId:o}),await(i?.())}catch(e){console.error("Rename error:",e),P.default.show({type:"error",text1:"Unexpected Error",text2:"Could not rename channel."})}},children:(0,R.jsx)(s.default,{style:[Gt.buttonText,{color:"#fff"}],children:"Save"})})]})]})})})]})};var Zt=n(62807);const Kt=[{id:"shift-1",employeeId:"emp-001",officeId:"office-001",officeLocation:{id:"office-001",name:"Main Office",latitude:"40.7128",longitude:"-74.0060",radius:50},startTime:new Date("2025-04-13T20:00:00"),endTime:new Date("2025-04-13T23:00:00"),date:new Date("2025-04-14"),description:"Morning shift at reception"},{id:"shift-2",employeeId:"emp-002",officeId:"office-002",startTime:new Date("2025-04-14T13:00:00"),endTime:new Date("2025-04-14T17:00:00"),date:new Date("2025-04-14"),description:"Afternoon support duties",officeLocation:{id:"",name:"",latitude:"",longitude:"",radius:0}},{id:"shift-3",employeeId:"emp-003",officeId:"office-001",startTime:new Date("2025-04-15T09:00:00"),endTime:new Date("2025-04-15T17:00:00"),date:new Date("2025-04-15"),description:"Full-day field visit",officeLocation:{id:"",name:"",latitude:"",longitude:"",radius:0}},{id:"shift-4",employeeId:"emp-001",officeId:"office-003",startTime:new Date("2025-04-16T07:00:00"),endTime:new Date("2025-04-16T15:00:00"),date:new Date("2025-04-16"),description:"Warehouse supervision",officeLocation:{id:"",name:"",latitude:"",longitude:"",radius:0}},{id:"shift-5",employeeId:"emp-004",officeId:"office-002",startTime:new Date("2025-04-17T14:00:00"),endTime:new Date("2025-04-17T22:00:00"),date:new Date("2025-04-17"),description:"Evening coverage",officeLocation:{id:"office-002",name:"Branch Office",latitude:"34.0522",longitude:"-118.2437",radius:30}},{id:"shift-6",employeeId:"emp-002",officeId:"office-003",startTime:new Date("2025-04-18T10:00:00"),endTime:new Date("2025-04-18T16:00:00"),date:new Date("2025-04-18"),description:"Training and documentation",officeLocation:{id:"office-003",name:"Remote Office",latitude:"37.7749",longitude:"-122.4194",radius:20}},{id:"shift-7",employeeId:"emp-003",officeId:"office-001",startTime:new Date("2025-04-19T12:00:00"),endTime:new Date("2025-04-19T18:00:00"),date:new Date("2025-04-19"),description:"Client visit assistance",officeLocation:{id:"office-001",name:"main office",latitude:"40.7128",longitude:"-74.0060",radius:50}},{id:"shift-8",employeeId:"emp-004",officeId:"office-002",startTime:new Date("2025-04-20T08:30:00"),endTime:new Date("2025-04-20T14:30:00"),date:new Date("2025-04-13"),description:"Facility maintenance",officeLocation:{id:"office-002",name:"Branch Office",latitude:"34.0522",longitude:"-118.2437",radius:30}},{id:"shift-9",employeeId:"emp-001",officeId:"office-001",startTime:new Date("2025-04-13T09:00:00"),endTime:new Date("2025-04-13T20:00:00"),date:new Date("2025-04-13"),description:"Office admin shift",officeLocation:{id:"office-001",name:"Main Office",latitude:"40.7128",longitude:"-74.0060",radius:50}},{id:"shift-10",employeeId:"emp-005",officeId:"office-003",startTime:new Date("2025-04-22T11:00:00"),endTime:new Date("2025-04-22T19:00:00"),date:new Date("2025-04-22"),description:"Backup shift for leave coverage",officeLocation:{id:"office-003",name:"Remote Office",latitude:"37.7749",longitude:"-122.4194",radius:20}}];var Jt=n(9353),Qt=n(48891),Xt=n(80519),en=n(16398),tn=n(59683),nn=n(38102);function on(e){throw alert(e),new Error(e)}Xt.setNotificationHandler({handleNotification:async()=>({shouldShowAlert:!0,shouldPlaySound:!0,shouldSetBadge:!0})});const an="#4A90E2",rn="#FDFDFF",sn="#393D3F",ln=i.default.create({container:{flex:1,backgroundColor:rn},scrollContainer:{flex:1,paddingHorizontal:0,paddingBottom:100},header:{backgroundColor:an,paddingVertical:20,paddingHorizontal:10,borderBottomLeftRadius:40,borderBottomRightRadius:40,flexDirection:"column",justifyContent:"center",alignItems:"center",marginBottom:20,width:"100%"},chatViewContainer:{flex:1},chatHeader:{backgroundColor:an,paddingVertical:20,paddingHorizontal:10,flexDirection:"row",justifyContent:"center",alignItems:"center",width:"100%"},backButton:{position:"absolute",right:10,top:20},headerText:{color:"white",fontSize:22,textAlign:"center",marginBottom:10},menuButton:{position:"absolute",left:10,top:20},notificationButton:{position:"absolute",right:10,top:20},tabsContainer:{flexDirection:"row",justifyContent:"center",width:"100%",marginTop:10},tab:{backgroundColor:an,padding:10,borderRadius:10},tabText:{backgroundColor:"#88B6EC",borderRadius:10,padding:10,width:"100%",textAlign:"center",fontSize:10,color:"white"},activeTab:{borderBottomWidth:2,borderBottomColor:rn},activeTabText:{backgroundColor:rn,color:sn},contentContainer:{marginTop:20,paddingHorizontal:20},sectionTitle:{fontSize:10,fontWeight:"light",color:"#393D3F",left:120,marginBottom:12,marginTop:-30},noShiftsText:{fontSize:16,color:"#8E9196",textAlign:"center",marginVertical:20},welcomeContainer:{paddingHorizontal:20,paddingTop:20},welcomeText:{fontSize:22,fontWeight:"700",color:sn},welcomeSubtext:{fontSize:14,color:"#6C757D",marginTop:4},shiftCard:{flexDirection:"row",alignItems:"center",backgroundColor:"#fff",marginTop:20,marginHorizontal:20,borderRadius:12,padding:16,shadowColor:"#000",shadowOpacity:.05,shadowRadius:8,elevation:4},shiftLabel:{fontSize:16,fontWeight:"600",color:sn},shiftTime:{fontSize:14,marginTop:4,color:"#4A90E2"},shiftLocation:{fontSize:13,color:"#6C757D",marginTop:2},noShiftText:{color:"#D9534F",marginTop:4},clockButton:{backgroundColor:"#2ECC71",margin:20,padding:14,borderRadius:12,flexDirection:"row",justifyContent:"center",alignItems:"center"},clockButtonText:{color:"#fff",fontWeight:"600",fontSize:15},quickActionScroll:{paddingHorizontal:12,marginTop:10},actionCard:{backgroundColor:"#fff",borderRadius:10,padding:14,alignItems:"center",justifyContent:"center",width:90,height:90,marginRight:10,elevation:2,shadowColor:"#000",shadowOpacity:.05,shadowRadius:4},actionLabel:{fontSize:12,color:sn,marginTop:6},individualShiftCardRow:{flexDirection:"row",alignItems:"flex-start",backgroundColor:"#fff",borderRadius:10,padding:12,marginBottom:12,shadowColor:"#000",shadowOpacity:.05,shadowRadius:4,elevation:2},shiftDescription:{fontSize:14,fontWeight:"700",color:"#6C757D",marginTop:2},iconRow:{flexDirection:"row",alignItems:"center",marginBottom:6},shiftLineText:{fontSize:14,color:sn,flexShrink:1},icon:{color:"gray",opacity:.6,marginRight:8}}),dn=()=>{const{firstName:e,lastName:t}=ee(),[n,o]=(0,a.useState)(!1),[i,d]=(0,a.useState)("home"),[c,f]=(0,a.useState)("dashboard"),[m,x]=(0,a.useState)(!1),[p,y]=(0,a.useState)(!1),j=(0,g.useNavigation)(),[w,b]=(0,a.useState)(null),[C,S]=(0,a.useState)(""),[T,v]=(0,a.useState)(!1),[D,k]=(0,a.useState)(""),[B,I]=(0,a.useState)(void 0),E=(0,a.useRef)(),z=(0,a.useRef)();(0,a.useEffect)((()=>(async function(){if(Qt.isDevice){const{status:t}=await en.getPermissionsAsync();let n=t;if("granted"!==t){const{status:e}=await en.requestPermissionsAsync();n=e}if("granted"!==n)return void on("Permission not granted to get push token for push notification!");const o=nn.default?.expoConfig?.extra?.eas?.projectId??nn.default?.easConfig?.projectId;o||on("Project ID not found");try{const e=(await tn.default({projectId:o})).data;return console.log(e),e}catch(e){on(`${e}`)}}else on("Must use physical device for push notifications")}().then((e=>k(e??""))).catch((e=>k(`${e}`))),E.current=Jt.addNotificationReceivedListener((e=>{I(e)})),z.current=Jt.addNotificationResponseReceivedListener((e=>{console.log(e)})),()=>{E.current&&Jt.removeNotificationSubscription(E.current),z.current&&Jt.removeNotificationSubscription(z.current)})),[]);const[A,P]=(0,a.useState)([]);return(0,a.useEffect)((()=>{const e=(new Date).toISOString().split("T")[0],t=Kt.filter((t=>t.date.toISOString().split("T")[0]===e));P(t)}),[]),(0,R.jsx)(l.default,{style:ln.container,children:(0,R.jsxs)(u.default,{contentContainerStyle:ln.scrollContainer,children:[(0,R.jsxs)(r.default,{style:ln.welcomeContainer,children:[(0,R.jsxs)(s.default,{style:ln.welcomeText,children:["Hi ",e," "]}),(0,R.jsx)(s.default,{style:ln.welcomeSubtext,children:"Here\u2019s what\u2019s happening today"})]}),(0,R.jsx)(r.default,{style:ln.shiftCard,children:(0,R.jsxs)(r.default,{style:{marginLeft:12,flex:1},children:[(0,R.jsx)(s.default,{style:ln.shiftLabel,children:"Today's Shifts"}),A.length>0?A.map((e=>(0,R.jsxs)(r.default,{style:ln.individualShiftCardRow,children:[(0,R.jsx)(q.default,{name:"calendar-outline",size:24,color:an,style:{marginRight:14,marginTop:19}}),(0,R.jsxs)(r.default,{style:{flex:1},children:[(0,R.jsxs)(r.default,{style:ln.iconRow,children:[(0,R.jsx)(q.default,{name:"time-outline",size:16,color:an,style:ln.icon}),(0,R.jsxs)(s.default,{style:ln.shiftLineText,children:[new Date(e.startTime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})," \u2013"," ",new Date(e.endTime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),(0,R.jsxs)(r.default,{style:ln.iconRow,children:[(0,R.jsx)(q.default,{name:"location-outline",size:16,color:an,style:ln.icon}),(0,R.jsxs)(s.default,{style:ln.shiftLineText,children:["Office ID: ",e.officeId]})]}),(0,R.jsxs)(r.default,{style:ln.iconRow,children:[(0,R.jsx)(q.default,{name:"document-text-outline",size:16,color:an,style:ln.icon}),(0,R.jsx)(s.default,{style:ln.shiftLineText,children:e.description})]})]})]},e.id))):(0,R.jsx)(s.default,{style:ln.noShiftText,children:"You have no shift today."})]})}),(0,R.jsxs)(h.default,{style:ln.clockButton,onPress:()=>j.navigate("ClockInOutScreenPhone"),children:[(0,R.jsx)(q.default,{name:"time",size:18,color:"#fff",style:{marginRight:8}}),(0,R.jsx)(s.default,{style:ln.clockButtonText,children:"Go to Clock In / Out"})]})]})})};var cn=n(56662);const un=i.default.create({card:{backgroundColor:"#FFFFFF",borderRadius:12,padding:16,marginVertical:8,shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.1,shadowRadius:5,elevation:3},location:{fontSize:17,fontWeight:"bold",color:"#393D3F",marginBottom:4},description:{fontSize:14,color:"#6C757D",marginBottom:8},timeContainer:{flexDirection:"row",alignItems:"center",marginBottom:8},time:{fontSize:14,color:"#4A90E2",fontWeight:"500"},clockInButton:{backgroundColor:"#2ECC71",paddingVertical:10,paddingHorizontal:20,borderRadius:8,alignItems:"center",marginTop:12},clockInButtonText:{color:"#FFFFFF",fontSize:15,fontWeight:"bold"}}),fn=({shift:e})=>{const[t,n]=(0,a.useState)(!1),o=new Date(e.startTime),i=new Date(e.endTime);return(0,a.useEffect)((()=>{const e=()=>{const e=new Date,t=(o.getTime()-e.getTime())/6e4;n(t<=15&&t>=0)},t=setInterval(e,6e4);return e(),()=>clearInterval(t)}),[e.startTime]),(0,R.jsxs)(r.default,{style:un.card,children:[(0,R.jsx)(s.default,{style:un.location,children:e.officeLocation.name}),(0,R.jsxs)(r.default,{style:un.timeContainer,children:[(0,R.jsx)(q.default,{name:"time-outline",size:16,color:"#4A90E2"}),(0,R.jsxs)(s.default,{style:un.time,children:[o.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})," ","-"," ",i.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),t&&(0,R.jsx)(h.default,{style:un.clockInButton,children:(0,R.jsx)(s.default,{style:un.clockInButtonText,children:"Clock In"})})]})},hn=i.default.create({container:{flex:1,backgroundColor:"#FDFDFF",padding:10},selectedDateTitle:{fontSize:18,fontWeight:"bold",color:"#393D3F",marginVertical:12,textAlign:"center"},shiftsContainer:{flex:1,marginTop:10},noShiftsText:{textAlign:"center",fontSize:16,color:"#8E9196",marginTop:20},errorText:{color:"red",textAlign:"center",marginTop:20}}),gn=()=>{const[e,t]=(0,a.useState)((new Date).toISOString().split("T")[0]),[n,o]=(0,a.useState)([]),[i,l]=(0,a.useState)(!0),[d,c]=(0,a.useState)("");(0,a.useEffect)((()=>{(async()=>{l(!0);const e=await(async()=>{try{const e=await D("accessToken")??"";return(await kt.get("api/roster/getShiftsForLoggedInUser",{params:{accessToken:e}})).data}catch(d){if(d instanceof w.AxiosError){const t=d.response?.data;return new C(t.statusCode,{},t.message)}return new C(400,{},"Something went wrong")}})();e instanceof C?(console.log(e.message),c("Error fetching shifts")):"statusCode"in e&&"data"in e?o(e.data):c("Something went wrong"),l(!1)})()}),[]);const f=n.reduce(((e,t)=>(e[new Date(t.startTime).toISOString().split("T")[0]]={marked:!0,dotColor:"#4A90E2"},e)),{}),h=n.filter((t=>new Date(t.startTime).toISOString().split("T")[0]===e));return(0,R.jsxs)(r.default,{style:hn.container,children:[(0,R.jsx)(cn.Calendar,{markedDates:Object.assign({},f,{[e]:{selected:!0,selectedColor:"#4A90E2"}}),onDayPress:e=>t(e.dateString),theme:{selectedDayTextColor:"#fff",todayTextColor:"#2ECC71"}}),(0,R.jsxs)(s.default,{style:hn.selectedDateTitle,children:["Shifts for ",new Date(e).toDateString()]}),(0,R.jsx)(u.default,{style:hn.shiftsContainer,children:i?(0,R.jsx)(s.default,{children:"Loading..."}):d?(0,R.jsx)(s.default,{style:hn.errorText,children:d}):h.length>0?h.map((e=>(0,R.jsx)(fn,{shift:e},e.id))):(0,R.jsx)(s.default,{style:hn.noShiftsText,children:"No shifts for selected date."})})]})},mn=(e,t)=>{const n=[];let o=((e,t)=>{const n=new Date(e,t,1),o=n.getDay();let a=new Date(n);return o<=3?a.setDate(n.getDate()+(3-o)):a.setDate(n.getDate()+(10-o)),a})(e,t);for(;o.getMonth()===t;){let e=new Date(o);e.setDate(o.getDate()+13),n.push({start:new Date(o),end:new Date(e)}),o.setDate(o.getDate()+14)}return n},xn=(e=>{if(0===e.length)return[];e.sort(((e,t)=>e.startTime.getTime()-t.startTime.getTime()));const t={};return e.forEach((e=>{const n=new Date(e.startTime),o=mn(n.getFullYear(),n.getMonth());for(const a of o)if(n>=a.start&&n<=a.end){const n=`${a.start.toDateString()} - ${a.end.toDateString()}`;t[n]||(t[n]={period:n,shifts:[],totalHours:0,totalEarnings:0});const o=(e.endTime.getTime()-e.startTime.getTime())/36e5,r=30*o;t[n].shifts.push({id:e.id,date:e.startTime.toDateString(),hoursWorked:o.toFixed(2),earnings:r}),t[n].totalHours+=o,t[n].totalEarnings+=r;break}})),Object.values(t)})(Kt),pn=i.default.create({container:{flex:1,backgroundColor:"#FDFDFF",padding:10},incomeCard:{backgroundColor:"#FFFFFF",padding:15,borderRadius:10,marginBottom:10,shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.1,shadowRadius:4,elevation:3},cardHeader:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},periodText:{fontSize:16,fontWeight:"bold",color:"#4A90E2"},summaryText:{fontSize:14,color:"#393D3F",marginTop:5},detailsContainer:{marginTop:10,borderTopWidth:1,borderTopColor:"#E0E0E0",paddingTop:10},shiftDetails:{backgroundColor:"#F7F7F7",padding:10,borderRadius:8,marginTop:5},detailText:{fontSize:14,color:"#393D3F"},noIncomeText:{textAlign:"center",fontSize:16,color:"#8E9196",marginTop:20}}),yn=()=>{const[e,t]=(0,a.useState)(null);return(0,R.jsx)(r.default,{style:pn.container,children:(0,R.jsx)(u.default,{children:xn.length>0?xn.map((n=>(0,R.jsxs)(r.default,{style:pn.incomeCard,children:[(0,R.jsxs)(h.default,{onPress:()=>{return o=n.period,void t(e===o?null:o);var o},style:pn.cardHeader,children:[(0,R.jsx)(s.default,{style:pn.periodText,children:n.period}),(0,R.jsx)(q.default,{name:e===n.period?"chevron-up":"chevron-down",size:24,color:"#4A90E2"})]}),(0,R.jsxs)(s.default,{style:pn.summaryText,children:["Total Hours: ",n.totalHours.toFixed(2)," hrs"]}),(0,R.jsxs)(s.default,{style:pn.summaryText,children:["Total Earnings: $",n.totalEarnings.toFixed(2)]}),e===n.period&&(0,R.jsx)(r.default,{style:pn.detailsContainer,children:n.shifts.map((e=>(0,R.jsxs)(r.default,{style:pn.shiftDetails,children:[(0,R.jsx)(s.default,{style:pn.detailText,children:e.date}),(0,R.jsxs)(s.default,{style:pn.detailText,children:["Hours: ",e.hoursWorked," hrs"]}),(0,R.jsxs)(s.default,{style:pn.detailText,children:["Earnings: $",e.earnings.toFixed(2)]})]},e.id)))})]},n.period))):(0,R.jsx)(s.default,{style:pn.noIncomeText,children:"No income records available."})})})};var jn=n(6313);const wn=[{id:"1",type:"Sick Leave",startDate:"2024-03-05",endDate:"2024-03-07",status:"Approved"},{id:"2",type:"Vacation",startDate:"2024-04-15",endDate:"2024-04-20",status:"Pending"}],bn=i.default.create({container:{flex:1,backgroundColor:"#FDFDFF"},header:{backgroundColor:"#4A90E2",paddingVertical:20,paddingHorizontal:10,borderBottomLeftRadius:40,borderBottomRightRadius:40,flexDirection:"row",justifyContent:"center",alignItems:"center",position:"relative"},menuButton:{position:"absolute",left:10},notificationButton:{position:"absolute",right:10},headerText:{color:"white",fontSize:20,fontWeight:"bold"},contentContainer:{flex:1,paddingHorizontal:20,paddingTop:20},sectionTitle:{fontSize:18,fontWeight:"bold",color:"#4A90E2",marginBottom:10},input:{backgroundColor:"white",borderWidth:1,borderColor:"#E0E0E0",borderRadius:10,padding:10,fontSize:16,marginBottom:10},textArea:{height:80},datePicker:{flexDirection:"row",alignItems:"center",backgroundColor:"#FFFFFF",padding:10,borderRadius:10,marginBottom:10,borderWidth:1,borderColor:"#E0E0E0"},dateText:{fontSize:16,marginLeft:10,color:"#393D3F"},applyButton:{backgroundColor:"#2ECC71",padding:15,borderRadius:10,alignItems:"center",marginBottom:20},applyButtonText:{color:"white",fontSize:16,fontWeight:"bold"},leaveCard:{backgroundColor:"#F7F7F7",padding:15,borderRadius:10,marginBottom:10},leaveType:{fontSize:16,fontWeight:"bold",color:"#4A90E2"},leaveDate:{fontSize:14,color:"#393D3F"},status:{fontSize:14,fontWeight:"bold",marginTop:5},approved:{color:"#2ECC71"},pending:{color:"#F39C12"},noLeaveText:{textAlign:"center",fontSize:16,color:"#8E9196",marginTop:20}}),Cn=()=>{const[e,t]=(0,a.useState)(""),[n,o]=(0,a.useState)(new Date),[i,d]=(0,a.useState)(new Date),[c,f]=(0,a.useState)(""),[g,x]=(0,a.useState)(!1),[p,y]=(0,a.useState)(!1),[j,w]=(0,a.useState)(wn);return(0,R.jsx)(u.default,{style:bn.contentContainer,children:(0,R.jsxs)(l.default,{children:[(0,R.jsx)(s.default,{style:bn.sectionTitle,children:"Apply for Leave"}),(0,R.jsx)(m.default,{style:bn.input,placeholder:"Enter Leave Type (e.g., Sick Leave, Vacation)",value:e,onChangeText:t}),(0,R.jsxs)(h.default,{onPress:()=>x(!0),style:bn.datePicker,children:[(0,R.jsx)(q.default,{name:"calendar-outline",size:20,color:"#4A90E2"}),(0,R.jsxs)(s.default,{style:bn.dateText,children:["Start Date: ",n.toDateString()]})]}),(0,R.jsxs)(h.default,{onPress:()=>y(!0),style:bn.datePicker,children:[(0,R.jsx)(q.default,{name:"calendar-outline",size:20,color:"#4A90E2"}),(0,R.jsxs)(s.default,{style:bn.dateText,children:["End Date: ",i.toDateString()]})]}),(0,R.jsx)(m.default,{style:[bn.input,bn.textArea],placeholder:"Enter Reason",value:c,onChangeText:f,multiline:!0}),(0,R.jsx)(h.default,{style:bn.applyButton,onPress:()=>{if(!e||!c)return void alert("Please fill in all fields");const o={id:Date.now().toString(),type:e,startDate:n.toISOString().split("T")[0],endDate:i.toISOString().split("T")[0],status:"Pending"};w([...j,o]),t(""),f("")},children:(0,R.jsx)(s.default,{style:bn.applyButtonText,children:"Apply Leave"})}),(0,R.jsx)(s.default,{style:bn.sectionTitle,children:"Leave History"}),j.length>0?j.map((e=>(0,R.jsxs)(r.default,{style:bn.leaveCard,children:[(0,R.jsx)(s.default,{style:bn.leaveType,children:e.type}),(0,R.jsxs)(s.default,{style:bn.leaveDate,children:[e.startDate," - ",e.endDate]}),(0,R.jsx)(s.default,{style:[bn.status,"Approved"===e.status?bn.approved:bn.pending],children:e.status})]},e.id))):(0,R.jsx)(s.default,{style:bn.noLeaveText,children:"No leave history available."})]})})},Sn=j.default.create({baseURL:"https://workplace-zdzja.ondigitalocean.app",headers:{"Content-Type":"application/json"}}),Tn=i.default.create({container:{flex:1,backgroundColor:"#FDFDFF"},header:{backgroundColor:"#4A90E2",paddingVertical:20,paddingHorizontal:10,flexDirection:"row",justifyContent:"center",alignItems:"center",borderBottomLeftRadius:40,borderBottomRightRadius:40},menuButton:{position:"absolute",left:10},notificationButton:{position:"absolute",right:10},headerText:{color:"white",fontSize:20,fontWeight:"bold"},content:{alignItems:"center",padding:20},profilePicContainer:{position:"relative",marginBottom:10},profilePic:{width:120,height:120,borderRadius:60,backgroundColor:"#E0E0E0"},cameraIcon:{position:"absolute",bottom:5,right:5,backgroundColor:"#4A90E2",borderRadius:50,padding:5},section:{marginTop:30,width:"100%"},sectionTitle:{fontSize:18,fontWeight:"bold",color:"#393D3F",marginBottom:10},input:{backgroundColor:"white",borderWidth:1,borderColor:"#E0E0E0",borderRadius:10,padding:10,fontSize:16,marginBottom:10},name:{fontSize:24,fontWeight:"bold",color:"#393D3F",marginTop:10,marginBottom:5},role:{fontSize:18,color:"#4A90E2",marginBottom:10},infoCard:{flexDirection:"row",alignItems:"center",backgroundColor:"#F7F7F7",padding:15,borderRadius:10,marginBottom:10,width:"100%"},infoText:{fontSize:16,color:"#393D3F",marginLeft:10},changePasswordButton:{backgroundColor:"#2ECC71",padding:15,borderRadius:10,alignItems:"center",marginTop:10},changePasswordButtonText:{color:"white",fontSize:16,fontWeight:"bold"},logoutButton:{flexDirection:"row",backgroundColor:"#D9534F",padding:15,borderRadius:10,alignItems:"center",justifyContent:"center",width:"100%",marginTop:20},logoutText:{color:"white",fontSize:16,marginLeft:10},modalContainer:{flex:1,padding:20,justifyContent:"center"},backButton:{position:"absolute",top:50,left:20},backText:{fontSize:18,color:"#007AFF"},paragraph:{fontSize:16,marginBottom:20},checkBoxContainer:{flexDirection:"row"},checkbox:{width:20,height:20,borderWidth:1.5,borderColor:"#333",marginRight:10,justifyContent:"center",alignItems:"center"},checked:{backgroundColor:"#007AFF"},checkmark:{color:"#fff",fontSize:14},label:{fontSize:16},filledButtton:{marginTop:20,padding:18,borderRadius:5},filledButtonText:{color:"white",fontSize:18}}),vn=()=>{const[e,t]=(0,a.useState)(null),[o,i]=(0,a.useState)(null),[d,c]=(0,a.useState)(!0),[f,m]=(0,a.useState)(""),[p,y]=(0,a.useState)(!1),[j,b]=(0,a.useState)(!1),S=()=>{b(!1),y(!1)},T=(0,g.useNavigation)();(0,a.useEffect)((()=>{(async()=>{try{const e=await D("accessToken");if(!e)return void alert("Token is missing. Please log in again.");const t=le().decode(e,null),n=t?.userId;if(n){const e=await(async()=>{try{const e=await D("accessToken");if(!e)throw new Error("Token is missing");return(await Sn.get("/api/v1/auth/getCurrentUserDetails",{headers:{Authorization:`Bearer ${e}`}})).data}catch(e){if(e instanceof w.AxiosError){const t=e.response?.data;return console.error("Error fetching user details:",t),null}return console.error("Error:",e),null}})();i(e?.data?e.data:null)}else i(null)}catch(e){console.error("Error fetching user details:",e),i(null)}c(!1)})()}),[]);if(d)return(0,R.jsx)(se.default,{size:"large",color:"#4A90E2",style:{flex:1,justifyContent:"center",alignItems:"center"}});if(!o)return(0,R.jsx)(s.default,{children:"Failed to load user details."});return(0,R.jsxs)(l.default,{style:Tn.container,children:[(0,R.jsxs)(u.default,{contentContainerStyle:Tn.content,children:[(0,R.jsxs)(h.default,{onPress:async()=>{const e=await qt.launchImageLibraryAsync({mediaTypes:Yt.MediaTypeOptions.Images,allowsEditing:!0,aspect:[1,1],quality:1});!e.canceled&&e.assets&&t(e.assets[0].uri)},style:Tn.profilePicContainer,children:[(0,R.jsx)(ne.default,{source:e?{uri:e}:n(47334),style:Tn.profilePic}),(0,R.jsx)(q.default,{name:"camera",size:24,color:"white",style:Tn.cameraIcon})]}),(0,R.jsxs)(s.default,{style:Tn.name,children:[o?.firstName," ",o?.lastName," "]}),(0,R.jsxs)(s.default,{style:Tn.role,children:[o?.role," "]}),(0,R.jsxs)(r.default,{style:Tn.infoCard,children:[(0,R.jsx)(q.default,{name:"person",size:22,color:"#4A90E2"}),(0,R.jsxs)(s.default,{style:Tn.infoText,children:["Full Name: ",o?.firstName," ",o?.lastName]})]}),(0,R.jsxs)(r.default,{style:Tn.infoCard,children:[(0,R.jsx)(q.default,{name:"mail-outline",size:22,color:"#4A90E2"}),(0,R.jsxs)(s.default,{style:Tn.infoText,children:["Email: ",o?.email]})]}),(0,R.jsxs)(r.default,{style:Tn.infoCard,children:[(0,R.jsx)(q.default,{name:"call-outline",size:22,color:"#4A90E2"}),(0,R.jsxs)(s.default,{style:Tn.infoText,children:["Phone: ",o?.phoneNumber]})]}),(0,R.jsxs)(r.default,{style:Tn.infoCard,children:[(0,R.jsx)(q.default,{name:"calendar-outline",size:22,color:"#4A90E2"}),(0,R.jsxs)(s.default,{style:Tn.infoText,children:["Employment Status: ",o?.employmentStatus]})]}),(0,R.jsxs)(h.default,{style:Tn.infoCard,onPress:()=>{T.navigate("EditUserDetailScreens")},children:[(0,R.jsx)(q.default,{name:"lock-closed",size:22,color:"#4A90E2"}),(0,R.jsx)(s.default,{style:Tn.infoText,children:"Update Password"})]}),(0,R.jsxs)(h.default,{style:Tn.infoCard,onPress:()=>{y(!0)},children:[(0,R.jsx)(q.default,{name:"exit-sharp",size:22,color:"#4A90E2"}),(0,R.jsx)(s.default,{style:Tn.infoText,children:"Leave Server"})]}),(0,R.jsxs)(h.default,{style:Tn.logoutButton,onPress:async()=>{try{await k("accessToken"),await k("serverId");const e=await D("accessToken");console.log("Token after deletion:",e),T.reset({index:0,routes:[{name:"Login"}]})}catch(e){console.error("Logout error:",e),alert("Failed to logout")}},children:[(0,R.jsx)(q.default,{name:"log-out-outline",size:22,color:"white"}),(0,R.jsx)(s.default,{style:Tn.logoutText,children:"Logout"})]})]}),(0,R.jsx)(x.default,{presentationStyle:"pageSheet",visible:p,animationType:"slide",onRequestClose:S,children:(0,R.jsxs)(r.default,{style:Tn.modalContainer,children:[(0,R.jsx)(h.default,{style:Tn.backButton,onPress:S,children:(0,R.jsx)(s.default,{style:Tn.backText,children:"\u2190 Back"})}),(0,R.jsx)(s.default,{style:Tn.paragraph,children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer nec odio. Praesent libero. Sed cursus ante dapibus diam. Sed nisi. Nulla quis sem at nibh elementum imperdiet."}),(0,R.jsx)(r.default,{style:Tn.checkBoxContainer,children:(0,R.jsxs)(h.default,{onPress:()=>{b(!j)},style:Tn.checkBoxContainer,children:[(0,R.jsx)(r.default,{style:[Tn.checkbox,j&&Tn.checked],children:j&&(0,R.jsx)(s.default,{style:Tn.checkmark,children:"\u2713"})}),(0,R.jsx)(s.default,{style:Tn.label,children:"I agree to the terms"})]})}),(0,R.jsx)(h.default,{onPress:async()=>{try{const e=await(async()=>{try{const e=await D("accessToken");return(await E.delete("leaveServer",{headers:{Authorization:`Bearer ${e}`}})).data}catch(e){if(e instanceof w.AxiosError){const t=e.response?.data;return new C(t.statusCode,{},t.message)}return new C(400,{},"Something went wrong")}})();(200===e.statusCode||e instanceof C)&&(y(!1),P.default.show({text1:e.message,type:"error",position:"bottom"}))}catch(e){T.goBack(),P.default.show({text1:"Something went wrong",type:"error",position:"bottom"})}},disabled:!j,style:[Tn.filledButtton,{backgroundColor:j?"#007AFF":"#aaa"}],children:(0,R.jsx)(s.default,{style:Tn.filledButtonText,children:"Submit"})})]})})]})},Dn=i.default.create({drawerHeader:{padding:16,marginBottom:8},drawerTitle:{fontSize:20,fontWeight:"bold"},divider:{height:1,backgroundColor:"#eee",marginHorizontal:10,marginTop:16},sectionTitle:{fontSize:20,fontWeight:"bold",marginTop:16,marginBottom:16,paddingHorizontal:16},channelItem:{paddingVertical:10,paddingHorizontal:20,borderRadius:10},channelText:{fontSize:18,color:"#333"},activeChannelItem:{backgroundColor:"#e6f0ff"},activeChannelText:{color:"#1e90ff",fontWeight:"bold"},noChannelText:{fontSize:14,color:"#888",paddingHorizontal:20,paddingVertical:10}}),kn=e=>{const[t,n]=(0,a.useState)(!0),[o,i]=(0,a.useState)([]),[l,d]=(0,a.useState)(null),[c,u]=(0,a.useState)("");(0,a.useEffect)((()=>{(async()=>{await f(),await g(),n(!1)})()}),[]);const f=async()=>{const e=await z(T.PHONE);if(e instanceof C)console.log("Server fetch error:",e.message);else if("statusCode"in e&&"data"in e){const t=e.data.serverId;u(e.data.name),console.log(e.data.name),await v("serverId",t)}else console.log("Something went wrong while fetching server.")},g=async()=>{const e=await D("serverId");if(!e)return;const t=await I(e,T.PHONE);t instanceof C?console.log("Channel fetch error:",t.message):i(t.data)};return(0,R.jsxs)(Zt.DrawerContentScrollView,Object.assign({},e,{children:[(0,R.jsx)(r.default,{style:Dn.drawerHeader,children:(0,R.jsx)(s.default,{style:Dn.drawerTitle,children:c})}),(0,R.jsx)(Zt.DrawerItemList,Object.assign({},e)),(0,R.jsx)(r.default,{style:Dn.divider}),(0,R.jsx)(s.default,{style:Dn.sectionTitle,children:"Channels"}),t?(0,R.jsx)(se.default,{size:"small",style:{marginTop:10}}):o.length>0?o.map((t=>(0,R.jsx)(h.default,{onPress:()=>(t=>{e.navigation.navigate("ChatScreenPhone",{channelId:t.id,channelName:t.name}),e.navigation.closeDrawer()})(t),style:[Dn.channelItem,l===t.id&&Dn.activeChannelItem],children:(0,R.jsxs)(s.default,{style:[Dn.channelText,l===t.id&&Dn.activeChannelText],children:["# ",t.name]})},t.id))):(0,R.jsx)(s.default,{style:Dn.noChannelText,children:"No channels available."})]}))},Bn=()=>(0,R.jsx)(r.default,{}),In=(0,Zt.createDrawerNavigator)(),En=(0,jn.createBottomTabNavigator)();function zn(){return(0,R.jsxs)(En.Navigator,{screenOptions:{tabBarStyle:{paddingTop:10,height:80},tabBarLabelStyle:{fontSize:12}},children:[(0,R.jsx)(En.Screen,{name:"Home",component:An,options:{headerShown:!1,tabBarIcon:({color:e,size:t})=>(0,R.jsx)(q.default,{name:"home",size:t,color:e})}}),(0,R.jsx)(En.Screen,{name:"Notifications",component:Bn,options:{headerShown:!0,headerShadowVisible:!1,title:"Notifications",tabBarIcon:({color:e,size:t})=>(0,R.jsx)(q.default,{name:"notifications",size:t,color:e})}}),(0,R.jsx)(En.Screen,{name:"Profile",component:vn,options:{headerShown:!0,headerShadowVisible:!1,title:"Profile",tabBarIcon:({color:e,size:t})=>(0,R.jsx)(q.default,{name:"person",size:t,color:e})}})]})}const An=()=>{const e=f.default.get("window").width;return(0,R.jsxs)(In.Navigator,{initialRouteName:"Dashboard",drawerContent:e=>(0,R.jsx)(kn,Object.assign({},e)),screenOptions:{drawerStyle:{width:.7*e},headerShown:!0,drawerActiveBackgroundColor:"#e6f0ff",drawerActiveTintColor:"#1e90ff",drawerInactiveTintColor:"#333",drawerItemStyle:{borderRadius:12,marginHorizontal:10,marginVertical:4},drawerLabelStyle:{fontSize:16}},children:[(0,R.jsx)(In.Screen,{name:"Dashboard",component:dn,options:{drawerIcon:({color:e,size:t})=>(0,R.jsx)(q.default,{name:"home",size:t,color:e})}}),(0,R.jsx)(In.Screen,{name:"Schedules",component:gn,options:{drawerIcon:({color:e,size:t})=>(0,R.jsx)(q.default,{name:"calendar",size:t,color:e})}}),(0,R.jsx)(In.Screen,{name:"Income",component:yn,options:{drawerIcon:({color:e,size:t})=>(0,R.jsx)(q.default,{name:"cash-outline",size:t,color:e})}}),(0,R.jsx)(In.Screen,{name:"Leave",component:Cn,options:{drawerIcon:({color:e,size:t})=>(0,R.jsx)(q.default,{name:"airplane-outline",size:t,color:e})}})]})},Pn=j.default.create({baseURL:"https://workhive.space/api/v1/chat/",headers:{"Content-Type":"application/json"}});Pn.interceptors.request.use((async e=>{const t=await D("accessToken");return t&&(e.headers.Authorization=`Bearer ${t}`),e}));const Rn=i.default.create({chatContainer:{flex:1,backgroundColor:"#FDFDFF",paddingTop:16,paddingHorizontal:16,marginBottom:20},messagesContainer:{flex:1,padding:12},emptyChat:{flex:1,justifyContent:"center",alignItems:"center",marginTop:50},emptyChatText:{color:"#8E9196",fontSize:16},messageWrapper:{marginBottom:16},myMessageWrapper:{alignSelf:"flex-end"},message:{borderRadius:12,padding:12,backgroundColor:"#F0F7FF",maxWidth:"90%"},myMessage:{backgroundColor:"#DCF8C6",alignSelf:"flex-end"},messageHeader:{flexDirection:"row",alignItems:"center",marginBottom:4},messageUser:{fontWeight:"bold",color:"#333",marginRight:8},messageTime:{fontSize:12,color:"#8E9196"},messageText:{color:"#393D3F",fontSize:16,lineHeight:22},inputContainer:{flexDirection:"row",alignItems:"center",paddingVertical:20,paddingHorizontal:10,borderTopWidth:1,borderTopColor:"#EFEFEF"},input:{flex:1,padding:12,backgroundColor:"white",borderWidth:1,borderColor:"#E0E0E0",borderRadius:20,marginRight:8,maxHeight:100,fontSize:16},sendButton:{padding:12,backgroundColor:"#4A90E2",borderRadius:25,width:50,height:50,justifyContent:"center",alignItems:"center"},photoButton:{marginLeft:10,padding:12,backgroundColor:"#4A90E2",borderRadius:25,width:50,height:50,justifyContent:"center",alignItems:"center"}}),Wn=({activeChannelId:e,activeChannelName:t,hideBottomNav:n})=>{const[o,i]=(0,a.useState)(""),[l,d]=(0,a.useState)([]),u=async()=>{const t=await(async(e,t=20,n=1)=>{try{return(await Pn.get("fetchChats/"+e,{params:{limit:t,page:n}})).data}catch(o){if(o instanceof w.AxiosError){const e=o.response?.data;return new C(e.statusCode,{},e.message)}return new C(400,{},"Something went wrong")}})(e);console.log(e),t instanceof C?console.log(t.message,"..."):(console.log("Chats fetched successfully:",t.data.chats,"-----------"),d((e=>[...e,...t.data.chats])),t.data.chats.length>1&&console.log("Additional chat log"))},f=(0,a.useRef)(null);(0,a.useEffect)((()=>{d([]),u(),n()}),[e,n]),(0,a.useEffect)((()=>{setTimeout((()=>{f.current?.scrollToEnd({animated:!0})}),100)}),[]),(0,a.useEffect)((()=>($t.on("receiveMessage",(e=>{d((t=>[...t,e]))})),()=>{$t&&$t.disconnect()})));const g=async()=>{if(""===o.trim())return;const t=new Date,n=t.getHours(),a=t.getMinutes(),r={id:`${n%12||12}:${a<10?`0${a}`:a} ${n>=12?"PM":"AM"}`,userId:await x()??"",message:o,channelId:e,createdAt:new Date,Employee:{firstName:"You",email:"",phoneNumber:"",employmentStatus:"Active",role:"employee",profileImage:""}};$t&&$t.emit("sendMessage",r),d([...l,r]),i("")},x=async()=>{const e=await D("accessToken")??"";return le().decode(e,null).userId};return(0,R.jsxs)(re.default,{behavior:"height",style:Rn.chatContainer,keyboardVerticalOffset:80,children:[(0,R.jsx)(c.default,{style:Rn.messagesContainer,data:l,keyExtractor:(e,t)=>e.id||t.toString(),renderItem:({item:e})=>(0,R.jsx)(r.default,{style:[Rn.messageWrapper,"userId"===e.Employee?.firstName&&Rn.myMessageWrapper],children:(0,R.jsxs)(r.default,{style:[Rn.message,"You"===e.Employee?.firstName&&Rn.myMessage],children:[(0,R.jsxs)(r.default,{style:Rn.messageHeader,children:[(0,R.jsx)(s.default,{style:Rn.messageUser,children:e.Employee?.firstName}),(0,R.jsx)(s.default,{style:Rn.messageTime,children:new Date(e.createdAt).toLocaleTimeString()})]}),e.Employee?.profileImage?(0,R.jsx)(ne.default,{source:{uri:e.Employee.profileImage},style:{width:200,height:200,borderRadius:8}}):(0,R.jsx)(s.default,{style:Rn.messageText,children:e.message})]})}),onContentSizeChange:()=>{setTimeout((()=>{f.current?.scrollToEnd({animated:!0})}),100)},initialNumToRender:10,maxToRenderPerBatch:10,windowSize:5}),(0,R.jsxs)(r.default,{style:Rn.inputContainer,children:[(0,R.jsx)(m.default,{style:Rn.input,placeholder:"Type a message",textContentType:"none",value:o,onChangeText:i,returnKeyType:"send",onSubmitEditing:g}),(0,R.jsx)(h.default,{onPress:g,style:Rn.sendButton,children:(0,R.jsx)(q.default,{name:"send",size:24,color:"white"})}),(0,R.jsx)(h.default,{onPress:async()=>{const t=await qt.launchImageLibraryAsync({mediaTypes:["images","videos"],allowsEditing:!0,quality:.8});if(!t.canceled&&t.assets&&t.assets[0].uri){const t=x(),n={id:Date.now().toLocaleString(),userId:await t??"",message:o,channelId:e,createdAt:new Date,Employee:{firstName:"You",email:"",phoneNumber:"",employmentStatus:"Active",role:"employee",profileImage:""}};$t&&$t.emit("sendMessage",n),d([...l,n])}},style:Rn.photoButton,children:(0,R.jsx)(q.default,{name:"camera",size:24,color:"white"})})]})]})},Fn=({route:e,navigation:t})=>{const{channelId:n,channelName:o}=e.params;return(0,R.jsx)(Wn,{activeChannelId:n,activeChannelName:o,hideBottomNav:()=>{}})},Ln="#4A90E2",Nn="#393D3F",On=()=>{const[e,t]=(0,a.useState)(!1),[n,o]=(0,a.useState)(new Date),[i,l]=(0,a.useState)(null),[d,c]=(0,a.useState)(!0),[u,f]=(0,a.useState)([]),[g,m]=(0,a.useState)(null);(0,a.useEffect)((()=>{const e=setInterval((()=>o(new Date)),1e3);return()=>clearInterval(e)}),[]),(0,a.useEffect)((()=>{const e=(new Date).toISOString().split("T")[0],t=new Date,n=Kt.filter((t=>t.date.toISOString().split("T")[0]===e)),o=n.find((e=>new Date(e.startTime)<=t&&new Date(e.endTime)>=t));f(n),m(o??null),o&&l(new Date(o.endTime))}),[n]);return(0,R.jsxs)(r.default,{style:Hn.container,children:[(0,R.jsx)(s.default,{style:Hn.time,children:n.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})}),(0,R.jsx)(s.default,{style:Hn.statusText,children:e?"\u2705 You are clocked in":"\u23f1\ufe0f You are not clocked in"}),(0,R.jsxs)(h.default,{style:[Hn.button,e?Hn.clockOut:Hn.clockIn,g||e?{}:{opacity:.5}],disabled:!g&&!e,onPress:()=>{g&&(l(e?null:new Date(g.endTime)),t((e=>!e)))},children:[(0,R.jsx)(q.default,{name:e?"log-out-outline":"log-in-outline",size:22,color:"#fff",style:{marginRight:8}}),(0,R.jsx)(s.default,{style:Hn.buttonText,children:e?"Clock Out":"Clock In"})]}),u.length>0?(0,R.jsx)(r.default,{style:Hn.shiftList,children:u.map((e=>(0,R.jsxs)(r.default,{style:Hn.shiftCard,children:[(0,R.jsxs)(r.default,{style:Hn.iconRow,children:[(0,R.jsx)(q.default,{name:"time-outline",size:18,color:Ln,style:Hn.icon}),(0,R.jsxs)(s.default,{style:Hn.shiftText,children:[new Date(e.startTime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})," ","-"," ",new Date(e.endTime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),(0,R.jsxs)(r.default,{style:Hn.iconRow,children:[(0,R.jsx)(q.default,{name:"location-outline",size:18,color:Ln,style:Hn.icon}),(0,R.jsxs)(s.default,{style:Hn.shiftText,children:["Office ID: ",e.officeId]})]}),(0,R.jsxs)(r.default,{style:Hn.iconRow,children:[(0,R.jsx)(q.default,{name:"document-text-outline",size:18,color:Ln,style:Hn.icon}),(0,R.jsx)(s.default,{style:Hn.shiftText,children:e.description})]})]},e.id)))}):(0,R.jsx)(s.default,{style:Hn.statusText,children:"You have no shifts today."}),(0,R.jsxs)(r.default,{style:Hn.infoCard,children:[(0,R.jsxs)(r.default,{style:Hn.rowBetween,children:[(0,R.jsx)(s.default,{style:Hn.infoText,children:"\ud83d\udccd Location Status:"}),(0,R.jsx)(s.default,{style:Hn.infoText,children:d?"Inside Zone":"Outside Zone"})]}),(0,R.jsxs)(r.default,{style:Hn.rowBetween,children:[(0,R.jsx)(s.default,{style:Hn.infoText,children:"\u23f3 Shift ends in:"}),(0,R.jsx)(s.default,{style:Hn.infoText,children:(()=>{if(!i)return"--:--:--";const e=i.getTime()-n.getTime();if(e<=0)return"00:00:00";const t=Math.floor(e/36e5),o=Math.floor(e/6e4%60),a=Math.floor(e/1e3%60);return`${t.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`})()})]}),(0,R.jsxs)(r.default,{style:Hn.rowBetween,children:[(0,R.jsx)(s.default,{style:Hn.infoText,children:"Mock Geofence Toggle:"}),(0,R.jsx)(p.default,{value:d,onValueChange:()=>c((e=>!e))})]})]})]})},Hn=i.default.create({container:{flex:1,backgroundColor:"#FDFDFF",justifyContent:"center",alignItems:"center",paddingHorizontal:20},time:{fontSize:48,fontWeight:"bold",color:Ln,marginBottom:12},statusText:{fontSize:18,color:Nn,marginBottom:30},button:{flexDirection:"row",alignItems:"center",paddingVertical:14,paddingHorizontal:28,borderRadius:10,marginBottom:20},clockIn:{backgroundColor:"#2ECC71"},clockOut:{backgroundColor:"#D9534F"},buttonText:{fontSize:16,color:"#fff",fontWeight:"bold"},infoCard:{marginTop:40,backgroundColor:"#fff",borderRadius:12,padding:16,width:"100%",shadowColor:"#000",shadowOpacity:.05,shadowRadius:6,elevation:2},infoText:{fontSize:14,color:Nn,marginBottom:12},rowBetween:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},shiftList:{width:"100%"},shiftCard:{backgroundColor:"#fff",padding:14,borderRadius:10,marginBottom:12,shadowColor:"#000",shadowOpacity:.05,shadowRadius:6,elevation:2},iconRow:{flexDirection:"row",alignItems:"center",marginBottom:6},icon:{color:"gray",opacity:.6,marginRight:8},shiftText:{fontSize:14,color:Nn,flexShrink:1}}),Mn=(0,Q.createStackNavigator)(),Vn=()=>{const{userRole:e,isAuthenticated:t}=ee();return(0,R.jsxs)(Mn.Navigator,{children:[(0,R.jsx)(Mn.Screen,{name:"Welcome",component:ae,options:{headerShown:!1}}),(0,R.jsx)(Mn.Screen,{name:"Login",component:Se,options:{headerShown:!1}}),(0,R.jsx)(Mn.Screen,{name:"InviteCode",component:De,options:{headerShown:!1}}),(0,R.jsx)(Mn.Screen,{name:"SchedulesScreen",component:zt,options:{headerShown:!1}}),(0,R.jsx)(Mn.Screen,{name:"ClockInOutScreen",component:tt,options:{headerShown:!1}}),(0,R.jsx)(Mn.Screen,{name:"EmployeeManagementScreen",component:Je,options:{headerShown:!0}}),(0,R.jsx)(Mn.Screen,{name:"SettingsScreen",component:rt,options:{headerShown:!1}}),(0,R.jsx)(Mn.Screen,{name:"GrossPaymentScreen",component:ct,options:{headerShown:!1}}),(0,R.jsx)(Mn.Screen,{name:"LeaveRequestScreen",component:ht,options:{headerShown:!1}}),(0,R.jsx)(Mn.Screen,{name:"EditUserDetailScreens",component:Pt,options:{headerShown:!0,title:"Password",headerShadowVisible:!1}}),(0,R.jsx)(Mn.Screen,{name:"EditDetailScreens",component:Wt,options:{headerShown:!0,title:"Password",headerShadowVisible:!1}}),(0,R.jsx)(Mn.Screen,{name:"PartialRegesterScreen",component:Ot,options:{headerShown:!0,title:"Password",headerShadowVisible:!1}}),(0,R.jsx)(Mn.Screen,{name:"ParitalRegestrationPasswordScreen",component:Ut,options:{headerShown:!0,title:"Password",headerShadowVisible:!1}}),(0,R.jsx)(Mn.Screen,{name:"ChatScreenPhone",component:Fn,options:({route:e})=>({headerBackTitle:"back",title:e.params?.channelName||"Chat"})}),(0,R.jsx)(Mn.Screen,{name:"ClockInOutScreenPhone",component:On,options:{headerShown:!0,title:"Clock In/Out",headerShadowVisible:!1}}),(0,R.jsx)(Mn.Screen,{name:"Signup1",component:Pe,options:{headerShown:!1}}),(0,R.jsx)(Mn.Screen,{name:"Signup2",component:be,options:{headerShown:!0,headerShadowVisible:!1,headerBackTitle:"back",title:""}}),(0,R.jsx)(Mn.Screen,{name:"SignupPhone",component:Le,options:{headerShown:!0,headerShadowVisible:!1,headerBackTitle:"back",title:""}}),(0,R.jsx)(Mn.Screen,{name:"SignupPassword",component:Me,options:{headerShown:!0,headerShadowVisible:!1,headerBackTitle:"back",title:""}}),(0,R.jsx)(Mn.Screen,{name:"EmployeeDashboard",component:zn,options:{headerShown:!1}}),(0,R.jsx)(Mn.Screen,{name:"AdminDashboard",component:J,options:{headerShown:!1}}),(0,R.jsx)(Mn.Screen,{name:"SearchedServer",component:Be,options:{headerShown:!1}}),(0,R.jsx)(Mn.Screen,{name:"ManagerDashboard",component:J,options:{headerShown:!1}}),(0,R.jsx)(Mn.Screen,{name:"ChatScreen",component:_t,options:{headerShown:!1}})]})},Un=()=>(0,R.jsxs)(te,{children:[(0,R.jsx)(g.NavigationContainer,{children:(0,R.jsx)(xe,{children:(0,R.jsx)(Vn,{})})}),(0,R.jsx)(P.default,{})]});(0,o.default)(Un)},47334:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/wpslogo.38580f727cabdf194c26.png"},50477:()=>{}},t={};function n(o){var a=t[o];if(void 0!==a)return a.exports;var r=t[o]={id:o,loaded:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}n.m=e,n.amdO={},(()=>{var e=[];n.O=(t,o,a,r)=>{if(!o){var s=1/0;for(c=0;c<e.length;c++){for(var[o,a,r]=e[c],i=!0,l=0;l<o.length;l++)(!1&r||s>=r)&&Object.keys(n.O).every((e=>n.O[e](o[l])))?o.splice(l--,1):(i=!1,r<s&&(s=r));if(i){e.splice(c--,1);var d=a();void 0!==d&&(t=d)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[o,a,r]}})(),n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n.p="/",(()=>{var e={792:0};n.O.j=t=>0===e[t];var t=(t,o)=>{var a,r,[s,i,l]=o,d=0;if(s.some((t=>0!==e[t]))){for(a in i)n.o(i,a)&&(n.m[a]=i[a]);if(l)var c=l(n)}for(t&&t(o);d<s.length;d++)r=s[d],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(c)},o=self.webpackChunkweb=self.webpackChunkweb||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var o=n.O(void 0,[673],(()=>n(38567)));o=n.O(o)})();
//# sourceMappingURL=main.eecc992d.js.map